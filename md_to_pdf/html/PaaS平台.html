
    <html lang="zh-cn">
    <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <link href="F:\bkdoc\md_to_pdf/default.css" rel="stylesheet">
    </head>
    <body>
    <h1 id="_1">产品简介</h1>
<p>蓝鲸 PaaS 平台是一个开放的平台，又称蓝鲸 PaaS。该产品在蓝鲸体系中有 3 个重要的作用：</p>
<p>一、面向普通用户，它是进入蓝鲸体系的第一个产品，提供了通用的基础服务，如登录认证、消息通知、其他产品的快捷入口（工作台）、获取更多产品的应用市场等；</p>
<p>二、面向开发人员，它提供了很多的 “SaaS 开发者服务”，让开发者可以简单、快速地创建、部署和管理应用，它提供了完善的前后台开发框架、API 网关（ESB）、调度引擎、公共组件等模块，帮助开发者快速、低成本、免运维地构建支撑工具和运营系统。PaaS 平台为一个应用从创建到部署，再到后续的维护管理提供了完善的自助化和自动化服务，如日志查询、监控告警、运营数据等，从而使开发者可以将全部精力投入到应用的开发之中。主要功能有：支持多语言的开发框架 / 样例、免运维托管、SaaS 运营数据可视化、企业服务总线（API 网关）、可拖拽的前端服务（MagicBox）等。</p>
<p>三、面向系统维护人员（系统管理员），它提供了用户管理（含角色管理）、服务器基本信息维护、第三方服务可视化管理、API 权限控制等功能，更好地维护和管理平台的可用性。</p><h1 id="_1">术语解释</h1>
<ul>
<li>
<p>工作台：又称 “工作面板” 或者 “桌面”，登录进入蓝鲸后，看到的第一个页面，汇总了当前可用的所有 SaaS 应用。</p>
</li>
<li>
<p>SaaS 应用：又称为 “APP”，由蓝鲸 PaaS 平台托管的工具 / 系统 / 产品，功能相对独立，基于 PaaS 平台才可以正常使用，如节点管理、标准运维等，都属于 SaaS 应用。</p>
</li>
<li>
<p>开发环境：对于开发者而言，是基于蓝鲸 PaaS 进行 SaaS 开发的，需要有研发环境。PaaS 平台提供了本地开发环境（个人电脑）、测试环境（预生产环境 / 预投产环境）、正式环境（生产环境 / 投产环境）三种不同的开发环境。</p>
</li>
<li>
<p>MagicBox：又称为前端魔盒，是一款免费的、在线的前端产品，支持拖拽组件生产前端代码，可以帮助开发者快速构建 SaaS 的前端。</p>
</li>
<li>
<p>开发框架：是提高开发者研发效率的功能组件的集合，基于开发框架进行降低通用的研发难度。</p>
</li>
</ul><h1 id="_1">产品架构图</h1>
<p>PaaS 平台不仅将应用服务的运行和开发环境作为一种服务提供给开发者用户，更为开发者用户提供了高效便捷的开发服务，如：组件系统，统一登录，权限管理，后台框架，MagicBox，桌面 / 工作台等。</p>
<p>普通用户从 “工作台” 进入，获取自己需要的产品入口，并可以根据自己的习惯，定制个人 “工作面板”。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/jiagou.png" /></p><h1 id="_1">个人工作台</h1>
<p>蓝鲸提供了很多开箱即用的 SaaS，会统一展示在用户的 “个人工作台”。为避免 “工作台” 内容过多，影响办公效率，可以通过 “排序” 的方式调整 SaaS 系统的入口。</p>
<p>下图所示：“登录” -&gt; “排序” -&gt; 拖拽调整顺序 -&gt;“完成”。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image003.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/personalwrokbench.png" /></p><h1 id="_1">个人中心</h1>
<p>“个人中心” 提供了个人信息修改、密码重置等基础功能，更多功能菜单根据用户的权限不同，展示不同的入口，并做了基础的权限控制。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/personalcenter.png" /></p>
<p>管理员个人中心</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/personalcenteroption.png" /></p>
<p>普通用户个人中心</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/putongyonghu.png" /></p>
<blockquote>
<p>社区版 5.1（含 V5.1）之前的版本是通过 “用户管理” 中的 “角色” 来区分的，后续版本中将通过 “权限中心” 和 “用户管理” 两个基础服务的 SaaS 来进行更细粒度的权限管理，包括以个人、组织架构等维度进度权限申请、审批等功能。
<img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/usermanage.png" /></p>
</blockquote><h1 id="_1">开发者服务</h1>
<h2 id="_2">服务概述</h2>
<p>蓝鲸 PaaS 平台的核心功能就是为开发者提供了通用的、便捷的开发者服务，成为企业内部技术体系的核心发动机，助力企业构建内部私有化的 SaaS 应用市场。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/devall.png" /></p>
<p>基于 PaaS 的开发模式，大幅提升企业内部应用构建的效率。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/devmoshi.png" /></p>
<p>下面将介绍基于蓝鲸 PaaS 平台的特色开发者服务。</p>
<h2 id="_3">开发环境</h2>
<p>按照开发者的习惯，为每个开发者自己创建的 SaaS 提供了 3 个环境，最大限度保证自研 SaaS 的可用性。</p>
<p>(1) 本地开发环境：开发者在本地开发、编码的环境</p>
<p>(2) 测试环境：SaaS 未发布之前，部署到 PaaS 平台测试其功能的有效性和完整性</p>
<p>(3) 正式环境：SaaS 部署到正式环境后，其他用户即可在 “工作台” 看到该 SaaS</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/devenv.png" /></p>
<p>所以，本地环境和测试环境的主要用户为开发者，用于开发者编码和自测；正式环境，即就是将 SaaS 正式发布对外，是所有用户都可以看到并使用的。</p>
<p>说明：虽然用户可以看到系统，但是是否能访问这个系统，取决于应用的设计与开发，可以针对用户进行授权。</p>
<h2 id="_4">开发框架</h2>
<p>为了提高开发效率，蓝鲸提供了统一的 “开发框架”， 该 “开发框架” 集成统一登录鉴权模块、功能开关模块、WEB 安全防护模块、功能组件模块等通用模块。让用户可以专注于代码逻辑的构建。</p>
<p>当用户将代码在本地运行，或者打开线上的 “开发框架” SaaS ，将会看到下图的界面。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/framwork.png" /></p>
<p>为了最大程度降低开发难度，基于 “开发框架” 研发了 “开发样例”，即就是做了部分通过的功能。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/framexample.png" /></p>
<ul>
<li>
<p>统一登录鉴权模块：统一使用 PaaS 平台的 “用户管理” 和登录逻辑</p>
</li>
<li>
<p>WEB 安全防护：主要包括防 csrf 攻击和防 xss 攻击。使用 django 提供的 csrf 模块，开发者无需做其他设置。如需对某些请求去除 csrf 验证，可在对应 view 函数添加 csrf_exempt 装饰器； xss 攻击的中间件，会对所有请求参数将进行特殊字符转义（富文本内容、URL 有特殊处理方式）。</p>
</li>
<li>
<p>功能开关模块：支持开发者在 SaaS 开发迭代中对功能选择性开放、灰度测试等。</p>
</li>
</ul>
<h2 id="_5">可扩展的应用变量</h2>
<p>对应有些敏感变量，比如外部数据库 IP，账号密码等，直接写到代码中会有暴露风险，而且每次修改，需要拉取代码，修改提测上线后才能使用，蓝鲸开发者中心针对该场景，使用变量设置功能完全可以解决开发者的变量硬编码问题。
<img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/varible.png" /></p>
<h2 id="_6">免运维托管</h2>
<p>该功能是 PaaS 模式最核心的功能，基于 Virtualenv 的应用部署模式，在
SaaS 部署时，平台为会它们创建独立的 Virtualenv，保证每个 SaaS 拥有一套 “隔离” 的 Python 运行环境。SaaS 的服务进程则是以 uWSGI 的 cheaper 模式托管，由于采用了 Busyness 算法，uWSGI 能够根据繁忙度，动态的调配 worker 个数，从而达到合理利用系统资源的目的</p>
<h2 id="api">API 网关</h2>
<p>API 网关，又称 “企业服务总线”，ESB，API Gateway。它有两个作用：其一，为整个蓝鲸体系服务，蓝鲸的其他平台，如：配置平台、作业平台、数据平台、容器管理平台等，均可以将各平台的特性以 API 的形式对接到组件中，便于 PaaS 平台上的 SaaS 调用，整合各个平台的强大功能，发挥最实用的价值。其二，第三方系统，如微信公众号 / 企业号、邮件系统、OA 系统、AD 系统、财务系统等非蓝鲸体系内的运营系统，同样以 API 的形式将特性对接到组件，丰富和完善整个 PaaS 平台企业服务总线的服务。从而使 PaaS 平台之上的 SaaS 可以调度一些，连接一切。</p>
<p>“API 网关” 仅限于 “管理员” 角色操作，从 “开发者中心”—&gt;“API 网关” 进入使用。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image010.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image009.png" /></p>
<p>“API 网关” 给出了详细的使用文档，分为以下几个部分：</p>
<p>(1) 简介：概述 API 网关，API 网关的两种接入教程：编码方式（采用 Python 语法）和自助接入方式</p>
<p>(2) 系统管理：API 来自于哪个系统，可以看成是 API 的分类</p>
<p>(3) 通道管理：API 访问的路径管理</p>
<p>(4) 自助接入：目前仅支持 http 请求形式的自助接入</p>
<p>(5) 使用指南：详细的 API 网关的使用教程，如接入教程、自定义配置信息调整、CMSI 消息通知如何配置，以及如何为新加入的组件生产 / 更新 “组件文档”</p>
<p>(6) API 文档：查询蓝鲸官方的和自定义接入组件的使用文档</p>
<blockquote>
<p>注：<a href="5.1/API文档/BK_LOGIN/README.md">蓝鲸组件在线 API 文档</a>。</p>
</blockquote>
<h2 id="magicbox">MagicBox</h2>
<p><a href="http://magicbox.bk.tencent.com/">MagicBox</a>（链接：http://magicbox.bk.tencent.com/ ），又称为前端魔盒。是一个前端资源 PaaS 平台，为蓝鲸应用开发者提供丰富的前端资源，包括常用的 UI 组件、JS 插件及基础模版，开发者可以通过蓝鲸 MagicBox 快速构建页面。它还提供完整的套餐样例供开发者选择，开发者也可以在线拖拽组件组装页面，让前端布局可视化。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image011.png" /></p>
<h2 id="_7">开发培训</h2>
<p>蓝鲸为开发者提供了详细的线上 <a href="https://cloud.tencent.com/developer/edu/major-100008">视频教程</a>。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image013.png" /></p>
<p>提供了长期有效的 <a href="https://bk.tencent.com/s-mart/community/question/440">早起鸟儿有虫吃</a> 学习活动，参与有礼。</p>
<h2 id="_8">开发交流</h2>
<p>为了提供即时有效的技术沟通，组建了 “运维开发群” QQ：878501914</p><h1 id="_1">用户管理</h1>
<p>为了保证使用蓝鲸产品的用户都是可信的，PaaS 平台为整个蓝鲸体系提供了 “统一登录” 模块，该模块包含了基本账号体系。当搭建部署好蓝鲸体系的产品后，会提供一个 URL 给用户访问。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image003.png" /></p>
<p>社区版提供了两种角色：</p>
<p>(1) 管理员：拥有最高权限，可以对蓝鲸用户进行增删改查，对 SaaS 引用进行管理，对后台服务进行管理等；</p>
<p>(2) 用户：基本功能的使用，包括：独立的个人工作台、普通 SaaS 产品，开发者中心创建 SaaS。</p>
<blockquote>
<p>注：社区版的管理员初始化用户名：admin  密码：blueking，请及时修改，且该 admin 是整个体系内置的管理员账号，该账号不可删除，请妥善保存。</p>
</blockquote>
<p>管理员可以管理用户信息，包括分配用户角色和权限。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/userenter.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image005.png" /></p>
<p>支持以下操作：</p>
<p>(1) 新增用户：录入信息，添加一个用户；</p>
<p>(2) 批量导入：下载 excel，并按照格式完善信息，即可批量导入用户信息；</p>
<p>(3) 用户查询：可选择角色类型（所有用户，管理员，用户）进行查询；</p>
<p>(4) 操作：编辑用户信息，重置密码，删除用户。</p><h1 id="_1">应用管理</h1>
<p>蓝鲸 PaaS 平台承载着众多 SaaS，根据 SaaS 部署方式分为 3 种：</p>
<p>第一种：S-mart 应用，通过 “下载 SaaS 包 -&gt; 上传部署（正式环境）-&gt; 配置后台服务（可选）-&gt; 工作台进入” 的方式来使用；</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/smartsaas.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/smartupload.png" /></p>
<p>第二种：我的应用，属于开发者 / 用户自己研发的 SaaS 应用，按照 “创建应用 -&gt; 研发 -&gt; 测试环境部署 -&gt; 正式环境部署” 的方式自研工具 / 系统。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/mysaas.png" /></p>
<p>当应用创建完成后，可以在 “我的应用” 中看到，并对指定的应用进行基本操作。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/mysaasoption.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/mysaasoneoption.png" /></p>
<p>第三种：外链应用，在社区版中没有放到 “开发者中心” 进行添加，而是通过 PaaS 平台的后台管理进行操作。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/wailiansaas.png" /></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/wailiansaasadd.png" /></p>
<blockquote>
<p>“常用链接” 的类型有 3 种：
普通链接：添加后，显示在 “个人工作台” 的右侧，作为 “常用链接”
SaaS 链接：添加后，显示在 “个人工作台” 的面板中，跟其它两类的应用并无差异；
轻应用：将 “标准运维” 生成单一操作的流程应用，通过接口自动注册到 PaaS 中，用户无需处理。</p>
</blockquote>
<p>说明：“S-mart 应用”、“外链应用” 属于管理员操作，“我的应用” 开发者即可进行操作。</p>
<p>这种 “可插拔式” 的 SaaS 应用模式，给用户提供了更多的选择性，也方便管理员对应用进行管理，包括应用的 “部署”、“下架” 等操作。</p>
<p>为了保证 SaaS 的正常使用，严格记录每一次发布变更的操作信息，不论是测试环境，还是正式环境。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image012.png" /></p><h1 id="_1">系统维护</h1>
<p>PaaS 平台提供了基础的维护方式，让管理员可以基于 WEB 页面进行简单的维护操作。</p>
<ul>
<li>服务器管理：可以对搭建部署 SaaS 运营时托管环境的服务器进行简单的操作，包括添加服务器列表、刷新操作、删除。</li>
</ul>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/fuwuqiinfo.png" /></p>
<ul>
<li>第三方服务：对 SaaS 通用的第三方服务进行管理，可以根据企业情况添加。</li>
</ul>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/disanfangfuwu.png" /></p>
<ul>
<li>配置通知渠道：参考 “使用指南 -&gt; CMSI 消息组件” 的使用教程，即可完成内置的邮件、微信 / 企业微信 / 公众号、短信、语音的通知服务配置。</li>
</ul>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/tongzhi.png" /></p>
<p>说明：若使用腾讯云服务，需要自行购买该服务。</p>
<ul>
<li>SaaS 上下架：可以从后台进入到指定目录下，对 SaaS 的状态进行调整。</li>
</ul>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/saashoutai.png" /></p><h1 id="_1">其他高级功能</h1>
<p>(1) 对接企业 SSO</p>
<p>为了适配企业内已有的权限登录系统，蓝鲸企业版提供了完善的解决方案，包括但不限于对接企业的 SSO。</p>
<p>(2) 高可用集群</p>
<p>平台各服务模块，均采用多机部署，由接入层的 healthcheck 模块做负载均衡，保证了平台基础服务的可用性；线上环境的 SaaS 服务也采用了同样的技术方案，多实例部署，在保证隔离性的同时，提高了 SaaS 服务的可用性。</p>
<p>(3) 组件访问频率控制</p>
<p>组件是连接各个系统的桥梁，需要时刻保证组件的可用性和稳定性，通过组件的访问频率控制有效地缓解组件服务的压力。</p>
<p>(4) 企业贴身定制培训</p>
<p>蓝鲸智云产品不仅仅提供通用的产品服务，更为企业提供能力交付的培训，让企业员工快速成长，提高企业的竞争力。授人以鱼，更要授人以渔。因此蓝鲸可以根据企业内部员工的能力，定制培训计划，包括：蓝鲸产品的使用与维护，蓝鲸 DevOps 技能培训，蓝鲸认证等培训服务。</p><h1 id="saas">使用蓝鲸的某个 SaaS</h1>
<p>(1) 访问蓝鲸 “工作台”/“桌面”（若提示用户名 / 密码错误，请联系系统管理员申请权限）</p>
<p>(2) 点击感兴趣的 SaaS 即可使用（若 SaaS 使用过程中有什么疑问，请联系 SaaS 开发者 / 运营负责人）</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image060.png" /></p><h1 id="saas">开发一个 SaaS</h1>
<p>(1) 从 “工作台”，点击 “开发者中心”</p>
<p>(2) 选择 “新手指南”，根据指引完成第一个 SaaS 的开发</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image061.png" /></p>
<p>(3) 本地开发环境搭建的其他方式，可参考社区分享（链接：<a href="http://bk.tencent.com/s-mart/community/question/18">蓝鲸智云本地开发环境指南（Pycharm）</a>）</p><h1 id="s-mart-saas">如何将蓝鲸 S-mart 上的 SaaS 部署起来？</h1>
<p>(1) 以管理员的身份进入 “开发者中心”</p>
<p>(2) 点击 “S-mart 应用”</p>
<p>(3) 点击 “上传部署新应用”</p>
<p>(4) 选择从蓝鲸 S-mart 上下载的 SaaS 包</p>
<p>(5) 点击 “部署”</p>
<p>(6) 部署成功后，即可在 “工作台” 点击进入</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image062.png" /></p><h1 id="magicbox">如何使用蓝鲸 MagicBox 拖拽一个前端界面？</h1>
<p>(1) 访问 <a href="http://magicbox.bk.tencent.com/">MagicBox</a></p>
<p>(2) 选择 “可视化布局”，选择 “PC 端可视化布局” 或者 “移动端可视化布局”</p>
<p>(3) 以 PC 端为例：选择网站 “布局” 结构</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image063.png" /></p>
<p>(4) 从左侧导航选择需要的前端元素，拖拽到右侧的布局中，双击元素可以编辑内容</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image064.png" /></p>
<p>(5) 最后，点击上面的 “保持”/“下载” 即可获取完整的前端界面代码。</p><h1 id="_1">如何将第三方系统放在蓝鲸桌面 / 工作台中使用？</h1>
<p>该功能在社区版和企业版的操作流程是不一样的。</p>
<h2 id="_2">社区版</h2>
<p>该版本提供了 “外链应用”，通过创建该类型应用的方式，即可完成引入第三方系统到 “应用市场” 的操作。</p>
<p>（1）管理员身份 -&gt;“开发者中心”-&gt;“外链应用”</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image068.png" /></p>
<p>（2）“桌面”—&gt; “应用市场”</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image069.png" /></p>
<h2 id="_3">企业版</h2>
<p>(1) 进入 PaaS 平台管理端：domain/admin，选中 “常用链接”</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image065.png" /></p>
<p>(2) 添加 “常用链接”，会发现有 2 种类型</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image066.png" /></p>
<p>“普通链接” 将会显示在面板的 “常用链接”。</p>
<p>“SaaS 链接” 将会显示在工作面板中，所以需要上传一个 logo。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/image067.png" /></p><h1 id="_1">如何配置通知渠道，如邮件、微信、短信等？</h1>
<p>蓝鲸内置了邮件、微信的通知渠道，以 “admin” 的角色进入 “开发者中心”-&gt;“API 网关”-&gt;“使用指南”，可以参考详细的教程进行配置。该配置属于整个蓝鲸体系的通用配置。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17401.png" /></p>
<p>通知渠道配置入口</p>
<p>温馨提示：</p>
<p>软件属于私有部署到企业内部使用，企业需要提供已有的邮件、微信、短信等通知渠道。</p>
<ul>
<li>
<p>邮件：可使用已有的邮箱账号。</p>
</li>
<li>
<p>微信：可前往微信官网申请账号，蓝鲸不提供公共账号，请确保可以访问 weixin.qq.com。</p>
</li>
<li>
<p>短信：默认提供的是腾讯云的短信渠道，需要用户购买腾讯云的 sms 服务。</p>
</li>
</ul>
<p>三种通知渠道，均提供了可页面化的配置方式，无需进行二次开发；若想修订，可在后台进行编码调整。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17402.png" /></p>
<p>通知渠道 API</p>
<p>点击 “发送邮件” 底部显示的参数信息。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17403.png" /></p>
<p>邮件渠道配置参数图</p>
<ul>
<li>dest_url: 若用户不擅长用 Python，可以提供一个其他语言的接口，填到 dest_url，ESB 仅作请求转发即可打通邮件配置</li>
<li>
<p>smtp_host: SMTP 服务器地址（注意区分企业邮箱还是个人邮箱）</p>
</li>
<li>
<p>smtp_port: SMTP 服务器端口（注意区分企业邮箱还是个人邮箱）</p>
</li>
<li>
<p>smtp_user: SMTP 服务器帐号 （mail_sender 相同）</p>
</li>
<li>
<p>smtp_pwd：SMTP 服务器帐号密码 （一般为授权码）</p>
</li>
<li>
<p>smtp_usessl: （默认为 1）</p>
</li>
<li>
<p>mail_sender: 默认的邮件发送者 （smtp_user 相同）</p>
</li>
</ul>
<p>点击 “发送微信消息” 底部显示的参数信息。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17404.png" /></p>
<p>微信渠道配置参数图。</p><h1 id="_1">部署应用过程中，状态一直在 “正在提测” 中，如何处理？</h1>
<p>1) 以 “admin” 身份进入蓝鲸软件；</p>
<p>2) 在浏览器输入 “{domain}/admin” 即可进入 PaaS 平台的后台</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17501.png" /></p>
<p>PaaS 平台后台图</p>
<p>3) 进入如下图的目录，找到对应的 SaaS，更改其当前的状态，即可进行重新部署</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/17502.png" /></p>
<p>“日志检索” 的状态修改入口图</p>
<p>4) 将 SaaS 状态调整为 “测试中” 即可对该产品重新部署。</p><h1 id="saas">如何给某一个 SaaS 开组件 “免用户认证” 的白名单？</h1>
<p><strong>S-mart 市场和自己开发的 SaaS 需要开通白名单免登录验证才能正常使用</strong></p>
<ul>
<li>获取 <code>应用 ID</code>,登陆 <code>PaaS 平台</code>—&gt;<code>开发中心</code>— <code>S-mart应用</code>（自己开发的应用在<code>我的应用</code>）</li>
</ul>
<p><img alt="image.png" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/id4.png" /></p>
<ul>
<li>以管理员身份进入 PaaS 平台的后台 <code>{paas_domain}/admin</code>，进<code>Function controllers</code>目录</li>
</ul>
<p><img alt="image.png" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/id1.png" /></p>
<ul>
<li>点击 <code>user_auth::skip_user_auth</code> 进入白名单组件目录</li>
</ul>
<p><img alt="image.png" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/id2.png" /></p>
<ul>
<li>根据格式要求填写<code>应用 ID</code>（<code>支持两种格式数据，以逗号、分号分隔的字符串，及 JSON 格式字符串</code>）
  <img alt="image.png" src="F:\bkdoc\md_to_pdf/5.1/PaaS平台/assets/id3.png" /></li>
</ul><h2 id="api">蓝鲸统一登录 API 简介</h2>
<p><strong>蓝鲸统一登录，管理用户登录验证，及用户信息。</strong></p>
<table>
<thead>
<tr>
<th>资源名称</th>
<th>资源描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="5.1/API文档/BK_LOGIN/get_all_users.md">get_all_users</a></td>
<td>获取所有用户信息</td>
</tr>
<tr>
<td><a href="5.1/API文档/BK_LOGIN/get_batch_users.md">get_batch_users</a></td>
<td>批量获取用户信息</td>
</tr>
<tr>
<td><a href="5.1/API文档/BK_LOGIN/get_batch_users_platform_role.md">get_batch_users_platform_role</a></td>
<td>批量获取用户各平台角色信息</td>
</tr>
<tr>
<td><a href="5.1/API文档/BK_LOGIN/get_user.md">get_user</a></td>
<td>获取用户信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/bk_login/get_all_users/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取所有用户信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_role</td>
<td>int</td>
<td>否</td>
<td>用户角色，0：普通用户，1：超级管理员，2：开发者，3：职能化用户，4：审计员</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_role&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;qq&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_role&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="n">zh</span><span class="o">-</span><span class="n">cn</span><span class="p">,</span>
            <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;12345678911&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wx_userid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;11@qq.com&quot;</span><span class="p">,</span>
            <span class="s2">&quot;chname&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Asia/Shanghai&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_username</td>
<td>string</td>
<td>用户名</td>
</tr>
<tr>
<td>qq</td>
<td>string</td>
<td>用户QQ</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>语言</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>手机号</td>
</tr>
<tr>
<td>wx_userid</td>
<td>string</td>
<td>企业号用户USERID/公众号用户OPENID</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>邮箱</td>
</tr>
<tr>
<td>chname</td>
<td>string</td>
<td>中文名</td>
</tr>
<tr>
<td>time_zone</td>
<td>string</td>
<td>时区</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/bk_login/get_batch_users/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量获取用户信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_username_list</td>
<td>array</td>
<td>是</td>
<td>用户名列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_username_list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bk_username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;qq&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_role&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;11111111111&quot;</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;zh-cn&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wx_userid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;11@qq.com&quot;</span><span class="p">,</span>
            <span class="s2">&quot;chname&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span>
            <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Asia/Shanghai&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_username</td>
<td>string</td>
<td>用户名</td>
</tr>
<tr>
<td>qq</td>
<td>string</td>
<td>用户QQ</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>语言</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>手机号</td>
</tr>
<tr>
<td>wx_userid</td>
<td>string</td>
<td>企业号用户USERID/公众号用户OPENID</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>邮箱</td>
</tr>
<tr>
<td>chname</td>
<td>string</td>
<td>中文名</td>
</tr>
<tr>
<td>time_zone</td>
<td>string</td>
<td>时区</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/bk_login/get_batch_users_platform_role/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量获取用户各平台角色信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_username_list</td>
<td>array</td>
<td>是</td>
<td>用户名列表</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>登录票据</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_username_list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bkdata&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">1</span>
            <span class="p">],</span>
            <span class="s2">&quot;job&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">2</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>key1</td>
<td>string</td>
<td>用户名</td>
</tr>
<tr>
<td>key1.key2</td>
<td>string</td>
<td>产品代号</td>
</tr>
<tr>
<td>key1.key2.value</td>
<td>list</td>
<td>用户角色，0：普通用户，1：超级管理员，2：开发者，3：职能化用户，4：审计员</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/bk_login/get_user/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取用户信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h3 id="_6">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_7">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;qq&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_role&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;zh-cn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;12345678911&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wx_userid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;11@qq.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;chname&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Asia/Shanghai&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_username</td>
<td>string</td>
<td>用户名</td>
</tr>
<tr>
<td>qq</td>
<td>string</td>
<td>用户QQ</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>语言</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>手机号</td>
</tr>
<tr>
<td>wx_userid</td>
<td>string</td>
<td>企业号用户USERID/公众号用户OPENID</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>邮箱</td>
</tr>
<tr>
<td>chname</td>
<td>string</td>
<td>中文名</td>
</tr>
<tr>
<td>time_zone</td>
<td>string</td>
<td>时区</td>
</tr>
</tbody>
</table><h2 id="api">蓝鲸开发者中心 API 简介</h2>
<table>
<thead>
<tr>
<th>资源名称</th>
<th>资源描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="5.1/API文档/BK_PAAS/get_app_info.md">get_app_info</a></td>
<td>获取应用信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/bk_paas/get_app_info/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取应用信息，支持批量获取</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>target_app_code</td>
<td>string</td>
<td>否</td>
<td>target_app_code 表示应用 ID，多个 ID 以英文分号分隔，target_app_code 为空则表示所有应用</td>
</tr>
<tr>
<td>fields</td>
<td>string</td>
<td>否</td>
<td>fields 需要返回的字段，多个字段以英文分号分割，如果不传或传入 &#34;&#34;，则返回应用的 bk_app_code、bk_app_name 字段。可选的字段有：bk_app_code（应用ID），bk_app_name（应用名），introduction（应用简介），creator（创建者），developer（开发人员）</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;target_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_test;esb_test&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;BKTest&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;ESBTest&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div><h2 id="api">蓝鲸消息管理 API 简介</h2>
<p><strong>蓝鲸消息管理，用于支持向用户发送多种类型的消息，包括邮件、短信、语音通知等。</strong></p>
<table>
<thead>
<tr>
<th>资源名称</th>
<th>资源描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="CMSI/get_msg_type.md">get_msg_type</a></td>
<td>查询消息发送类型</td>
</tr>
<tr>
<td><a href="CMSI/send_mail.md">send_mail</a></td>
<td>发送邮件</td>
</tr>
<tr>
<td><a href="CMSI/send_msg.md">send_msg</a></td>
<td>通用消息发送</td>
</tr>
<tr>
<td><a href="CMSI/send_sms.md">send_sms</a></td>
<td>发送短信</td>
</tr>
<tr>
<td><a href="CMSI/send_voice_msg.md">send_voice_msg</a></td>
<td>公共语音通知</td>
</tr>
<tr>
<td><a href="CMSI/send_weixin.md">send_weixin</a></td>
<td>发送微信消息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/get_msg_type/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>查询 send_msg 组件支持发送消息的类型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h3 id="_6">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_7">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;weixin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;微信&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_active&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mail&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;邮件&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_active&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sms&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;短信&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_active&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;voice&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;语音&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_active&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/send_mail/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>发送邮件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>receiver</td>
<td>string</td>
<td>否</td>
<td>邮件接收者，包含邮件完整地址，多个以逗号分隔，若receiver、receiver__username同时存在，以receiver为准</td>
</tr>
<tr>
<td>receiver__username</td>
<td>string</td>
<td>否</td>
<td>邮件接收者，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，若receiver、receiver__username同时存在，以receiver为准</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>否</td>
<td>发件人</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>是</td>
<td>邮件主题</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>是</td>
<td>邮件内容</td>
</tr>
<tr>
<td>cc</td>
<td>string</td>
<td>否</td>
<td>抄送人，包含邮件完整地址，多个以逗号分隔</td>
</tr>
<tr>
<td>cc__username</td>
<td>string</td>
<td>否</td>
<td>抄送人，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，若cc、cc__username同时存在，以cc为准</td>
</tr>
<tr>
<td>body_format</td>
<td>string</td>
<td>否</td>
<td>邮件格式，包含&#39;Html&#39;, &#39;Text&#39;，默认为&#39;Html&#39;</td>
</tr>
<tr>
<td>is_content_base64</td>
<td>bool</td>
<td>否</td>
<td>邮件内容是否base64编码，默认False，不编码，请使用base64.b64encode方法编码</td>
</tr>
<tr>
<td>attachments</td>
<td>bool</td>
<td>否</td>
<td>邮件附件</td>
</tr>
</tbody>
</table>
<h5 id="attachments">attachments</h5>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>string</td>
<td>是</td>
<td>文件名</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>是</td>
<td>文件内容，文件内容为原文件内容的 base64 编码字符串</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>否</td>
<td>文件类型，默认为文件名后缀，如 a.png 文件类型为 &#39;png&#39;</td>
</tr>
<tr>
<td>disposition</td>
<td>string</td>
<td>否</td>
<td>文件 Content-Disposition，图片文件(type=image, jpg, png, jpeg)默认为 &#39;inline&#39;，其他文件默认为 &#39;attachment&#39;</td>
</tr>
<tr>
<td>content_id</td>
<td>string</td>
<td>否</td>
<td>文件 Content-ID，文件为图片文件时生效；默认为 &#39;&lt;文件名&gt;&#39;</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;receiver&quot;</span><span class="p">:</span> <span class="s2">&quot;admin@bking.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sender&quot;</span><span class="p">:</span> <span class="s2">&quot;admin@bking.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a Test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;html&gt;Welcome to Blueking&lt;/html&gt;&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/send_msg/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>通用消息发送接口</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>msg_type</td>
<td>string</td>
<td>是</td>
<td>发送信息的类型，可通过get_msg_type组件获取</td>
</tr>
<tr>
<td>receiver__username</td>
<td>string</td>
<td>是</td>
<td>接收者，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>是</td>
<td>主题</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>是</td>
<td>内容</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>否</td>
<td>发件人，msg_type 为 mail 时有效</td>
</tr>
<tr>
<td>cc__username</td>
<td>string</td>
<td>否</td>
<td>抄送人，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，msg_type为mail时有效</td>
</tr>
<tr>
<td>body_format</td>
<td>string</td>
<td>否</td>
<td>邮件格式，包含'Html', 'Text'，默认为'Html'， msg_type 为 mail 时有效</td>
</tr>
<tr>
<td>attachments</td>
<td>list</td>
<td>否</td>
<td>邮件附件， msg_type 为 mail 时有效</td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>否</td>
<td>通知发送时间，默认为当前时间 "YYYY-mm-dd HH:MM"，msg_type 为 weixin 时有效</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>否</td>
<td>通知尾部文字，msg_type 为 weixin 时有效</td>
</tr>
<tr>
<td>wx_qy_agentid</td>
<td>string</td>
<td>否</td>
<td>企业微信AgentId，msg_type 为 weixin 时有效</td>
</tr>
<tr>
<td>wx_qy_corpsecret</td>
<td>string</td>
<td>否</td>
<td>企业微信CorpSecret，msg_type 为 weixin 时有效</td>
</tr>
<tr>
<td>is_content_base64</td>
<td>bool</td>
<td>否</td>
<td>通知文字content是否base64编码，默认False，不编码，若编码请使用base64.b64encode方法</td>
</tr>
</tbody>
</table>
<h5 id="attachments">attachments</h5>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>string</td>
<td>是</td>
<td>文件名</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>是</td>
<td>文件内容，文件内容为原文件内容的 base64 编码字符串"</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>否</td>
<td>文件类型，默认为文件名后缀，如 a.png 文件类型为 'png'</td>
</tr>
<tr>
<td>disposition</td>
<td>string</td>
<td>否</td>
<td>文件 Content-Disposition，图片文件(type=image, jpg, png, jpeg)默认为 'inline'，其他文件默认为 'attachment'</td>
</tr>
<tr>
<td>content_id</td>
<td>string</td>
<td>否</td>
<td>文件 Content-ID，文件为图片文件时生效；默认为 '&lt;文件名&gt;'</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb-test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;esb-test-secret&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;msg_type&quot;</span><span class="p">:</span> <span class="s2">&quot;mail&quot;</span><span class="p">,</span>
    <span class="s2">&quot;receiver__username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin,yunchao&quot;</span><span class="p">,</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sdfdfdfsdfasdasdasas&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/send_sms/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>发送短信</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>receiver</td>
<td>string</td>
<td>否</td>
<td>短信接收者，包含接收者电话号码，多个以逗号分隔，若receiver、receiver__username同时存在，以receiver为准</td>
</tr>
<tr>
<td>receiver__username</td>
<td>string</td>
<td>否</td>
<td>短信接收者，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，若receiver、receiver__username同时存在，以receiver为准</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>是</td>
<td>短信内容</td>
</tr>
<tr>
<td>is_content_base64</td>
<td>bool</td>
<td>否</td>
<td>消息内容是否base64编码，默认False，不编码，请使用base64.b64encode方法编码</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;receiver&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span><span class="p">,</span>
    <span class="s2">&quot;receiver__username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Welcome to Blueking&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/send_voice_msg/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>公共语音通知</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>auto_read_message</td>
<td>string</td>
<td>是</td>
<td>自动语音读字信息</td>
</tr>
<tr>
<td>user_list_information</td>
<td>array</td>
<td>否</td>
<td>待通知的用户列表，自动语音通知列表，若user_list_information、receiver__username同时存在，以user_list_information为准</td>
</tr>
<tr>
<td>receiver__username</td>
<td>string</td>
<td>否</td>
<td>待通知的用户列表，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，若user_list_information、receiver__username同时存在，以user_list_information为准</td>
</tr>
</tbody>
</table>
<h4 id="user_list_information">user_list_information</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>string</td>
<td>是</td>
<td>被通知人</td>
</tr>
<tr>
<td>mobile_phone</td>
<td>string</td>
<td>否</td>
<td>被通知人手机号</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;auto_read_message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_list_information&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mobile_phone&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span><span class="p">,</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;instance_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2662152044&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/cmsi/send_weixin/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>发送微信消息，支持微信公众号消息，及微信企业号消息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>receiver</td>
<td>string</td>
<td>否</td>
<td>微信接收者，包含绑定在指定公众号上的微信用户的 openid 或 企业号上的微信用户的用户ID，多个以逗号分隔</td>
</tr>
<tr>
<td>receiver__username</td>
<td>string</td>
<td>否</td>
<td>微信接收者，包含用户名，用户需在蓝鲸平台注册，多个以逗号分隔，若receiver、receiver__username同时存在，以receiver为准</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>消息内容</td>
</tr>
<tr>
<td>wx_qy_agentid</td>
<td>string</td>
<td>否</td>
<td>agentid of WeChat app</td>
</tr>
<tr>
<td>wx_qy_corpsecret</td>
<td>string</td>
<td>否</td>
<td>secret of WeChat app</td>
</tr>
</tbody>
</table>
<h4 id="data">data 参数包含内容</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>heading</td>
<td>string</td>
<td>是</td>
<td>通知头部文字</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>是</td>
<td>通知文字</td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>否</td>
<td>通知发送时间，默认为当前时间 &#34;YYYY-mm-dd HH:MM&#34;</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>否</td>
<td>通知尾部文字</td>
</tr>
<tr>
<td>is_message_base64</td>
<td>bool</td>
<td>否</td>
<td>通知文字message是否base64编码，默认False，不编码，若编码请使用base64.b64encode方法</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;receiver&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;heading&quot;</span><span class="p">:</span> <span class="s2">&quot;blueking alarm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-22 15:36&quot;</span><span class="p">,</span>
        <span class="s2">&quot;remark&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a test!&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div><h1 id="faq">FAQ</h1>
<p>(1) 蓝鲸 DevOps 技能有培训教程吗？</p>
<p>答：蓝鲸为社区用户准备了在线视频教程，可以免费观看。（链接：<a href="https://cloud.tencent.com/developer/edu/major-100008">https://cloud.tencent.com/developer/edu/major-100008</a>）</p>
<p>(2) 学习蓝鲸 DevOps 技能过程中遇到问题怎么办？</p>
<p>答：学习过程中，任何疑问可咨询蓝鲸 QQ <a href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&amp;key=XzgwMDgwMjAwMV80NDMwOTZfODAwODAyMDAxXzJf">在线客服</a>，除此之外，蓝鲸为社区用户准备了交流 QQ 群：<a href="https://jq.qq.com/?_wv=1027&amp;k=4BcXfIr">蓝鲸社区版交流 1 群</a> 495299374，群内的社区用户和蓝鲸助手会热心为大家提供咨询服务。</p>
<p>(3) 如何将蓝鲸体系的用户体系对接到企业内已有的 OA 系统？</p>
<p>答：蓝鲸提供了登录 API 接口，可以对接普通的账户 Vs 密码形式的 OA 账号，可参考 <a href="5.1/开发指南/扩展开发/对接企业登录体系/flow_chart.md">企业内部登录对接蓝鲸智云统一登录指南</a> 完成对接，更多对接的功能在持续开发中。</p>
    </body>
    </html>
    