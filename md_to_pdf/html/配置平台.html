
    <html lang="zh-cn">
    <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <link href="F:\bkdoc\md_to_pdf/default.css" rel="stylesheet">
    </head>
    <body>
    <h1 id="_1">产品简介</h1>
<p>蓝鲸配置平台是一款面向应用的 CMDB，在 ITIL 体系里，CMDB 是构建其它流程的基石，而在蓝鲸智云体系里，配置平台就扮演着基石的角色，为应用提供了各种运维场景的配置数据服务。它是企业 IT 管理体系的核心，通过提供配置管理服务，以数据和模型相结合映射应用间的关系，保证数据的准确和一致性；并以整合的思路推进，最终面向应用消费，发挥配置服务的价值。</p>
<p>目前，蓝鲸配置平台已正式对外开源，GitHub 地址： <a href="https://github.com/Tencent/bk-cmdb">https://github.com/Tencent/bk-cmdb</a></p>
<p><img alt="fuction" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/function.png" /></p><h1 id="_1">术语解释</h1>
<ul>
<li>
<p><strong>业务</strong>：可以理解为项目，是蓝鲸配置平台的基础对象，可以定义业务角色分工（如产品、测试、开发、运维）、业务的生命周期等。在作业平台、监控、标准运维等系统中，均以已有业务为基础进行运作。</p>
</li>
<li>
<p><strong>集群</strong>：用于区分一个业务的不同环境，或者同一个环境的多个部署区域。常见定义有，按照环境类型区分：正式集群、测试集群。按照区域区分：华东区、华北区。</p>
</li>
<li>
<p><strong>模块</strong>：模块是业务拓扑管理的最小单位，通常用于标识一组固化的进程集合，例如 DB、DR、Login、Web 等。</p>
</li>
<li>
<p><strong>空闲机</strong>：通过资源池分配到业务默认会放到空闲机模块中，在空闲机模块下即被定位为没有被实际使用的主机资源。</p>
</li>
<li>
<p><strong>故障机</strong>：当主机在实际应用中被发现有异常，建议转移到“故障机”模块中进行标识，修复以后可以转移到空闲机或者再划分到业务模块中。</p>
</li>
<li>
<p><strong>云区域</strong>：云区域是主机内网的逻辑区域划分，跨云区域之间的主机不可以通过内网直接互相访问，且 IP 可重复。默认主机属于直连区域。</p>
</li>
<li>
<p><strong>模型</strong>：模型是对同类配置实例进行标准格式的定义，例如主机和机房有不同的配置记录需要：主机需要包含固资编号，机房需要包含运营商信息，可以定义主机、机房两个模型，以保证相关配置录入 CMDB 的时候必须包含所需信息。除了属性列表以外，模型还能够定义唯一性校验、可关联性等。</p>
</li>
<li>
<p><strong>模型分组</strong>：模型分组可以帮助对模型进行归类，便于查询和理解，例如通常会把交换机、路由器、硬件防火墙归类到网络设备分组下。</p>
</li>
<li>
<p><strong>关联类型</strong>：模型关联关系的分类，如主机于交换机、路由之间的关系可以分类为“上联”类型，软件与主机之间的关系是 “运行” 等。</p>
</li>
<li>
<p><strong>模型关联</strong>：模型之间的可关联性定义。</p>
</li>
<li>
<p><strong>关联关系</strong>：实例关联：实例之间的关联关系，例如主机“上联”了一个交换机。在 CMDB 中，这种关系可以通过网状可视化展示。</p>
</li>
<li>
<p><strong>实例</strong>：也称为配置实例，CMDB 每条有意义的记录主体都是一个配置实例，例如一个交换机、一个主机等。</p>
</li>
<li>
<p><strong>动态分组</strong>：动态分组主要用于定义常用的条件查询，在使用作业平台或标准运维时可以根据动态分组快速检索目标主机。</p>
</li>
<li>
<p><strong>事件推送</strong>：事件推送主要指当配置信息发生变化的时候，实时通知到关联的系统中。目前支持按照模型分类进行推送配置。</p>
</li>
</ul><h1 id="_1">产品构架图</h1>
<p>蓝鲸配置平台是基于微服务架构设计，系统的部署发布可以支持传统方式和容器方式，具有可扩展性、易于监控、平滑升级等特点，同时采用 GO 语言作为底层开发语言，易于开发，并且具备较高的性能，系统的运行效率得到较大提升。</p>
<p><img alt="产品架构" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/产品架构.png" /></p><h1 id="_1">功能列表</h1>
<table><tbody>
<tr><td>    特性  </td><td>   子特性 </td><td>   功能描述    </td></tr>
<tr><td rowspan="2" >   基础资源
</td><td>   业务  </td><td>   支持对业务的新建、归档及还原。 </td></tr>
<tr><td>    主机  </td><td>   核心功能包含主机的录入、分配到业务、删除主机等。 </td></tr>
<tr><td rowspan="5" >   业务资源
<tr><td>    业务主机    </td><td>   将主机从业务空闲池分配到具体的业务模块中，以进行合理的资源管理。</td></tr>
<tr><td>    业务拓扑    </td><td>   业务拓扑是对部署结构的一种抽象表示，是配置平台进行主机管理的基础，提供用户结构自定义、拓扑属性自定义等功能。默认的业务拓扑由业务、集群、模块三层构建而成，而集群/模块是基于拓扑管理的基础上的进一步细化，支持单一集群、模块维度的管理，同时提供了批量修改，集群克隆等功能。  </td></tr>
<tr><td>    进程管理    </td><td>   帮助业务管理进程端口等基础信息，支持新增业务进程和绑定进程到模块等。</td></tr>
<tr><td>    动态分组    </td><td>   当业务下的拓扑结构过于复杂的时候，可以通过动态分组功能，定义常用的查询条件，支持动态分组列表查看和新增动态分组等。   </td></tr>
<tr><td rowspan="1" >   审计与分析
</td><td>   操作审计    </td><td>   所有用户在配置平台上的操作，都有对应的记录可以追溯，用户可以在操作审计菜单项下查看历史操作信息。    </td></tr>
<tr><td rowspan="2" >   权限控制
</td><td>   业务权限管理  </td><td>   支持业务的主要负责人对业务下所有集群、模块、主机等的管理。   </td></tr>
<tr><td>    系统权限管理  </td><td>   支持管理员对于和业务没有直接关系的功能，如系统功能、普通自定义实例，以 “角色+权限” 方式设定权限。 </td></tr>
<tr><td rowspan="5" >   模型管理
</td><td>   模型  </td><td>   配置平台内置的模型有业务、集群、模块、主机、进程、云区域，此外还可以通过自定义新增模型。 支持现有模型查看、模型分组、模型创建、模型编辑、模型字段唯一校验、模型字段分组、模型删除、模型从停用恢复、模型字段导出和导入等。</td></tr>
<tr><td>    模型拓扑    </td><td>   模型拓扑是支持用户可视化查看当前模型关系的拓扑视图，并进行简单管理的功能，支持创建模型之间关联、删除模型之间关联、模型从拓扑视图移除等。    </td></tr>
<tr><td>    业务模型    </td><td>   配置平台默认的主线业务拓扑只有 “业务-集群-模块-主机“ 四层，系统支持新增自定义层级，最多可以新增 3 个拓扑层级。    </td></tr>
<tr><td>    关联类型    </td><td>
关联类型指两个模型之间的关联定义。只有定义了关联类型，才能够创建对应的数据实例之间的关系。支持新增关联类型、创建模型关联、编辑模型关联等。   </td></tr>
<tr><td>    事件推送    </td><td>   事件推送功能能够实现当配置信息发生变化的时候，实时通知到关联的系统中，目前支持 HTTP 的推送方式。支持创建事件推送和事件推送状态查询等。  </td></tr>
<tr><td>    我的收藏    </td><td>       </td><td>   查看在首页收藏常用的资源。   </td></tr>
</tbody></table><h1 id="_1">首页</h1>
<p>如图，红色横向框展示的是对上一次登陆功能使用记录的展示，以及最下方主机管理功能、模型功能的直观展示，可以直接进入到该模型查询数据，省去了需要在左侧功能栏才能进入到对应的功能查看数据的繁琐步骤。也可以对某个功能进行收藏(红色竖向框)。</p>
<p><img alt="image-20190220234434659" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/首页展示.png" /></p><h1 id="_1">基础资源</h1>
<p>基础资源包含业务和主机。业务是蓝鲸配置平台的基础对象，可以定义业务角色分工（如产品、测试、开发、运维）、业务的生命周期等。主机管理是配置平台的核心功能，主要具备几点功能点：拓扑维度的主机概况展示、便捷的主机筛选、丰富的增值功能和主机属性自定义展示。</p>
<h2 id="_2">业务</h2>
<p>在作业平台、监控、标准运维等系统中，均以已有 <code>业务</code> 为基础进行运作。
业务是蓝鲸持续部署环节比较重要的概念，主要用于资源和配置隔离，在配置平台创建的业务，默认同时应用于作业平台、标准运维、蓝鲸监控、故障自愈等场景。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务.png" /></p>
<p>用户在有权限的基础上对业务进行管理，包含查看业务列表，新建、归档及还原等操作。</p>
<p>新建一个业务，包含：</p>
<ul>
<li>
<p>选择业务拓扑类型，包含三级拓扑和二级拓扑。</p>
</li>
<li>
<p>填写新建业务的基础信息，包含业务名称，产品人员，业务运维等字段。</p>
</li>
</ul>
<p>单一业务的修改，可修改的字段包括业务名称，运维人员以及自定义属性。一个及一个以上的业务同时修改您指定的字段属性。其中属性名列的修改字段是可以指定的。</p>
<h2 id="_3">主机</h2>
<p>为了标准化管理和提高主机资源利用率，设计了资源池模式，所有主机需要统一先录入到主机资源池中，然后再分配至具体的业务下的空闲机池，同时也可以删除不需要的主机。核心功能包含主机的录入、分配到业务、删除主机等。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/2.png" /></p>
<p>目前在配置平台导入主机分以下两种，一种是 <code>Excel 批量导入</code>。另一种是通过 <code>节点管理</code> 进行导入。</p>
<ul>
<li><strong>方法 1：通过 Excel 批量导入</strong></li>
</ul>
<p>当主机在直连区域（蓝鲸中控环境可以直接访问区域）时，可以使用此方法。</p>
<ul>
<li><strong>方法 2：节点管理进行导入</strong></li>
</ul>
<p>切换到自动导入的 Tab 页，通过点击跳转到链接可以打开 "Agent 安装" 应用，根据节点管理对 Agent 的安装流程，相关主机信息会自动同步到配置平台对应业务下的资源池中。</p>
<p><strong>主机删除</strong> 选中目标主机以后，点击 【删除】 按钮可以删除不需要的主机，需要注意的是主机被删除以后，不可以还原，请谨慎操作。</p>
<p><img alt="image-20190220230523611" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/删除主机.png" /></p><h1 id="_1">业务资源</h1>
<p>业务资源是集合了对业务层管理的使用功能，包含业务主机、业务拓扑、进程管理、动态分组 4 个功能板块。实现业务的精细划分以及拓扑直观展示。</p>
<h2 id="_2">业务主机</h2>
<p>默认从主机资源池分配到业务的主机会放到 "空闲机" 模块下，我们需要分配到具体的业务模块中，以进行合理的资源管理。</p>
<h2 id="_3">业务拓扑</h2>
<p>业务拓扑是对部署结构的一种抽象表示，是配置平台进行主机管理的基础，在业务架构以及类型越来越复杂的今天，只有建立合适的业务模型，才能结构化的管理好主机。配置平台提供用户结构自定义、拓扑属性自定义等功能。</p>
<ul>
<li>
<p>拓扑结构自定义，配置平台支持用户定义 <code>业务-集群-模块</code> 此种三级的数据结构或者业务-模块这类两级数据结构，用户可以针对不同的场景选择性的建立适合于自己业务的结构。</p>
</li>
<li>
<p>集群、模块属性自定义，配置平台中集群、模块的属性除名称、负责人等标准属性外还提供自定义属性管理，用户可以通过各种自定属性的使用，进一步从各种维度对主机进行分类管理。</p>
</li>
</ul>
<p>主机管理是配置平台的核心功能，在保留传统的列表管理同时还能结合拓扑进行跨云管理。主要具备以下功能点：</p>
<ul>
<li>
<p>拓扑维度的主机概况展示，通过页面左边的拓扑树能展示主机在各集群和模块下的分布情况。</p>
</li>
<li>
<p>跨云管理主机，在配置平台可以便捷的管理不同云下的主机，不会受内网 IP 冲突等影响。</p>
</li>
<li>
<p>便捷的主机筛选，用户可以在配置平台通过各种自己想要的条件过滤主机。</p>
</li>
<li>
<p>丰富的增值功能，配置平台提供表格导出、实时数据查看、主机模块变更等供协助用户更好的管理主机。</p>
</li>
<li>
<p>主机属性自定义展示，在主机管理页面用户可以选择性的展示自己需要的主机字段，同时用户可以导入配置平台不提供的一些主机字段。</p>
</li>
<li>
<p>实时数据展示，在主机详情页面会展示主机详情、系统状态、计划任务、Hosts 文件、路由信息等主机快照数据。</p>
</li>
</ul>
<p><strong>动态拓展的业务层级</strong> 不同企业中的业务层级、名称、管理属性都有差异，动态拓展的业务层级让业务的管理更贴合习惯。</p>
<p>配置平台初始化以后，默认会创建名为 "蓝鲸" 的业务，需要注意的是，蓝鲸业务并非是示例业务，在部署都会依赖此配置，在配置平台中已经限制了对此业务的拓扑修改，用户在修改此业务下主机、进程等配置时候，需要充分理解蓝鲸的部署逻辑。否则可能会导致整体平台出现异常。</p>
<ul>
<li>查看蓝鲸业务拓扑，可以通过点击导航 "业务资源 - 业务拓扑" ，左上角业务选择框中选择 "蓝鲸" 业务，可以看到下方展示了整个蓝鲸的部署拓扑。</li>
</ul>
<p><img alt="image-20190220221443531" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务拓扑.png" /></p>
<h2 id="_4">进程管理</h2>
<p>模块被定义为一组强相关进程的集合，"进程管理" 功能可以帮助业务管理进程端口等基础信息，比较典型的应用场景有蓝鲸的监控系统对进程进行监控。</p>
<p>一个模块下的服务器通常执行的是同一个功能，由一个或者多个业务进程构成，"进程管理" 功能可以帮助业务管理进程以及其端口、进程和模块的绑定关系。在监控系统中也会用到此特性。</p>
<p><strong>a.</strong>  新建进程，创建一个进程，支持三种模式
- 没有监听端口的进程
- 监听一个端口的进程
- 监听多个端口的进程</p>
<p><strong>b.</strong>  在新增进程的高级属性下，可以保存进程更加详细的信息，包含：启动命令，停止命令，重启命令，自动拉起选项等。需要注意的是，配置平台只是作为进程端口信息的存储，在蓝鲸监控系统或者用户自定义的应用中实现具体功能。</p>
<p><strong>c.</strong>  进程绑定模块，新增了一个自定义进程以后，可以通过 "绑定" 功能，把进程绑定到之前定义的业务模块上。在真实运营场景中，其他系统通过查询模块下的主机，可以最终得到哪些主机上运行了哪些进程。</p>
<h3 id="1">1. 新增业务进程</h3>
<p>通过左侧导航打开 "业务资源 - 进程管理" 功能页，点击 【新建】按钮。</p>
<p><img alt="image-20190223101758140" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/新建进程管理.png" /></p>
<p>进程相关的重要名词解释：</p>
<p><strong>进程名称</strong>：进程的唯一标识，便于用户区分出业务下不同的进程，名称需要保证业务下唯一。</p>
<p><strong>功能名称</strong>：程序的二进制名称，比如 Zookeeper 的二进制名称是 java，则填写 java。</p>
<p><strong>进程描述</strong>：对于进程的进一步详细描述，也可以理解为此进程的备注信息。</p>
<p><strong>端口</strong>：当进程启动会监听端口时，可以根据进程实际情况填写端口信息，填写规则有：</p>
<ol>
<li>单个进程填写 <code>80</code>；</li>
<li>多个进程填写 <code>80,90</code>，表示进程监听了 80,90 两个端口，以逗号隔开；</li>
<li>多个连续进程填写 <code>80-90</code>，表示进程监听了 80，81，82...89，90 一共 11 个端口；</li>
<li>混合包含连续和不连续端口填写 <code>80,90-92</code>，表示监听了 80，90，91，92 一共 4 个端口；</li>
</ol>
<p><strong>协议</strong>：所监听端口的使用的协议，当前支持配置 TCP，UPD 两种协议。</p>
<p><strong>绑定 IP</strong>： 所监听端口绑定在哪个 IP 下，可选项有 0.0.0.0、127.0.0.1、第一内网（ "内网 IP" 字段记录的 IP）、第一外网（ "外网 IP" 字段记录的 IP）。</p>
<p>此外，更多属性分组里可以配置进程的更多信息，如功能 ID、工作路径、启动命令、启动用户等，因对应的进程管理 SaaS 尚未内置到蓝鲸中，用户可选配置。</p>
<h3 id="2">2. 绑定进程到模块</h3>
<p>在配置平台设计中，主机资源一定属于某个业务模块，进程通过绑定到模块，可以很方便的批量把进程信息配置到主机之上。通过主机和进程的关系，进而实现主机上进程监控或者对进程进行启停等管理。</p>
<p>点击一个已经创建好的进程，切换到模块绑定 Tab 标签，点击目标模块后方的 【未绑定】 按钮，完成对模块的绑定。</p>
<p><img alt="image-20190223101943033" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/进程管理.png" /></p>
<h2 id="_5">动态分组</h2>
<p>当业务下的拓扑结构过于复杂的时候，可以通过动态分组功能，定义常用的查询条件。例如：集群属性的 “服务状态” 为 "开放" 的主机列表。这些动态分组可以直接在作业平台、标准运维中对主机进行查询的时候使用。</p>
<p>用户可以在配置平台点击新增一个动态分组，在新增时首先选择分组对象，是针对集群、模块还是主机以及分组期望的输出是什么。然后选择与或非逻辑是等于、不等于还是存在或者非存在，选择好与或逻辑之后输入期望的的值，点击预览则会展示当前分组的输出，同时分组支持多个条件的组合。</p>
<h3 id="1_1">1. 动态分组列表</h3>
<p>可以在 "业务资源 - 动态分组" 看到当前业务下的已经配置的查询列表。</p>
<p><img alt="image-20190223102726522" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/动态分组列表.png" /></p>
<h3 id="2_1">2. 新增动态分组</h3>
<p>通过点击 <code>新增</code> 增加一个动态分组。</p>
<p>配置分为两方面的内容：</p>
<ul>
<li>分组内容：是指分组后期待页面显示的字段内容都有哪些。</li>
<li>分组条件：是指根据怎样的条件将主机划分到不同的组内。</li>
</ul>
<p><img alt="image-20190223102352955" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/动态分组.png" /></p><h1 id="_1">审计与分析</h1>
<p>所有用户在配置平台上的操作，都有对应的记录可以追溯，用户可以在操作审计菜单项下查看具体的历史操作。</p>
<h2 id="_2">操作审计</h2>
<p>操作审计是面向管理员功能，能够查询到所有用户在配置平台上的操作。通过导航打开 "审计与分析 - 操作审计" 进入功能页。</p>
<p><img alt="image-20190221101954606" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/操作审计.png" /></p><h1 id="_1">权限控制</h1>
<p>配置平台支持两层权限配置：业务功能权限管理、系统功能权限管理。</p>
<h2 id="_2">业务功能权限管理</h2>
<p>当新建业务时，"业务运维" 被认为是业务的主要负责人，默认拥有此业务最高权限，包含业务下所有集群、模块、主机等的管理权限。如下图配置，monitor 用户拥有 "测试业务 1" 所有的权限。</p>
<p><img alt="image-20190221110229351" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img043.png" /></p>
<p>默认状态下，产品、测试、开发、操作人员可以在配置平台看到业务的资源情况，但是对业务下数据没有修改权限。管理员可以根据企业的实际需要，授予角色特定的权限。</p>
<p>具体操作可以通过侧边导航打开 "权限控制-业务权限管理"，选择目标角色，勾选需要授予的权限即可。</p>
<p><img alt="image-20190221110755834" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务权限管理.png" /></p>
<p>需要注意的是，这里角色的权限配置是对整个企业的所有业务生效，而非单个业务。</p>
<h2 id="_3">系统功能权限管理</h2>
<p>对于和业务没有直接关系的功能，如系统功能、普通自定义实例，管理员可以通过常用的 "角色+权限" 方式设定权限。以下以网络设备管理员为例，分为两个步骤设定角色权限：</p>
<p><strong>（1）创建角色</strong></p>
<p>通过侧边导航打开 "权限控制-系统权限管理"，点击 <code>新建</code> 打开对话框。</p>
<p>角色名填写 "网络管理员" ，成员中指定需要授权的人员，这里设定了 monitor 为网络管理员。</p>
<p><img alt="image-20190221111058480" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img045.png" /></p>
<p><strong>（2）角色授权</strong></p>
<p>通过角色创建以后，可以在角色列表中看到新增的角色，点击 【权限详情】 按钮进入权限配置页，可以对该角色的权限进行细粒度的划分。</p>
<p><img alt="image-20190221111250700" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img046.png" /></p><h1 id="_1">模型管理</h1>
<p><strong>自定义企业信息模型</strong> 。 配置平台提供了灵活的模型定义功能，支持企业根据自身的业务架构，进行自定义特定的信息模型。</p>
<p>配置平台中管理的信息实例，均是基于模型构造而成。目前内置的模型有业务、集群、模块、主机、进程、云区域。如果内置模型不能够满足，可以通过自定义新增、编辑模型，从而构造出企业特有的 CMDB。</p>
<p>需要注意的是，模型管理定位为配置平台的底层功能，需要配置平台管理员权限才可以操作。</p>
<h2 id="_2">模型</h2>
<p>配置平台内置的模型有业务、集群、模块、主机、进程、云区域，此外还可以通过自定义新增模型。 支持现有模型查看、模型分组、模型创建、模型编辑、模型字段唯一校验、模型字段分组、模型删除、模型从停用恢复、模型字段导出和导入等。</p>
<h3 id="1">1. 现有模型查看</h3>
<p>使用管理员账户登录以后，可以通过 "模型管理 - 模型" 中查看到当前系统中存在的模型。</p>
<p><img alt="image-20190220232426689" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img019.png" /></p>
<p>查看某个模型下的相关属性。</p>
<p><img alt="image-20190220232536229" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img020.png" /></p>
<h3 id="2">2. 模型分组</h3>
<p>系统支持对模型按照使用的功能进行分组。分组有 "系统内置" 和 "用户自定义" 两种类型，当前系统内置分组有 "主机管理"、"业务拓扑"、"组织机构"、"网络"、"中间件"。</p>
<p>a. 用户自定义分组：</p>
<p>新建分组：可以通过 【新建分组】 按钮进行新增。需要注意的是，分组名称在系统中具有唯一性。</p>
<p><img alt="image-20190220232926053" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img021.png" /></p>
<p>编辑分组：点击分组名右侧的 【编辑笔】 按钮对名称进行调整。</p>
<p><img alt="image-20190220233120631" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img022.png" /></p>
<p><img alt="image-20190220233430536" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img023.png" /></p>
<p>删除分组：选中目标分组，点击右侧 【删除】 按钮。需要注意的是，只有当分组下没有模型的时候，才可以删除此分组。</p>
<p><img alt="image-20190220233542355" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img042.png" /></p>
<p>b. 系统内置分组：</p>
<p>目前包含 "主机管理"、"业务拓扑"、"组织构架"、"网络"、"中间件"，内置分组不可以编辑，但可以在其下建立模型。</p>
<h3 id="3">3. 模型创建</h3>
<p>配置平台内置一些通用的模型，当现有的模型不能够满足需要的时候，可以通过新建的方式增加模型。</p>
<p>点击左上角的 【新建模型】 按钮，打开新增模型的对话框，然后选择所属分组，选择模型图标（后续可自定义图标），填写模型唯一标识以及名称，最后点击保存新建完成。</p>
<p><img alt="image-20190220234041749" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img024.png" /></p>
<p><img alt="image-20190220234231966" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img025.png" /></p>
<h3 id="4">4. 模型编辑</h3>
<p>模型创建完之后，可以修改模型的名称、图标。但唯一标识不能修改。</p>
<p><img alt="image-20190221000327336" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img028.png" /></p>
<h3 id="5">5. 模型字段唯一校验</h3>
<p>CMDB 设计了唯一性校验以避免出现重复的脏数据，即有以下逻辑：</p>
<ol>
<li>创建实例时，如果发现唯一校验规则出现重复，会认为是错误请求而阻止创建。</li>
<li>编辑实例时，通过唯一规则找到确定的一个实例，如果发现匹配多个实例或者实例并不存在，系统会判定为一次错误编辑请求。</li>
</ol>
<p>管理员在创建一个全新的自定义模型时，会自动内置 <code>bk_inst_name</code> 字段，并默认设定作为唯一校验字段。</p>
<p>管理员可以根据实际的数据实例管理需要，设定多种规则如下：</p>
<ol>
<li>多组规则独立判定。例如：对于服务器，同时设定数据实例必须满足 "固资编号" 和 "设备 SN" 同时满足全局唯一。</li>
<li>单组规则包含多个字段，实现联合唯一判定。例如：对于机架，必须满足 "机房名 + 机架名 唯一"， "机房名：东莞机房，机架名：机架 1" 与 "机房名：东莞机房，机架名：机架 2" 认为合法。</li>
</ol>
<p>通过以下步骤可以实现唯一校验规则的修改或新建：</p>
<ol>
<li>通过导航点击 "模型 - 选中需要修改的模型"，进入模型列表页面，找到需要修改的模型，点击进入对应的管理界面。</li>
<li>切换到 "唯一校验" 功能面板，即可对需要调整的分组进行编辑，或者新增行的校验分组。</li>
</ol>
<p><img alt="image-20190221212608215" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img061.png" /></p>
<p>需要注意的是，校验分组有 "是否为必须校验" 的设定，一个模型只能够设定一组校验规则为 "必须校验"，其他分组为非必须。非必须分组当用户没有填写字段值时，不会触发校验。此外系统内置的关键模型为了保证系统的正常运作，不允许修改 "必须校验" 分组。</p>
<h3 id="6">6. 模型字段分组</h3>
<p>实际应用中，对于模型的属性字段，我们需要对其进行归类排序，这时候可以使用字段分组功能。在模型编辑页面通过切换到 "字段分组" Tab 标签，可以进入此功能。</p>
<p><img alt="image-20190221001001529" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img029.png" /></p>
<p><strong>字段排序</strong>：鼠标悬停在目标字段上方，通过拖拽字段可以调整字段顺序以及字段的所属分组。</p>
<p><img alt="image-20190221001111016" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img030.png" /></p>
<p><strong>分组编辑</strong>：字段分组可以灵活的调整页面的上下排序位置，也可以新建和删除分组。</p>
<p><img alt="image-20190221001527032" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img031.png" /></p>
<p><img alt="image-20190221001815208" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img032.png" /></p>
<p>注意：用户在模型上新增的字段，会被自动放入到 "默认分组" 中。</p>
<h3 id="7">7. 模型删除</h3>
<p>目前仅支持模型的 <code>停用</code> 和 <code>删除</code> 两种操作。</p>
<ul>
<li><strong>停用</strong> 隐藏此模型和实例配置界面，但是实例数据仍然会保留。当用户只是暂时不需要暴露此类型的实例（或者禁止任何用户修改）可以使用此功能。</li>
</ul>
<p><img alt="image-20190221002129352" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img033.png" /></p>
<ul>
<li><strong>删除</strong> 模型删除前需要确认实例均已经删除，否则模型删除失败。删除模型是不可逆操作，用户需谨慎决定。</li>
</ul>
<p><img alt="image-20190221002212184" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img034.png" /></p>
<h3 id="8">8. 模型从停用恢复</h3>
<p>当模型分组中存在被禁用的模型时，该模型图标右上角会显示红色的 "已停用"。点开模型编辑页面点击 "启用" 即可重新启用该模型。</p>
<p><img alt="image-20190221002506625" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img035.png" /></p>
<p><img alt="image-20190221002716297" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img036.png" /></p>
<h3 id="9">9. 模型字段导出和导入</h3>
<p>当用户需要创建类似的模型，或者对模型进行备份的时候，可以通过先将模型字段进行 "导出" 备份。然后新建一个模型，通过 "导入" 功能实现模型的复制。</p>
<p>需要注意的是，导出的 Excel 中可能会包含部分代码片段，没有专业指导的情况下请勿编辑这些代码，以免导入以后系统出现不可预知的异常。</p>
<p><img alt="image-20190221003325345" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img037.png" /></p>
<p><img alt="image-20190221003232856" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img090.png" /></p>
<h2 id="_3">实例管理</h2>
<p>实例指的是根据模型的定义创建出来的配置项，同一个模型的数据项，结构一致，属性值有差异。</p>
<p>当模型创建以后，用户可以在配置平台首页中，看到此模型名称，点击进入到实例管理页面。</p>
<p><img alt="image-20190221152700577" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img053.png" /></p>
<h3 id="1_1">1. 新增实例</h3>
<p>进入到实例的管理界面中，通过点击上方的【立刻创建】 按钮新增实例。</p>
<p><img alt="image-20190221152614306" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img054.png" /></p>
<h3 id="2_1">2. 实例编辑和删除</h3>
<p>实例仅支持 <code>编辑</code>、<code>删除</code> 有两种方式。</p>
<p><strong>单个实例</strong></p>
<p>通过点击列表中的单个实例，可以展开实例的查看页面。通过下方 【编辑】 按钮，可以进入到实例的编辑状态。点击删除则是删除实例，需要注意的是，实例删除以后不可撤销，但是可以通过实例 "删除历史查看" 功能查看到已经删除的实例信息</p>
<p><img alt="image-20190221162129998" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img056.png" /></p>
<p><strong>多个实例</strong></p>
<p>列表中每个实例前都有一个勾选框，用户可以先勾选需要批量操作的实例。当勾选数量大于 1 个以后，上方的 【编辑】、【删除】 变成可用，用户可以通过这两个按钮对已选中实例进行批量修改和删除。</p>
<p><img alt="image-20190221162253859" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img057.png" /></p>
<h3 id="3_1">3. 实例关联关系查看</h3>
<p>关联关系和属性采用分离管理的方式，通过点击实例详情以后通过切换到 "关联" Tab，可以查看当前实例的关联。</p>
<p><img alt="image-20190221165828113" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img058.png" /></p>
<h3 id="4_1">4. 实例关联关系编辑</h3>
<p>实例的关联关系构建依赖模型之间已存在关联关系。</p>
<p><strong>添加关联</strong>（以主机管理路由器为例）：</p>
<p><img alt="image-20190223110210379" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img083.png" /></p>
<p><strong>删除关联</strong>:</p>
<p>同添加关联操作一致，打开关联管理面板，找到当前关联实例，点击 "取消关联" 完成关联的删除。</p>
<p><img alt="image-20190223110056586" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img084.png" /></p>
<h3 id="5_1">5. 实例操作历史查看</h3>
<p>对于 CMDB 里面管理的每个实例 (包含主机或者用户自定义实例)，均能够在实例详情中，看到其操作记录列表，默认按照时间倒叙排列。</p>
<p>用户可以通过时间范围和操作账号进行操作列表的筛选查看。</p>
<p><img alt="image-20190223110404597" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img085.png" /></p>
<p>点击变更内容可以查看操作的详情。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img086.png" /></p>
<h2 id="_4">模型拓扑</h2>
<p>模型拓扑是支持用户可视化查看当前模型关系的拓扑视图，并进行简单管理的功能。通过导航 "模型 - 模型拓扑" 进入功能界面。</p>
<p><img alt="image-20190221213934750" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img062.png" /></p>
<h3 id="1_2">1. 创建模型之间关联</h3>
<ol>
<li>点击 "编辑拓扑" 进入可视化关联管理模式。</li>
<li>画布左侧栏列出了当前系统的所有模型分组和模型，模型分组后面数字显示为 0，表示该模型分组下的所有模型都已经在模型拓扑画布里；数字为 m，表示该模型分组下还有 m 个模型没有在模型拓扑画布里，点开可以查看具体模型。</li>
</ol>
<p><img alt="image-20190221220716530" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img063.png" /></p>
<ol>
<li>将模型拖入画布中，鼠标移动到模型上方，在浮出的按钮中，点击 【创建关联】 按钮，此时从当前模型到鼠标之间会出现一条虚线，鼠标选中其他任意模型，单机即可完成连线。</li>
</ol>
<p><img alt="image-20190221221512091" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img064.png" /></p>
<ol>
<li>在关联连线完成后弹出的对话框中，填写 "关联描述"，根据需要修改其他参数即可创建关联（关联类型的创建可查看 <a href="4. 产品功能 / Introduction.md#AssociationType">新增关联类型</a>）。</li>
</ol>
<p><img alt="image-20190221221931307" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img065.png" /></p>
<p><img alt="image-20190221222137374" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img066.png" /></p>
<h3 id="2_2">2. 删除模型之间关联</h3>
<ol>
<li>点击 编 "辑拓扑" 进入可视化关联管理模式。</li>
<li>直接点击模型之间连线，打开关联详情。</li>
<li>点击 "删除关联" 完成删除关联。</li>
</ol>
<p><img alt="image-20190221222510747" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img067.png" /></p>
<p><strong>注：</strong> 如果两个模型之间有多种关联，鼠标指向模型关系的连线，在浮出的菜单中，选择需要编辑的关联进入到对应的详情页。</p>
<p><img alt="image-20190221222723350" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img068.png" /></p>
<p>如点开数字 2 后删除 "默认关联" 这条，如下：</p>
<p><img alt="image-20190221222817498" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img069.png" /></p>
<h3 id="3_2">3. 模型从拓扑视图移除</h3>
<ol>
<li>点击 "编辑拓扑" 进入可视化关联管理模式。</li>
<li>鼠标移动到模型上方，在浮出的按钮中，点击 【删除模型】 按钮。</li>
<li>删除模型必须先清除模型的关联关系。</li>
<li>模型已经实例化不能删除。</li>
<li>删除模型只是把模型从画布里移回左边的模型分组栏，不会真正的从系统删除该模型。</li>
</ol>
<p><img alt="image-20190221223215138" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img070.png" /></p>
<p><img alt="image-20190221223259430" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img071.png" /></p>
<p><img alt="image-20190221223423058" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img072.png" /></p>
<h2 id="_5">业务模型</h2>
<p>蓝鲸配置平台中，默认的主线业务拓扑只有 <code>业务 - 集群 - 模块 - 主机</code> 四层，而在不同企业的实际场景里，往往是不能满足对一个业务或系统的拓扑规划，所以支持了在业务跟集群之间的自定义拓扑层级，目前系统设定最多可以新增 3 个拓扑层级，也就是主线拓扑最多可以达到 7 个层级。</p>
<h3 id="1_3">1. 默认业务拓扑层级</h3>
<p><img alt="image-20190221115156214" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img048.png" /></p>
<h3 id="2_3">2. 新增自定义层级</h3>
<p>点击主线拓扑上 "业务" 下方的加号，弹出新建层级窗口，填写层级信息。</p>
<p><img alt="image-20190223104904270" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img080.png" /></p>
<p><img alt="image-20190221115451714" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img050.png" /></p>
<p><img alt="image-20190221121454206" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img051.png" /></p>
<p>在业务拓扑页面也可以看到新增的拓扑层级，可以从此层级开始新建集群 - 模块。</p>
<p><img alt="image-20190221121713120" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img081.png" /></p>
<p><img alt="image-20190223105305472" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img082.png" /></p>
<h2 id="_6">关联类型</h2>
<p>模型关联是指两个模型之间的关联定义。只有定义了模型关联，才能够创建对应的数据实例之间的关系。</p>
<p>模型关联定义的关键概念解释如下：</p>
<ol>
<li>模型关联是独立的。即用户定义模型 A 和模型 B 之间的关联关系，此关系并不属于模型 A 或者模型 B 。</li>
<li>关联类型。关联类型能够帮助用户识别同类关联，例如主机和交换机、主机和路由器均有关联，我们可以设定这两个关联都属于 "上联" 类型，在具体的主机实例中，可以通过查询具体主机的 "上联" 获取此主机所有上联的网络设备。</li>
<li>"源 - 目标约束"。在真实环境中，关系是存在约束定义的，例如一个硬盘只能够属于一个主机，一个主机可以有多个硬盘。为了避免用户录入数据出现错误，我们可以设定，主机到硬盘的关系中 "源 - 目标约束" 为 1-N。</li>
<li>关联描述。对关联关系的补充描述，当关联关系类型不能够准确表达关联配置的时候，可以补充此描述。</li>
</ol>
<p>模型之间的关系管理为了方便管理提供了两个入口，本小节主要介绍通过 "模型管理 - 模型" 功能进行关联管理。另外一种管理方式可以参考 <a href="4. 产品功能 / Introduction.md#ModelTopology">模型拓扑</a> 小节描述。</p>
<h3 id="1_4">1. 关联类型首页</h3>
<p><img alt="image-20190221223909470" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img073.png" /></p>
<h3 id="2_4">2. 新增关联类型</h3>
<p><img alt="image-20190221224111655" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img074.png" /></p>
<h3 id="3_3">3. 创建模型关联</h3>
<p>这里假定我们需要创建模型 A 和模型 B 之间的关联。</p>
<ol>
<li>点击模型 A 或者模型 B 进入模型管理详情页面，上文提到关联是独立的，所以只需要操作 A 或 B 其中一种即可。</li>
<li>切换到 "模型关联" 功能页，点击 【新建关联】 按钮。</li>
<li>在弹出对话框中，配置源和目标模型，修改关联类型和约束保存即可。</li>
</ol>
<p><img alt="image-20190221224338210" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img075.png" /></p>
<p><img alt="image-20190221224750014" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img076.png" /></p>
<h3 id="4_2">4. 编辑模型关联</h3>
<p>模型之间的关联创建以后，可以修改关联的描述信息：关联类型、关联描述。其他标识和约束不可以修改。</p>
<p><img alt="image-20190221225348910" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img077.png" /></p>
<h2 id="_7">事件推送</h2>
<p><strong>信息变更实时推送</strong> 。实时推送功能解决了系统之间信息同步的频繁轮询和不实时问题。确定了订阅方式以后，当配置平台中相应模型发生变更时，订阅系统能够实时收到通知。</p>
<p>事件推送功能能够实现当配置信息发生变化的时候，实时通知到关联的系统中，目前支持 HTTP 的推送方式。</p>
<p>此功能属于高级功能，使用此功能前需要先为目标系统开发可接收 HTTP 请求的接口，接口接收的内容可参考如下 json：</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;event_id&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="nt">&quot;event_type&quot;</span><span class="p">:</span> <span class="s2">&quot;instdata&quot;</span><span class="p">,</span>
<span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
<span class="nt">&quot;action_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-01-01 18:00 +08:00&quot;</span><span class="p">,</span>
<span class="nt">&quot;obj_type&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
<span class="nt">&quot;cur_data&quot;</span><span class="p">:</span> <span class="p">{},</span>
<span class="nt">&quot;pre_data&quot;</span><span class="p">:</span> <span class="p">{},</span>
<span class="nt">&quot;dstb_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="nt">&quot;dstb_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-01-01 18:00 +08:00&quot;</span><span class="p">,</span>
<span class="nt">&quot;subscription_id&quot;</span><span class="p">:</span> <span class="mi">16</span>
<span class="p">}</span>
</pre></div>


<h3 id="1_5">1. 创建事件推送</h3>
<p>目标系统接口完成开发以后，接下来需要在新增一个推送。</p>
<p>通过侧边导航打开 "模型管理 - 事件推送" ，点击 【新建】 按钮。</p>
<p><img alt="image-20190221102308088" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img040.png" /></p>
<p>在新增推送的对话框中，主要关注完善三部分内容：
1. 推送名称：用于区分不同推送，同业务下需要保持唯一。
2. URL：目标系统接收推送请求的 URL，要求蓝鲸配置平台部署环境访问此 URL 链路畅通。
3. 事件订阅：根据目标系统的需要，可选择性勾选事件的内容。
当填写完成 URL 后，可以使用 "测试推送" 功能中查看到详细的推送信息和进行推送测试（调试配置平台是否能够访问到目标系统的 API）。</p>
<p><img alt="image-20190221102448741" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img041.png" /></p>
<h3 id="2_5">2. 事件推送状态查询</h3>
<p>创建好一个事件推送以后，可以在推送的列表中直观看到当前推送接收数量和失败情况。</p>
<p><img alt="image-20190221144150089" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img052.png" /></p><h1 id="_1">我的收藏</h1>
<p>查看在首页收藏常用的资源。</p>
<p><img alt="image-20190223111321547" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/collection.png" /></p><h1 id="_1">如何创建业务并导入主机到业务中</h1>
<p>具体步骤：</p>
<p><strong>创建业务 -- 创建业务拓扑 -- 导入主机到资源池 -- 查看未分配到业务的主机 -- 分配主机到业务空闲机池 -- 分配主机到业务模块</strong></p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/guide1.png" /></p>
<h3 id="1">(1) 创建业务</h3>
<p>业务是蓝鲸持续部署环节比较重要的概念，主要用于资源和配置隔离，在配置平台创建的业务，默认同时应用于作业平台、标准运维、蓝鲸监控、故障自愈等场景。</p>
<p>通过导航栏点击 "基础资源 - 业务"，进入业务管理功能页，然后点击 【新建】 按钮。</p>
<p><img alt="" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/新建业务.png" /></p>
<p><strong>注意：</strong> 初始状态下，业务只有配置平台管理员能够新增和管理业务。管理员可以根据实际企业需要，通过权限分组的方式，给指定用户组分配业务管理权限。具体操作详情见 <a href="5.1/配置平台/产品功能/PermissionsControl.md">权限控制</a> 小节。</p>
<ul>
<li>
<p>业务是蓝鲸体系内较为关键的资源，所以业务不提供删除功能，当业务不再需要的业务可以使用 <strong>业务归档</strong> 功能把业务从列表中移除。</p>
</li>
<li>
<p>当业务归档的时候，用户需要确认其他 SaaS 已经没有使用此业务，包含并不限于业务下的定时任务、监控配置已经停止，否则会产生过多异常。</p>
</li>
</ul>
<p><img alt="业务归档" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务归档.png" /></p>
<p>业务被归档以后，所有 SaaS 均无法看到此业务。</p>
<ul>
<li>归档的业务需要还原时，可以使用 <strong>业务归档的还原</strong> 功能恢复到正常使用状态：</li>
</ul>
<p>业务归档还原以后，可以在业务的归档列表中，看到已经归档的业务。</p>
<p><img alt="业务归档历史信息" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务归档历史信息.png" /></p>
<p>点击 【恢复业务】 可把业务恢复到正常使用状态，为了方便用户辨识，从归档恢复的业务会默认在业务名称后方加上（recovery）标识，用户根据需要修改业务名称即可。</p>
<p><img alt="恢复业务" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/恢复业务.png" /></p>
<p><img alt="恢复业务recover" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/恢复业务recover.png" /></p>
<h3 id="2">(2)创建业务拓扑</h3>
<p>创建业务以后，在 "业务资源 - 业务拓扑" 中，可以看到下拉菜单中增加了刚刚新增的业务。业务创建完成会自动创建 "空闲机"，"故障机" 两个模块。</p>
<p><img alt="业务拓扑1" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务拓扑1.png" /></p>
<p>此时我们可以对业务定义业务拓扑。点击拓扑树上的业务，后方出现的 【新建】按钮可以创建业务的直接下级即 "集群" 和其直接下级 "模块"。</p>
<p><img alt="业务拓扑上下级" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/业务拓扑上下级.png" /></p>
<h3 id="3">(3)导入主机到资源池</h3>
<p>为了标准化管理和提高主机资源利用率，设计了资源池模式，所有主机需要统一先录入到主机资源池中，然后再分配到业务中。</p>
<p>导航进入 "基础资源 -- 主机" 页面，点击【导入主机】按钮进行导入主机。</p>
<p><img alt="excel导入主机" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/excel导入主机.png" /></p>
<p>目前在配置平台导入主机分以下两种，一种是 <code>Excel 批量导入</code>，一种是通过 <code>节点管理</code> 进行自动导入。</p>
<p>首先点击 "基础资源 -- 主机" 页面的 【导入主机】 按钮打开导入对话框。</p>
<p><img alt="cmdb-img012" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img012.png" /></p>
<p><strong>方法 1：通过 Excel 批量导入</strong></p>
<p>当主机在直连区域（蓝鲸中控环境可以直接访问区域）时，可以使用此方法。点击 【下载模版】 按钮，下载到符合格式好的 Excel 文档。</p>
<p><img alt="cmdb-img088" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img088.png" /></p>
<p>打开 Excel 文档以后，可以到内网 IP 是必填属性，其他属性如果不需要导入，可以把相关列删除。Excel 中第二个 Sheet 中有详细的填写说明，建议首次使用用户先查看此说明。</p>
<p><img alt="cmdb-img013" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img013.png" /></p>
<p><strong>注意：</strong> 录入同样内网 IP，是属性覆盖的操作，可以使用此特性对主机属性进行批量更新。</p>
<p><strong>方法 2：节点管理进行自动导入</strong></p>
<p>切换到自动导入的 Tab 页，通过点击跳转到链接可以打开 <code>Agent安装</code> 应用，根据节点管理对 Agent 的安装流程，相关主机会自动录入到配置平台对应业务下的的资源池中。</p>
<p><img alt="cmdb-img038" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img038.png" /></p>
<h3 id="4">(4) 查看未分配到业务的主机</h3>
<p>通过侧边导航 "基础资源 -- 主机" ，默认功能页面中即显示了当前企业中尚未分配到业务的主机。</p>
<p><img alt="未分配主机" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/未分配主机.png" /></p>
<ul>
<li>查看企业内所有主机：</li>
</ul>
<p>在主机资源池管理页面，同构勾选查询范围下的已分配主机，进行查询，可以查询到当前企业中所有的主机资源</p>
<p><img alt="已分配主机" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/已分配主机.png" /></p>
<h3 id="5">(5) 分配主机到业务空闲机池</h3>
<p>选中目标主机后，选择上方分配到指定业务，默认是放到业务的空闲机池。</p>
<p><img alt="主机转移到业务" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/主机转移到业务.png" /></p>
<h3 id="6">(6) 分配主机到业务模块</h3>
<p>导航进入 "业务资源 -- 业务拓扑" 页面</p>
<p>可以看到主机已经被分配到业务的 "空闲机" 模块中，勾选需要转移的主机，点击上方的 【转移】 按钮，在对话框中选择目标模块，点击 【保存】 完成转移。</p>
<p><img alt="主机分配到模" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/主机分配到模块.png" /></p>
<blockquote>
<p>Note :
需要注意，考虑到实际业务的应用场景，主机转移有以下特性：
1. 一个主机可以属于多个模块。
2. 主机归属于空闲机、故障机时，不可同时属于其他业务模块（当选中空闲机、故障机时系统会提示是否去除其他选中模块）。
3. 主机需要归还企业的资源池时，必须先转移到空闲机模块。</p>
</blockquote><h1 id="a-b">主机由 A 业务模块转移到 B 业务模块</h1>
<p>具体步骤：</p>
<p><strong>主机分配到 A 业务空闲机池 -- 主机上交资源池 -- 主机分配到 B 业务空闲机池 -- 主机分配到 B 业务</strong></p>
<p><img alt="guide2" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/guide2.png" /></p>
<blockquote>
<p>Note：
主机的业务属性变更信息不会与节点管理同步，所以在主机转移之前请在节点管理卸载主机的 Agent ,主机转移之后再在节点管理重装 Agent 。</p>
</blockquote>
<h2 id="1-a1-a">(1) a1 模块下的主机分配到 A 业务空闲机池</h2>
<p>导航栏进入 "业务资源 -- 业务拓扑" 页面。</p>
<p>查看 A 业务 a1 模块下的主机，勾选需要转移的主机，点击上方的 【转移】 按钮，在对话框中选择目标模块 "空闲机"，点击 【保存】 完成转移。</p>
<p><img alt="61" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/61.png" /></p>
<p><img alt="60" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/60.png" /></p>
<ul>
<li>
<p>增量更新，保留主机已有模块：
  同一业务下的多个模块可以共享主机，如：主机既在 a1 模块下，又在 a2 模块下。</p>
</li>
<li>
<p>完全替换，不保留现有主机模块：
  主机只在转移后的模块下，之前的模块属性不被保留。</p>
</li>
</ul>
<h2 id="2">(2) 主机上交资源池</h2>
<p>导航进入 "业务资源 -- 业务拓扑" 页面</p>
<p>查看业务的 "空闲机" 模块，勾选刚刚转移过来的主机，点击上方的 【转移】 按钮，在对话框中选择 "资源池"，点击 【保存】 完成转移。</p>
<p><img alt="62" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/62.png" /></p>
<p><img alt="63" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/63.png" /></p>
<h2 id="3-b">(3) 主机分配到 B 业务空闲机池</h2>
<p>详情参照 <a href="5.1/配置平台/快速入门/case1.md">如何创建业务并导入主机到业务中，（5）分配主机到业务空闲机池</a></p>
<p><img alt="65" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/65.png" />
<img alt="66" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/66.png" /></p>
<h2 id="4-b">(4) 主机分配到 B 业务的模块</h2>
<p>详情参照 <a href="5.1/配置平台/快速入门/case1.md">如何创建业务并导入主机到业务中，（6）分配主机到业务空模块</a></p>
<p><img alt="67" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/67.png" /></p><h1 id="_1">快速入门模型和模型拓扑管理</h1>
<p>随着企业的发展，CMDB 会逐步承担更多的基础配置责任，蓝鲸配置平台通过构建了底层的 "模型"，提供了动态拓展的能力，帮助企业在线实现 CMDB 的能力升级。以下通过以一个机房例子介绍如何操作：</p>
<p>具体步骤：</p>
<p><strong>创建机房模型 -- 完善机房属性 -- 完善关联关系 -- 创建实例</strong></p>
<h3 id="1">(1) 创建机房模型</h3>
<p>配置平台内置一些通用的模型，当现有的模型不能够满足需要的时候，可以通过新建的方式增加模型。</p>
<p>点击左上角的 【新建模型】 按钮，打开新建模型的对话框，然后选择所属分组，选择模型图标（后续可自定义图标），填写模型唯一标识以及名称，最后点击保存新建完成</p>
<p><img alt="新建模型3" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/新建模型3.png" />
<img alt="新建模型4" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/新建模型4.png" /></p>
<p>创建模型需要填写 "英文名称" 和 "中文名称"：</p>
<p><strong>英文名称</strong>：是模型在系统中的唯一标识，需要保证不可重复。</p>
<p><strong>中文名称</strong>：是用户直接看到的描述名称。</p>
<p>点击确认后新的模型创建成功。新的模型会自带一个默认的必填唯一字段 "实例名"，用户可根据模型的实际定位修改此字段的中文名称，但是英文名称因为作为系统底层唯一标识不可调整。</p>
<p>在实际上，我们需要管理的不仅仅只有一个字段，通过点击“新建字段”增加更多字段（可以批量导入字段，详见 <a href="5.1/配置平台/产品功能/ModelManagement.md">模型字段导出和导入</a>小节）。</p>
<p><img alt="cmdb-img026" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img026.png" /></p>
<p>目前支持 "短字符"（长度 256 个英文）、"长字符"（长度 2000 个英文）、"数字"、"枚举"、"日期"、"时间"、"时区"、"用户"、"布尔"等类型。</p>
<p>根据所选择的字段类型，分别支持用户定义验证方式："是否必填"、"正则验证"、"大于小于范围" 等。</p>
<p><img alt="cmdb-img027" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img027.png" /></p>
<h3 id="2">(2) 完善机房属性</h3>
<p>点击进入到机房详情配置。
<img alt="进入模型" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/进入模型.png" /></p>
<p>可以看到默认已经创建了实例名，这个名称默认为机房的唯一标识以及显示名称，我们可以通过点击新建字段，完善更多信息，如下所示，创建了所在地和机房编号两个字段：</p>
<p><img alt="机房字段" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房字段.png" /></p>
<h3 id="3">(3) 完善关联关系</h3>
<p>为了让机房能够和主机有关联能力，我们接下来配置主机到机房的关联关系。</p>
<p>切换到模型关联 Tab 页，点击新建</p>
<p><img alt="机房模型关联" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房模型关联.png" /></p>
<p>关联关系的配置，核心需要分析两个对象之间的关系限制，由于一个主机只有可能属于一个物理机房，因此我们配置机房作为原，主机作为目标，约束设定为 1-N：</p>
<h3 id="4">(4) 创建实例</h3>
<p>完成以上操作后，我们已经为配置平台拓展了机房的管理能力，接下来创建实际的机房记录</p>
<p>回到首页可以发现已经多了机房的管理功能，点击进入</p>
<p><img alt="机房实例" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房实例.png" /></p>
<p>点击新建，填写必要属性完成创建</p>
<p><img alt="新建机房实例属性" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/新建机房实例属性.png" /></p>
<blockquote>
<p>Note: 如果需要批量添加，可以点击【导入】按钮进入到导入功能对话框，如果是初次导入，可以先下载实例导入模板进行编辑。</p>
</blockquote>
<p><img alt="机房实例导入" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房实例导入.png" /></p>
<p>关联的管理可以打开刚刚创建的机房详情，切换到关联选项卡，可以看到当前机房还没有和任何其他实例关联。</p>
<p><img alt="机房关系关联" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房关系关联.png" /></p>
<p>创建关联,点击关联管理，此时会显示当前可以关联的主机，选中关联即可。</p>
<p><img alt="机房关联管理" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房关联管理.png" /></p>
<p>完成以后关闭此视图，可以看到关联关系拓扑。</p>
<p><img alt="机房关联拓扑图" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/机房关联拓扑图.png" /></p>
<p>目前关联关系支持两种展现形式：</p>
<ol>
<li>星形拓扑形式</li>
</ol>
<p><img alt="cmdb-img060" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img060.png" />
2. 树形拓扑形式</p>
<p><img alt="cmdb-img059" src="F:\bkdoc\md_to_pdf/5.1/配置平台/assets/cmdb-img059.png" /></p><h1 id="cmdb">业务上线时 CMDB 如何管理主机</h1>
<h2 id="_1">情景</h2>
<p>新业务（常见的三层架构：接入层、逻辑层、存储层）上线，需要用 CMDB 管理业务上线依赖的主机资源，便于后续实现发布、变更、故障处理等场景的自动化流程。</p>
<h2 id="_2">前提条件</h2>
<p>在配置平台中 <a href="5.1/配置平台/快速入门/case1.md">新建完业务</a>，并导入主机及将主机分配到业务中。</p>
<h2 id="_3">操作步骤</h2>
<ul>
<li>梳理业务架构</li>
<li>新建集群</li>
<li>新建模块</li>
<li>使用场景：在作业平台中查询接入层的磁盘使用率</li>
</ul>
<h3 id="1">1. 梳理业务架构</h3>
<p>业务的架构设计最终要体现在 CMDB 的业务拓扑树上，所以我们先梳理业务的架构。</p>
<p>以业务“欢乐游戏( demo )"为例，其架构是常见的三层架构：<code>接入层</code> -&gt; <code>逻辑层</code> -&gt; <code>存储层</code></p>
<p>为了满足全国各地用户就近接入，按照地域划分了不同的区，但架构一致。</p>
<p><img alt="-w758" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625775986620.jpg" /></p>
<h3 id="2">2. 新建集群</h3>
<p>按照上述业务架构，可将做如下对应：</p>
<ul>
<li>业务中的区 &lt;-&gt; CMDB 中的集群</li>
<li>业务中的分层架构 &lt;-&gt; CMDB 中模块</li>
</ul>
<p>在<code>业务资源</code> -&gt; <code>业务拓扑</code>中，选中根节点<code>业务</code>，新建节点<code>集群</code>一区。</p>
<p><img alt="-w1396" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625781118900.jpg" /></p>
<blockquote>
<p>环境类型：一般保持<code>正式</code>；测试环境设置为<code>测试</code>，让测试环境的发布流程模板只能选择<code>测试</code>集群；</p>
<p>服务状态：一般保持<code>开放</code>，在某些场景如开区准备的时候，状态可置为<code>关闭</code>，让发布系统无法选中；</p>
</blockquote>
<p>新建完集群<code>一区</code>、<code>二区</code>后，可看到如下业务拓扑</p>
<p><img alt="-w1391" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625845771786.jpg" /></p>
<p>接下来，在集群下创建模块。</p>
<h3 id="3">3. 新建模块</h3>
<p>选中<code>集群</code>节点，新建模块</p>
<p><img alt="-w1503" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625851392280.jpg" /></p>
<blockquote>
<p>模块类型：一般为<code>普通</code>，当模块类型为数据库类时，选择<code>数据库</code>
主要维护人、备份维护人：该模块维护人，一般在告警推送时会用到；区别在于电话通知时优先<code>主要维护人</code>，如果<code>主要维护人</code>未接听，自动转<code>备份维护人</code>，此处逻辑需要自行实现；</p>
</blockquote>
<p>模块创建好了，接下来 <a href="5.1/配置平台/产品功能/BuzResource.md">分配主机</a>，将 <code>基础资源</code> -&gt; <code>主机</code> 中的资源按照业务架构分配至对应的模块；</p>
<p><img alt="-w1447" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625859972786.jpg" /></p>
<h3 id="4">4. 使用场景：在作业平台中查询接入层的磁盘使用率</h3>
<p>通过一个简单的场景，体验 <a href="5.1/作业平台/产品介绍/产品介绍.md">作业平台</a> 如何消费主机实例
{% video %}media/cmdb_job_consume.mp4{% endvideo %}</p>
<h2 id="_4">扩展阅读</h2>
<h3 id="1-saas-cmdb">1. 蓝鲸内置 SaaS 的 CMDB 消费场景</h3>
<h4 id="11">1.1 应用发布、变更：资源编排工具 标准运维</h4>
<p>应用发布、变更流程包含版本在多台主机上的文件分发、命令执行等操作，如何优雅的选择这批主机，需要使用 CMDB 的查询主机实例功能。</p>
<p><img alt="CMDB场景-标准运维-01" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/CMDB%E5%9C%BA%E6%99%AF-%E6%A0%87%E5%87%86%E8%BF%90%E7%BB%B4-01.png" /></p>
<p>（在 <a href="5.1/标准运维/README.md">标准运维</a> 中一次应用交付的执行历史）</p>
<p>在参数中使用<code>动态IP</code>变量，<strong>运维无需关心主机扩缩容、故障替换等场景带来的主机变更</strong>，无需担心漏更新主机或更新错主机。
<img alt="标准运维传参-CMDB" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/%E6%A0%87%E5%87%86%E8%BF%90%E7%BB%B4%E4%BC%A0%E5%8F%82-CMDB.png" /></p>
<h4 id="12">1.2 故障处理：监控、故障自愈</h4>
<p>针对业务架构中的某一层级模块（如接入层）设置一个 <a href="5.1/蓝鲸监控/快速入门/服务拨测/uptime_config.md">告警检测策略</a>，无需关心实例的新增、删除及修改。</p>
<p><img alt="蓝鲸监控的CMDB消费场景" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/%E8%93%9D%E9%B2%B8%E7%9B%91%E6%8E%A7%E7%9A%84CMDB%E6%B6%88%E8%B4%B9%E5%9C%BA%E6%99%AF.png" /></p>
<p>如何实现实时感知，背后的逻辑是通过 CMDB 的事件推送功能，实时感知实例的新增、修改、删除等动作。</p>
<p><img alt="事件推送" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/%E4%BA%8B%E4%BB%B6%E6%8E%A8%E9%80%81.png" /></p>
<p>在 <a href="5.1/FTA/Intro/README.md">故障自愈</a> 中的消费场景也是如此，一个或多个模块的某一个告警，关联对应的处理动作。
<img alt="故障自愈的CMDB消费场景" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/%E6%95%85%E9%9A%9C%E8%87%AA%E6%84%88%E7%9A%84CMDB%E6%B6%88%E8%B4%B9%E5%9C%BA%E6%99%AF.png" /></p>
<h4 id="13-dbaaix-sa">1.3 平台团队对资源的管控，例如全业务 DBA、AIX SA</h4>
<p>以 DBA 为例，需要管控所有 DB，可将运行数据库的主机所属模块的类型设置为<code>数据库</code>，然后通过<code>动态分组</code>功能查询模块类型为<code>数据库</code>的主机。</p>
<p><img alt="-w1502" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625888898060.jpg" /></p>
<p>在 <a href="5.1/作业平台/产品介绍/产品介绍.md">蓝鲸作业平台</a> 中可使用该动态分组来选择 DB 主机。</p>
<p><img alt="-w1234" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625757452328.jpg" /></p>
<h3 id="2_1">2. 三级拓扑不够用，怎么办？新建多级拓扑节点</h3>
<p>如果业务架构在大区（<code>集群</code>）之上还有一级（平台：如<code>Android_Weixin</code>、<code>Android_QQ</code>等）</p>
<p><img alt="-w814" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625862638485.jpg" /></p>
<p>可在<code>业务模型</code>中，<code>业务</code>与<code>集群</code>间新建一级或多级拓扑</p>
<p><img alt="-w1163" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625750066642.jpg" /></p>
<p>新的业务拓扑如下：</p>
<p><img alt="-w1521" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625764667893.jpg" /></p>
<blockquote>
<p>注：当前版本新增层级拓扑的生效范围是所有业务，在未来的某一个版本中可调整生效范围；
蓝鲸体系在未来的某一个迭代中，将重点弱化业务和细化权限</p>
</blockquote>
<h3 id="3-master-db-slave-db">3. Master DB 和 Slave DB 如何实现物理架构的高可用？</h3>
<p>两者一定不要放在同一个机架或交换机下，否则机架或交换机掉电，亦或是交换机故障，Master DB 和 Slave DB 都宕机，无法正常切换，导致业务无法对外提供服务。</p>
<p>操作方法：[模型管理] -&gt; [模型] -&gt; [主机] -&gt; [模型字段]，新增<code>存放机架 ID</code>、<code>网络设备 ID</code>。</p>
<p>此外，配置主机与机架或上联交换机的关联可使用<code>模型关联</code>，确保数据的唯一性可设置<code>唯一校验</code>，另外<code>字段分组</code>可调整 CI 属性的呈现方式。</p>
<p><img alt="-w1569" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15637891727474.jpg" /></p><h1 id="cmdb">CMDB 如何管理进程</h1>
<h2 id="_1">情景</h2>
<p>应用的存储是 MariaDB，在 CMDB 中注册 MariaDB，以便在监控系统做进程监控。</p>
<h2 id="_2">前提条件</h2>
<p>在配置平台中<a href="5.1/配置平台/快速入门/case1.md">新建业务</a> 及业务拓扑。</p>
<h2 id="_3">步骤</h2>
<ul>
<li>CMDB 中注册进程和端口</li>
<li>将进程绑定模块</li>
<li>监控系统自动实现进程端口监控</li>
</ul>
<h3 id="1-cmdb">1. CMDB 中注册进程</h3>
<p>在菜单<code>业务资源</code>-<code>进程管理</code>中<code>新建进程</code></p>
<p><img alt="-w1300" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625715311134.jpg" /></p>
<h4 id="11">1.1 注册进程</h4>
<ul>
<li>进程名称：对外显示的服务名：<code>MariaDB</code>；</li>
<li>功能名称：程序的二进制名称：<code>mysqld</code>；</li>
</ul>
<p>在配置功能名称时，使用命令查询该程序的二进制名称</p>
<div class="codehilite"><pre><span></span>$ ps -ef <span class="p">|</span> grep -i mysqld
mysql     <span class="m">7800</span>     <span class="m">1</span>  <span class="m">0</span> 7月08 ?       <span class="m">00</span>:00:00 /bin/sh /usr/bin/mysqld_safe --basedir<span class="o">=</span>/usr
mysql     <span class="m">7980</span>  <span class="m">7800</span>  <span class="m">0</span> 7月08 ?       <span class="m">00</span>:01:55 /usr/libexec/mysqld --basedir<span class="o">=</span>/usr --datadir<span class="o">=</span>/var/lib/mysql --plugin-dir<span class="o">=</span>/usr/lib64/mysql/plugin --log-error<span class="o">=</span>/var/log/mariadb/mariadb.log --pid-file<span class="o">=</span>/var/run/mariadb/mariadb.pid --socket<span class="o">=</span>/var/lib/mysql/mysql.sock
</pre></div>


<blockquote>
<p>注：监控系统一般<code>完全匹配</code>二进制名称。
   获取二进制名称的方法：<code>basename $(readlink -f /proc/7980/exe)</code></p>
</blockquote>
<h4 id="12">1.2 注册端口</h4>
<p>查询 mysqld 监听的 IP 和端口</p>
<div class="codehilite"><pre><span></span>$ netstat -antp <span class="p">|</span> grep mysqld
tcp        <span class="m">0</span>      <span class="m">0</span> <span class="m">10</span>.0.4.29:3306          <span class="m">0</span>.0.0.0:*               LISTEN      <span class="m">7980</span>/mysqld
</pre></div>


<ul>
<li>绑定 IP：MariaDB 为存储层，一般绑定内网 IP，故选择<code>第一内网 IP</code>。</li>
<li>端口：进程监听的端口，<code>3306</code></li>
<li>协议：<code>TCP</code></li>
</ul>
<h3 id="2">2. 将进程绑定模块</h3>
<p><a href="5.1/bk_solutions/CD/CMDB/CMDB_management_hosts.md">如何管理主机</a> 提到依据业务架构来划分业务拓扑，业务拓扑中模块代表服务，而服务将由一个或多个进程监听的端口来对用户或其他模块提供服务。</p>
<p>所以，需要将<code>进程</code>绑定至对应的<code>模块</code>上。</p>
<p>这里将<code>MariaDB</code>进程绑定至存储层模块上。</p>
<p><img alt="-w1273" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625579982411.jpg" /></p>
<h3 id="3">3. 监控系统自动实现进程端口监控</h3>
<p>给模块 <a href="5.1/配置平台/快速入门/case1.md">分配主机</a></p>
<p><img alt="-w1541" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15625580245427.jpg" /></p>
<p>等候一分钟，在蓝鲸自带的监控系统 <a href="5.1/蓝鲸监控/产品简介/README.md">蓝鲸监控</a> 中可以看到 <a href="5.1/蓝鲸监控/产品功能/Process_monitor_desc.md">进程的运行情况</a>。</p>
<p><img alt="-w1570" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15632804527438.jpg" /></p>
<p>点击 MariaDB 图标，可以查看其占用的 CPU、内存使用率以及文件句柄数等进程占用的资源指标。</p>
<p><img alt="-w1249" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/15626645050893.jpg" /></p>
<h2 id="_4">扩展阅读</h2>
<h3 id="1-cmdb_1">1. 监控系统消费 CMDB 中进程配置背后的逻辑</h3>
<p>当给模块分配完主机后，该主机的大部分 CI 属性将被自动推送至<code>/var/lib/gse/host/hostid</code></p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="err">.....</span>
     <span class="nt">&quot;process&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="nt">&quot;bind_ip&quot;</span> <span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
         <span class="nt">&quot;bind_modules&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="mi">68</span> <span class="p">],</span>
         <span class="nt">&quot;bk_func_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="nt">&quot;bk_func_name&quot;</span> <span class="p">:</span> <span class="s2">&quot;mysqld&quot;</span><span class="p">,</span>  <span class="err">//</span> <span class="err">对应功能名称</span>
         <span class="nt">&quot;bk_process_id&quot;</span> <span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
         <span class="nt">&quot;bk_process_name&quot;</span> <span class="p">:</span> <span class="s2">&quot;MariaDB&quot;</span><span class="p">,</span>  <span class="err">//</span> <span class="err">对应进程名称</span>
         <span class="nt">&quot;bk_start_param_regex&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="nt">&quot;port&quot;</span> <span class="p">:</span> <span class="s2">&quot;3306&quot;</span><span class="p">,</span>
         <span class="nt">&quot;protocol&quot;</span> <span class="p">:</span> <span class="s2">&quot;1&quot;</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>蓝鲸内置的进程监控采集器<code>processbeat</code>会读取该文件，并写入自身的配置文件<code>/usr/local/gse/plugins/etc/processbeat.conf</code>，以实现进程和端口的监控。</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">......</span>
<span class="l l-Scalar l-Scalar-Plain">processbeat.processes</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mysqld // 二进制名称</span>
  <span class="nt">displayname</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MariaDB</span>
  <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
  <span class="nt">ports</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3306</span>
  <span class="nt">paramregex</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
  <span class="nt">bindip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.4.29</span>
</pre></div>


<h3 id="2-java">2. 二进制名称均为 java，该如何配置</h3>
<p>如 ZooKeeper、Hadoop 的二进制均为<code>java</code>，可用进程启动参数区分</p>
<div class="codehilite"><pre><span></span>$ ps -ef <span class="p">|</span> grep -i zookeeper

root      <span class="m">4872</span>     <span class="m">1</span>  <span class="m">0</span> May11 ?        <span class="m">14</span>:05:34 /data/bkee/service/java/bin/java -Dzookeeper.log.dir<span class="o">=</span>/data/bkee/logs/zk/ -Dzookeeper.root.logger<span class="o">=</span>INFO,ROLLINGFILE -Dzookeeper.DigestAuthenticationProvider.superDigest<span class="o">=</span>bkadmin:1bF5dHUwvnyrhMDaPLkHwFS1JOg<span class="o">=</span> -cp /data/bkee/service/zk/bin/../build/classes:/data/bkee/service/zk/bin/../build/lib/*.jar:/data/bkee/service/zk/bin/../lib/slf4j-log4j12-1.6.1.jar:/data/bkee/service/zk/bin/../lib/slf4j-api-1.6.1.jar:/data/bkee/service/zk/bin/../lib/netty-3.10.5.Final.jar:/data/bkee/service/zk/bin/../lib/log4j-1.2.16.jar:/data/bkee/service/zk/bin/../lib/jline-0.9.94.jar:/data/bkee/service/zk/bin/../zookeeper-3.4.10.jar:/data/bkee/service/zk/bin/../src/java/lib/*.jar:/data/bkee/etc:/data/bkee/service/zk/conf:/data/bkee/service/java/lib: -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only<span class="o">=</span><span class="nb">false</span> org.apache.zookeeper.server.quorum.QuorumPeerMain /data/bkee/etc/zoo.cfg


ps -ef <span class="p">|</span> grep -i kafka
root      <span class="m">5707</span>     <span class="m">1</span>  <span class="m">3</span> May11 ?        <span class="m">1</span>-22:34:50 /data/bkee/service/java/bin/java -Xmx1G -Xms1G -server -XX:+UseG1GC -XX:MaxGCPauseMillis<span class="o">=</span><span class="m">20</span> -XX:InitiatingHeapOccupancyPercent<span class="o">=</span><span class="m">35</span> -XX:+DisableExplicitGC -Djava.awt.headless<span class="o">=</span><span class="nb">true</span> -Xloggc:/data/bkee/logs/kafka/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate<span class="o">=</span><span class="nb">false</span> -Dcom.sun.management.jmxremote.ssl<span class="o">=</span><span class="nb">false</span> -Dkafka.logs.dir<span class="o">=</span>/data/bkee/logs/kafka -Dlog4j.configuration<span class="o">=</span>file:./../config/log4j.properties -cp /data/bkee/service/java/lib::/data/bkee/service/kafka/bin/../libs/aopalliance-repackaged-2.5.0-b05.jar:/data/bkee/service/kafka/bin/../libs/argparse4j-0.7.0.jar:/data/bkee/service/kafka/bin/../libs/connect-api-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/connect-file-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/connect-json-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/connect-runtime-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/connect-transforms-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/guava-18.0.jar:/data/bkee/service/kafka/bin/../libs/hk2-api-2.5.0-b05.jar:/data/bkee/service/kafka/bin/../libs/hk2-locator-2.5.0-b05.jar:/data/bkee/service/kafka/bin/../libs/hk2-utils-2.5.0-b05.jar:/data/bkee/service/kafka/bin/../libs/jackson-annotations-2.8.0.jar:/data/bkee/service/kafka/bin/../libs/jackson-annotations-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/jackson-core-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/jackson-databind-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/jackson-jaxrs-base-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/jackson-jaxrs-json-provider-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/jackson-module-jaxb-annotations-2.8.5.jar:/data/bkee/service/kafka/bin/../libs/javassist-3.20.0-GA.jar:/data/bkee/service/kafka/bin/../libs/javax.annotation-api-1.2.jar:/data/bkee/service/kafka/bin/../libs/javax.inject-1.jar:/data/bkee/service/kafka/bin/../libs/javax.inject-2.5.0-b05.jar:/data/bkee/service/kafka/bin/../libs/javax.servlet-api-3.1.0.jar:/data/bkee/service/kafka/bin/../libs/javax.ws.rs-api-2.0.1.jar:/data/bkee/service/kafka/bin/../libs/jersey-client-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-common-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-container-servlet-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-container-servlet-core-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-guava-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-media-jaxb-2.24.jar:/data/bkee/service/kafka/bin/../libs/jersey-server-2.24.jar:/data/bkee/service/kafka/bin/../libs/jetty-continuation-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-http-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-io-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-security-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-server-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-servlet-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-servlets-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jetty-util-9.2.15.v20160210.jar:/data/bkee/service/kafka/bin/../libs/jopt-simple-5.0.3.jar:/data/bkee/service/kafka/bin/../libs/kafka_2.12-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-sources.jar:/data/bkee/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-test-sources.jar:/data/bkee/service/kafka/bin/../libs/kafka-clients-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/kafka-log4j-appender-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/kafka-streams-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/kafka-streams-examples-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/kafka-tools-0.10.2.0.jar:/data/bkee/service/kafka/bin/../libs/log4j-1.2.17.jar:/data/bkee/service/kafka/bin/../libs/lz4-1.3.0.jar:/data/bkee/service/kafka/bin/../libs/metrics-core-2.2.0.jar:/data/bkee/service/kafka/bin/../libs/osgi-resource-locator-1.0.1.jar:/data/bkee/service/kafka/bin/../libs/reflections-0.9.10.jar:/data/bkee/service/kafka/bin/../libs/rocksdbjni-5.0.1.jar:/data/bkee/service/kafka/bin/../libs/scala-library-2.12.1.jar:/data/bkee/service/kafka/bin/../libs/scala-parser-combinators_2.12-1.0.4.jar:/data/bkee/service/kafka/bin/../libs/slf4j-api-1.7.21.jar:/data/bkee/service/kafka/bin/../libs/slf4j-log4j12-1.7.21.jar:/data/bkee/service/kafka/bin/../libs/snappy-java-1.1.2.6.jar:/data/bkee/service/kafka/bin/../libs/validation-api-1.1.0.Final.jar:/data/bkee/service/kafka/bin/../libs/zkclient-0.10.jar:/data/bkee/service/kafka/bin/../libs/zookeeper-3.4.9.jar kafka.Kafka ../config/server.properties
</pre></div>


<p>进程的功能名称均为<code>java</code>，<code>启动参数匹配规则</code>中分别输入<code>zookeeper</code>、<code>kafka</code>即可.</p><h1 id="cmdb-cmdb">企业原有 CMDB 同步至蓝鲸 CMDB</h1>
<blockquote>
<p>感谢社区用户 <a href="https://bk.tencent.com/s-mart/personal/10966/">Kevin</a> 提供该文档.</p>
</blockquote>
<h2 id="_1">情景</h2>
<p>公司基础部门维护公司统一的一套 CMDB，资源主要以服务器为主，资源交付后会直接进入公司的 CMDB，需要手动导出列表，修改成蓝鲸 CMDB 的导入格式，导入蓝鲸 CMDB。存在如下问题：</p>
<ul>
<li>资源交付后需要手动导出、导入，少量机器频繁交付，为了让机器及时加入蓝鲸管控，需要频繁人工参与</li>
<li>公司 CMDB 与蓝鲸 CMDB 字段不统一，需要手动复制、编辑字段属性，再导入蓝鲸，非常繁琐</li>
</ul>
<h2 id="_2">前提条件</h2>
<ul>
<li>
<p>在配置平台中 <a href="5.1/配置平台/快速入门/case1.md">新建好业务</a>。</p>
</li>
<li>
<p>熟悉一门脚本语言，如<code>Python</code>，本教程以<code>Python</code>为例</p>
</li>
<li>
<p>了解 <a href="5.1/API文档/CC/README.md">蓝鲸 CMDB API</a></p>
</li>
</ul>
<h2 id="_3">操作步骤</h2>
<ul>
<li>
<p>梳理同步逻辑</p>
</li>
<li>
<p>代码实践及解读</p>
</li>
<li>
<p>定时同步</p>
</li>
</ul>
<h3 id="1">1. 梳理同步逻辑</h3>
<p>查询公司 CMDB 与蓝鲸 CMDB 服务器属性的对应关系，生成属性映射 MAP 表，MAP 表中只记录需要关注的属性，并确认相关属性都已在蓝鲸 CMDB 中创建。</p>
<p><strong>新增资源</strong></p>
<ul>
<li>
<p>通过接口查询公司 CMDB，获取自己所在业务部门下的全量服务器列表</p>
</li>
<li>
<p>通过接口获取蓝鲸 CMDB 的服务器列表</p>
</li>
<li>
<p>遍历两个列表，找出蓝鲸 CMDB 中没有的服务器，汇总成列表，并通过接口录入到蓝鲸 CMDB</p>
</li>
</ul>
<p><strong>更新资源</strong></p>
<ul>
<li>分别获取两个 CMDB 的数据，遍历两组数据，对比属性 MAP 表中的属性字段，找出数据不同的服务器，汇总成列表，再统一更新到蓝鲸 CMDB</li>
</ul>
<h3 id="2">2. 代码实践及解读</h3>
<h4 id="21">2.1 新建应用</h4>
<p>在蓝鲸开发者中心 <a href="5.1/开发指南/SaaS开发/新手入门/Windows.md">新建一个应用</a>，用于调用 <a href="5.1/API文档/CC/README.md">CMDB 的 API</a>。</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">PAAS_API</span> <span class="o">=</span> <span class="s1">&#39;https://paas.bk.com&#39;</span> <span class="c1"># 蓝鲸 PaaS 地址</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
    <span class="n">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(filename)s</span><span class="s1">[line:</span><span class="si">%(lineno)d</span><span class="s1">] </span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;%a, </span><span class="si">%d</span><span class="s1"> %b %Y %H:%M:%S&#39;</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;./update.log&#39;</span><span class="p">,</span>
    <span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>

<span class="n">BASE_ARGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    接口调用中的通用参数</span>
<span class="sd">    蓝鲸中新建一个应用，获取相关应用信息</span>
<span class="sd">    并在https://paas.bk.com/admin/bkcore/functioncontroller/中添加认证白名单，否则调用CMDB     接口会失败，参考： 开发者中心-API网关-使用指南-API调用说明</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="s1">&#39;bk_app_code&#39;</span><span class="p">:</span> <span class="s1">&#39;sync-cmdb&#39;</span><span class="p">,</span>  <span class="c1"># 应用 ID</span>
    <span class="s1">&#39;bk_app_secret&#39;</span><span class="p">:</span> <span class="s1">&#39;xxxx-xxxxxxxxxxxx&#39;</span><span class="p">,</span> <span class="c1"># 应用 Token</span>
    <span class="s1">&#39;bk_username&#39;</span><span class="p">:</span><span class="s1">&#39;user.name&#39;</span> <span class="c1"># 蓝鲸系统中的用户名</span>
    <span class="p">}</span>
</pre></div>


<h4 id="22-cmdb">2.2 获取蓝鲸 CMDB 主机列表</h4>
<p>查询蓝鲸 CMDB 的获取主机 <code>search_host</code> API ，返回主机列表</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getBkCmdbHost</span><span class="p">():</span>
    <span class="c1"># 查询蓝鲸CMDB，返回主机列表</span>
    <span class="n">bkList</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">PAAS_API</span> <span class="o">+</span> <span class="s1">&#39;/api/c/compapi/v2/cc/search_host/&#39;</span> <span class="c1"># api请求地址</span>
    <span class="n">apiArgs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># api相关参数，参考https://paas.bk.com/esb/api_docs/system/CC/search_host/</span>
        <span class="s1">&#39;condition&#39;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}]</span>
    <span class="p">}</span>

    <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">BASE_ARGS</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="o">+</span> <span class="n">apiArgs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">j_content</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">j_content</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">]:</span>
        <span class="n">bkList</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">][</span><span class="s1">&#39;bk_host_innerip&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">bkList</span>
</pre></div>


<h4 id="23-cmdb">2.3 获取 公司 CMDB 主机列表</h4>
<p>调用公司 CMDB 获取主机列表 API，返回主机列表</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">getCmdbHost</span><span class="p">():</span>
    <span class="c1"># 根据企业内部接口自己实现，返回IP信息列表</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    infoList = [</span>
<span class="sd">        &quot;ip1&quot;: {</span>
<span class="sd">            &quot;sn&quot;: &quot;xxxx&quot;,</span>
<span class="sd">            &quot;service_term&quot;: 3,</span>
<span class="sd">            ...</span>
<span class="sd">        },</span>
<span class="sd">        &quot;ip2&quot;: {},</span>
<span class="sd">        ...</span>
<span class="sd">    ]</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>


<h4 id="24-ip-ip">2.4 生成新增 IP 列表、更新 IP 列表、更新信息列表</h4>
<p>根据步骤 2.2 和 步骤 2.3 获取到的两个主机列表，对比生成所需的新增列表和更新列表。</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">genAddList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">):</span>
    <span class="c1"># 对比两个列表，返回新增IP列表</span>
    <span class="n">addList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cmdbList</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bkList</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1">#print k, cmdbList[k]</span>
            <span class="n">addList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">addList</span>

<span class="k">def</span> <span class="nf">genUpdateList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">):</span>
    <span class="c1"># 对比两个列表，生成需要更新的IP列表</span>
    <span class="n">ipList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">attrMAP</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attributeMAP</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">}</span> <span class="c1"># 过滤出自己关心的主机属性</span>
    <span class="k">for</span> <span class="n">ip</span><span class="p">,</span> <span class="n">cmdbHost</span> <span class="ow">in</span> <span class="n">cmdbList</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bkList</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">continue</span>
        <span class="n">bkHost</span> <span class="o">=</span> <span class="n">bkList</span><span class="p">[</span><span class="n">ip</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">cmdbAttr</span><span class="p">,</span> <span class="n">bkAttr</span> <span class="ow">in</span> <span class="n">attrMAP</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">cmdbAttr</span> <span class="ow">in</span> <span class="n">cmdbHost</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">bkAttr</span> <span class="ow">in</span> <span class="n">bkHost</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">cmdbHost</span><span class="p">[</span><span class="n">cmdbAttr</span><span class="p">]</span> <span class="o">!=</span> <span class="n">bkHost</span><span class="p">[</span><span class="n">bkAttr</span><span class="p">]:</span>
                <span class="n">ipList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ipList</span>

<span class="k">def</span> <span class="nf">genInfoList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">,</span> <span class="n">ipList</span><span class="p">,</span> <span class="n">attributeMAP</span><span class="p">):</span>
    <span class="c1"># 根据IP列表生成主机详细信息列表</span>
    <span class="n">infoList</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">attrMAP</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attributeMAP</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">ipList</span><span class="p">:</span>
        <span class="n">ipInfo</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attrMAP</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cmdbList</span><span class="p">[</span><span class="n">ip</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">ipInfo</span><span class="p">[</span><span class="n">attrMAP</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cmdbList</span><span class="p">[</span><span class="n">ip</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">bkList</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="c1">#添加bk_host_id</span>
            <span class="n">ipInfo</span><span class="p">[</span><span class="s1">&#39;bk_host_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bkList</span><span class="p">[</span><span class="n">ip</span><span class="p">][</span><span class="s1">&#39;bk_host_id&#39;</span><span class="p">]</span>
        <span class="n">infoList</span><span class="p">[</span><span class="n">ip</span><span class="p">]</span> <span class="o">=</span> <span class="n">ipInfo</span>
    <span class="k">return</span> <span class="n">infoList</span>

<span class="n">attributeMAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># 属性对应列表，值为None的字段不关心，不录入蓝鲸cmdb</span>
    <span class="s1">&#39;AssetNo&#39;</span><span class="p">:</span>          <span class="s1">&#39;bk_asset_id&#39;</span><span class="p">,</span>          <span class="c1">#资产编号</span>
    <span class="s1">&#39;SN&#39;</span><span class="p">:</span>               <span class="s1">&#39;bk_sn&#39;</span><span class="p">,</span>                <span class="c1">#序列号</span>
    <span class="s1">&#39;Manufacture&#39;</span><span class="p">:</span>      <span class="s1">&#39;machine_manufacturer&#39;</span><span class="p">,</span> <span class="c1">#厂商</span>
    <span class="s1">&#39;ManufactureType&#39;</span><span class="p">:</span>  <span class="s1">&#39;machine_model&#39;</span><span class="p">,</span>        <span class="c1">#厂商型号</span>
    <span class="s1">&#39;MachineType&#39;</span><span class="p">:</span>      <span class="s1">&#39;machine_type&#39;</span><span class="p">,</span>         <span class="c1">#MachineType</span>
    <span class="s1">&#39;HostName&#39;</span><span class="p">:</span>         <span class="bp">None</span><span class="p">,</span>                   <span class="c1">#主机名</span>
    <span class="s1">&#39;IP&#39;</span><span class="p">:</span>               <span class="s1">&#39;bk_host_innerip&#39;</span><span class="p">,</span>      <span class="c1">#IP</span>
    <span class="s1">&#39;BusinessIP&#39;</span><span class="p">:</span>       <span class="s1">&#39;bk_host_bizip&#39;</span><span class="p">,</span>        <span class="c1">#业务IP</span>
    <span class="s1">&#39;PublicIP&#39;</span><span class="p">:</span>         <span class="s1">&#39;bk_host_outerip&#39;</span><span class="p">,</span>      <span class="c1">#公网IP</span>
    <span class="s1">&#39;VNetIP&#39;</span><span class="p">:</span>           <span class="s1">&#39;bk_host_usernetip&#39;</span><span class="p">,</span>    <span class="c1">#用户网IP</span>
    <span class="s1">&#39;tags&#39;</span><span class="p">:</span>             <span class="bp">None</span><span class="p">,</span>                   <span class="c1">#资产类型</span>
    <span class="c1">#其它...</span>
<span class="p">}</span>

<span class="n">addList</span> <span class="o">=</span> <span class="n">genAddList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">)</span>
<span class="n">updateList</span> <span class="o">=</span> <span class="n">genUpdateList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">):</span>
<span class="n">addInfoList</span> <span class="o">=</span> <span class="n">genInfoList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">,</span> <span class="n">addList</span><span class="p">,</span> <span class="n">attributeMAP</span><span class="p">)</span>
<span class="n">updateInfoList</span> <span class="o">=</span> <span class="n">genInfoList</span><span class="p">(</span><span class="n">cmdbList</span><span class="p">,</span> <span class="n">bkList</span><span class="p">,</span> <span class="n">addList</span><span class="p">,</span> <span class="n">attributeMAP</span><span class="p">)</span>
</pre></div>


<h4 id="25-cmdb">2.5 录入、更新主机数据到蓝鲸 CMDB</h4>
<ul>
<li>录入新增主机信息：使用 步骤 2.4 中生成的新增主机信息列表，录入蓝鲸 CMDB</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">addBkCmdbHost</span><span class="p">(</span><span class="n">infoList</span><span class="p">):</span>
    <span class="c1"># 录入新增数据到cmdb</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    infoList = [</span>
<span class="sd">        &quot;ip1&quot;: {</span>
<span class="sd">            &quot;bk_sn&quot;: &quot;xxxx&quot;,</span>
<span class="sd">            &quot;bk_service_term&quot;: 3,</span>
<span class="sd">            ...</span>
<span class="sd">        },</span>
<span class="sd">        &quot;ip2&quot;: {},</span>
<span class="sd">        ...</span>
<span class="sd">    ]</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">ipInfoList</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">infoList</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
        <span class="n">v</span><span class="p">[</span><span class="s1">&#39;bk_cloud_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">v</span><span class="p">[</span><span class="s1">&#39;import_from&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;3&#39;</span>
        <span class="k">if</span> <span class="s1">&#39;bk_host_id&#39;</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">del</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;bk_host_id&#39;</span><span class="p">])</span>
        <span class="c1">#print k, v</span>
        <span class="n">ipInfoList</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="n">v</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">PAAS_API</span> <span class="o">+</span> <span class="s1">&#39;/api/c/compapi/v2/cc/add_host_to_resource/&#39;</span>
    <span class="n">apiArgs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;host_info&#39;</span><span class="p">:</span> <span class="n">ipInfoList</span>
    <span class="p">}</span>

    <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">BASE_ARGS</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="o">+</span> <span class="n">apiArgs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">content</span>

<span class="n">addBkCmdbHost</span><span class="p">(</span><span class="n">addInfoList</span><span class="p">)</span>
</pre></div>


<ul>
<li>更新主机数据：使用步骤 2.4 中生成的更新主机信息列表，更新蓝鲸 CMDB</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">updateBkCmdbHost</span><span class="p">(</span><span class="n">infoList</span><span class="p">):</span>
    <span class="c1"># 更新数据到cmdb</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">PAAS_API</span> <span class="o">+</span> <span class="s1">&#39;/api/c/compapi/v2/cc/update_host/&#39;</span>
    <span class="k">for</span> <span class="n">ip</span><span class="p">,</span> <span class="n">ipInfo</span> <span class="ow">in</span> <span class="n">infoList</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">bk_host_id</span> <span class="o">=</span> <span class="n">ipInfo</span><span class="p">[</span><span class="s1">&#39;bk_host_id&#39;</span><span class="p">]</span>
        <span class="k">del</span><span class="p">(</span><span class="n">ipInfo</span><span class="p">[</span><span class="s1">&#39;bk_host_id&#39;</span><span class="p">])</span>
        <span class="n">apiArgs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;bk_host_id&#39;</span><span class="p">:</span> <span class="n">bk_host_id</span><span class="p">,</span>
            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">ipInfo</span>
        <span class="p">}</span>

        <span class="c1">#print apiArgs</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">BASE_ARGS</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="o">+</span> <span class="n">apiArgs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;bk_host_id: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bk_host_id</span><span class="p">)</span> <span class="o">+</span> <span class="n">content</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="n">updateBkCmdbHost</span><span class="p">(</span><span class="n">updateInfoList</span><span class="p">)</span>
</pre></div>


<h3 id="3">3. 定时同步</h3>
<ul>
<li>CMDB 同步脚本使用 <a href="5.1/作业平台/产品功能/定时作业.md">JOB</a> 的定时作业或 <a href="5.1/标准运维/产品功能/flow.md">标准运维</a> 的定时任务进行周期托管，方便迁移或者修改维护</li>
</ul>
<p><img alt="1562225679643" src="F:\bkdoc\md_to_pdf/5.1/bk_solutions/CD/CMDB/media/1562225679643.png" /></p>
<p>注：上述教程是企业 CMDB <code>单向</code>、<code>定期</code>同步主机实例至蓝鲸 CMDB 的实践，如果需要实时同步，一般推荐 <a href="5.1/配置平台/产品功能/ModelManagement.md">消息推动</a>的方式。</p><h2 id="api">配置平台 API 简介</h2>
<p><strong>蓝鲸配置平台是一款面向应用的 CMDB，在 ITIL 体系里，CMDB 是构建其它流程的基石，而在蓝鲸智云体系里，配置平台就扮演着基石的角色，为应用提供了各种运维场景的配置数据服务。</strong></p>
<table>
<thead>
<tr>
<th>资源名称</th>
<th>资源描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="5.1/API文档/CC/add_host_lock.md">add_host_lock</a></td>
<td>新加主机锁</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/add_host_to_resource.md">add_host_to_resource</a></td>
<td>新增主机到资源池</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/add_instance_association.md">add_instance_association</a></td>
<td>新建模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/batch_delete_inst.md">batch_delete_inst</a></td>
<td>批量删除实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/batch_delete_set.md">batch_delete_set</a></td>
<td>批量删除集群</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/batch_update_inst.md">batch_update_inst</a></td>
<td>批量更新对象实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/bind_process_module.md">bind_process_module</a></td>
<td>绑定进程到模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/bind_role_privilege.md">bind_role_privilege</a></td>
<td>绑定角色权限</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/clone_host_property.md">clone_host_property</a></td>
<td>克隆主机属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_business.md">create_business</a></td>
<td>新建业务</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_classification.md">create_classification</a></td>
<td>添加模型分类</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_custom_query.md">create_custom_query</a></td>
<td>添加自定义API</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_inst.md">create_inst</a></td>
<td>创建实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_module.md">create_module</a></td>
<td>创建模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_object.md">create_object</a></td>
<td>创建模型</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_object_attribute.md">create_object_attribute</a></td>
<td>创建模型属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_set.md">create_set</a></td>
<td>创建集群</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/create_user_group.md">create_user_group</a></td>
<td>新建用户分组</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_business.md">delete_business</a></td>
<td>删除业务</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_classification.md">delete_classification</a></td>
<td>删除模型分类</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_custom_query.md">delete_custom_query</a></td>
<td>删除自定义API</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_host.md">delete_host</a></td>
<td>删除主机</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_host_lock.md">delete_host_lock</a></td>
<td>删除主机锁</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_inst.md">delete_inst</a></td>
<td>删除实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_instance_association.md">delete_instance_association</a></td>
<td>删除模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_module.md">delete_module</a></td>
<td>删除模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_object.md">delete_object</a></td>
<td>删除模型</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_object_attribute.md">delete_object_attribute</a></td>
<td>删除对象模型属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_process_module_bind.md">delete_process_module_bind</a></td>
<td>解绑进程模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_set.md">delete_set</a></td>
<td>删除集群</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/delete_user_group.md">delete_user_group</a></td>
<td>删除用户分组</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/find_host_by_module.md">find_host_by_module</a></td>
<td>根据模块查询主机</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/find_instance_association.md">find_instance_association</a></td>
<td>查询模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/find_object_association.md">find_object_association</a></td>
<td>查询模型之间的关联关系</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_biz_internal_module.md">get_biz_internal_module</a></td>
<td>查询业务的空闲机和故障机模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_custom_query_data.md">get_custom_query_data</a></td>
<td>根据自定义api获取数据</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_custom_query_detail.md">get_custom_query_detail</a></td>
<td>获取自定义API详情</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_host_base_info.md">get_host_base_info</a></td>
<td>获取主机详情</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_mainline_object_topo.md">get_mainline_object_topo</a></td>
<td>查询主线模型的业务拓扑</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_operation_log.md">get_operation_log</a></td>
<td>获取操作日志</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_process_bind_module.md">get_process_bind_module</a></td>
<td>查询进程绑定模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_role_privilege.md">get_role_privilege</a></td>
<td>获取角色绑定权限</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/get_user_privilege.md">get_user_privilege</a></td>
<td>查询用户权限</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_biz_inst_topo.md">search_biz_inst_topo</a></td>
<td>查询业务实例拓扑</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_business.md">search_business</a></td>
<td>查询业务</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_classifications.md">search_classifications</a></td>
<td>查询模型分类</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_custom_query.md">search_custom_query</a></td>
<td>查询自定义API</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_group_privilege.md">search_group_privilege</a></td>
<td>查询分组权限</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_host.md">search_host</a></td>
<td>根据条件查询主机</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_host_lock.md">search_host_lock</a></td>
<td>查询主机锁</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_inst.md">search_inst</a></td>
<td>查询实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_inst_association_topo.md">search_inst_association_topo</a></td>
<td>查询实例关联拓扑</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_inst_by_object.md">search_inst_by_object</a></td>
<td>查询实例详情</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_module.md">search_module</a></td>
<td>查询模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_objects.md">search_objects</a></td>
<td>查询模型</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_object_attribute.md">search_object_attribute</a></td>
<td>查询对象模型属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_object_topo.md">search_object_topo</a></td>
<td>查询普通模型拓扑</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_object_topo_graphics.md">search_object_topo_graphics</a></td>
<td>查询拓扑图</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_set.md">search_set</a></td>
<td>查询集群</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_subscription.md">search_subscription</a></td>
<td>查询订阅</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/search_user_group.md">search_user_group</a></td>
<td>查询用户分组</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/subscribe_event.md">subscribe_event</a></td>
<td>订阅事件</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/testing_connection.md">testing_connection</a></td>
<td>测试推送（只测试连通性）</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_host_module.md">transfer_host_module</a></td>
<td>业务内主机转移模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_host_to_faultmodule.md">transfer_host_to_faultmodule</a></td>
<td>上交主机到业务的故障机模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_host_to_idlemodule.md">transfer_host_to_idlemodule</a></td>
<td>上交主机到业务的空闲机模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_host_to_resourcemodule.md">transfer_host_to_resourcemodule</a></td>
<td>上交主机至资源池</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_resourcehost_to_idlemodule.md">transfer_resourcehost_to_idlemodule</a></td>
<td>资源池主机分配至业务的空闲机模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/transfer_sethost_to_idle_module.md">transfer_sethost_to_idle_module</a></td>
<td>清空业务下集群/模块中主机</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/unsubcribe_event.md">unsubcribe_event</a></td>
<td>退订事件</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_business.md">update_business</a></td>
<td>修改业务</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_business_enable_status.md">update_business_enable_status</a></td>
<td>修改业务启用状态</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_classification.md">update_classification</a></td>
<td>更新模型分类</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_custom_query.md">update_custom_query</a></td>
<td>更新自定义API</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_event_subscribe.md">update_event_subscribe</a></td>
<td>修改订阅</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_host.md">update_host</a></td>
<td>更新主机属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_inst.md">update_inst</a></td>
<td>更新对象实例</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_module.md">update_module</a></td>
<td>更新模块</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_object.md">update_object</a></td>
<td>更新定义</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_object_attribute.md">update_object_attribute</a></td>
<td>更新对象模型属性</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_object_topo_graphics.md">update_object_topo_graphics</a></td>
<td>更新拓扑图</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_set.md">update_set</a></td>
<td>更新集群</td>
</tr>
<tr>
<td><a href="5.1/API文档/CC/update_user_group.md">update_user_group</a></td>
<td>更新用户分组</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新加主机锁，如果主机已经加过锁，同样提示加锁成功</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ip_list</td>
<td>string array</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;ip_list&quot;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">],</span>
   <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_host_to_resource/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新增主机到资源池</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>host_info</td>
<td>dict</td>
<td>是</td>
<td>主机信息</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务ID</td>
</tr>
</tbody>
</table>
<h4 id="host_info">host_info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>是</td>
<td>主机内网ip</td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>是</td>
<td>主机导入来源,以api方式导入为3</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>是</td>
<td>云区域ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;import_from&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新增模型实例之间的关联关系.</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>Yes</td>
<td>meta data</td>
</tr>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>metadata params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>Yes</td>
<td>标签信息</td>
</tr>
</tbody>
</table>
<p>label params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>Yes</td>
<td>业务id</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型之间关系关系的唯一id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>Yes</td>
<td>源模型实例id</td>
</tr>
<tr>
<td>bk_asst_inst_id</td>
<td>int64</td>
<td>Yes</td>
<td>目标模型实例id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;bk_obj_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch_belong_bk_host&quot;</span><span class="p">,</span>
    <span class="nt">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="nt">&quot;bk_asst_inst_id&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1038</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>新增的实例关联关系身份id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_delete_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量删除对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID，删除对象为云区域时为plat</td>
</tr>
<tr>
<td>inst_ids</td>
<td>int array</td>
<td>是</td>
<td>实例ID集合</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;inst_ids&quot;</span><span class="p">:[</span><span class="mi">123</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_delete_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量删除集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>inst_ids</td>
<td>int array</td>
<td>是</td>
<td>集群ID集合</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;inst_ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">123</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_update_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量更新对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID</td>
</tr>
<tr>
<td>update</td>
<td>object array</td>
<td>是</td>
<td>实例被更新的字段及值</td>
</tr>
</tbody>
</table>
<h4 id="update">update</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>否</td>
<td>实例名，也可以为其它自定义字段</td>
</tr>
<tr>
<td>datas</td>
<td>object</td>
<td>是</td>
<td>实例被更新的字段取值</td>
</tr>
<tr>
<td>inst_id</td>
<td>int</td>
<td>是</td>
<td>指明datas 用于更新的具体实例</td>
</tr>
</tbody>
</table>
<h4 id="datas">datas</h4>
<p><strong>datas 是map类型的对象，key 是实例对应的模型定义的字段，value是字段的取值</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;update&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
          <span class="s2">&quot;datas&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span><span class="s2">&quot;batch_update&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;inst_id&quot;</span><span class="p">:</span><span class="mi">46</span>
         <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/bind_process_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>绑定进程到模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_process_id</td>
<td>int</td>
<td>是</td>
<td>进程ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>是</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/bind_role_privilege/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>绑定角色权限</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>是</td>
<td>模型对应用户角色属性ID</td>
</tr>
<tr>
<td>data</td>
<td>list</td>
<td>否</td>
<td>角色权限数据，输入为空数组则不绑定任何权限</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>hostupdate</td>
<td>string</td>
<td>否</td>
<td>主机编辑</td>
</tr>
<tr>
<td>hosttrans</td>
<td>string</td>
<td>否</td>
<td>主机转移</td>
</tr>
<tr>
<td>topoupdate</td>
<td>string</td>
<td>否</td>
<td>主机拓扑编辑</td>
</tr>
<tr>
<td>customapi</td>
<td>string</td>
<td>否</td>
<td>自定义api</td>
</tr>
<tr>
<td>proconfig</td>
<td>string</td>
<td>否</td>
<td>进程管理</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;biz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;hostupdate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hosttrans&quot;</span><span class="p">,</span>
        <span class="s2">&quot;topoupdate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;customapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;proconfig&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/clone_host_property/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>克隆主机属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_org_ip</td>
<td>string</td>
<td>是</td>
<td>源主机ip, 只支持传入单ip</td>
</tr>
<tr>
<td>bk_dst_ip</td>
<td>string</td>
<td>是</td>
<td>目标主机ip, 多个ip用","分割</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>云区域ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;bk_org_ip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_dst_ip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新建业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>是</td>
<td>业务名</td>
</tr>
<tr>
<td>bk_biz_maintainer</td>
<td>string</td>
<td>是</td>
<td>运维人员</td>
</tr>
<tr>
<td>bk_biz_productor</td>
<td>string</td>
<td>是</td>
<td>产品人员</td>
</tr>
<tr>
<td>bk_biz_developer</td>
<td>string</td>
<td>是</td>
<td>开发人员</td>
</tr>
<tr>
<td>bk_biz_tester</td>
<td>string</td>
<td>是</td>
<td>测试人员</td>
</tr>
<tr>
<td>time_zone</td>
<td>string</td>
<td>是</td>
<td>时区</td>
</tr>
</tbody>
</table>
<p><strong>注意：此处的输入参数仅对必填以及系统内置的参数做了说明，其余需要填写的参数取决于用户自己定义的属性字段</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_app_test&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_maintainer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_productor&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_developer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_tester&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Asia/Shanghai&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>添加模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>分类ID，英文描述用于系统内部使用</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>是</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>否</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cs_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">18</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>新增数据记录的ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>添加自定义api</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>是</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>收藏的名称</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象名,可以为biz,set,module,host,object</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>查询输出字段</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>否</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>操作符, $eq为相等，$neq为不等，$in为属于，$nin为不属于</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>否</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">biz</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$ne</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:1}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">set</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">module</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">host</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$eq</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">127.0.0.1</span><span class="se">\&quot;</span><span class="s2">}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_host_outerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_agent_status</span><span class="se">\&quot;</span><span class="s2">]}]}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;api1&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;b80nu3dmjrccd9i5r1eg&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>自定义api主键ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID，新建云区域时为plat</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号,独立部署请填"0"</td>
</tr>
<tr>
<td>bk_inst_name/bk_cloud_name</td>
<td>string</td>
<td>是</td>
<td>实例名,当创建对象为云区域时为bk_cloud_name</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;example18&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">67</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>是</td>
<td>父实例节点的ID，当前实例节点的上一级实例节点，在拓扑结构中对于module一般指的是set的bk_set_id</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>是</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>是</td>
<td>对象模型的名字，用于展示，可以使用人类可以阅读的任何语言</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的ICON信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1038</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>新增的数据记录的ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>否</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>否</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>否</td>
<td _min_:_1_max_:_2_="&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;">用户自定义内容，存储的内容及格式由调用方决定，以数字类型为例（</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>是</td>
<td>模型的属性ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>是</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>是</td>
<td>定义的属性字段用于存储数据的数据类型,可取值范围（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool）</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;editable&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isonly&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ispre&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isreadonly&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isrequired&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;max&quot;</span><span class="p">:</span><span class="s2">&quot;2&quot;</span><span class="p">},</span>
    <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_group&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_test_inst&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_type&quot;</span><span class="p">:</span> <span class="s2">&quot;singlechar&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">11142</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>新增的数据记录的ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>集群数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>是</td>
<td>父节点的ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>是</td>
<td>集群名字</td>
</tr>
<tr>
<td>default</td>
<td>int</td>
<td>否</td>
<td>0-普通集群，1-内置模块集合，默认为0</td>
</tr>
</tbody>
</table>
<p><strong>注意：其它需要的字段由模型定义</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test-set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_set_desc&quot;</span><span class="p">:</span> <span class="s2">&quot;test-set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_capacity&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;description&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_user_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新建用户分组</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>group_name</td>
<td>string</td>
<td>是</td>
<td>分组名</td>
</tr>
<tr>
<td>user_list</td>
<td>string</td>
<td>是</td>
<td>分组用户列表，多个用;分割</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;group_name&quot;</span><span class="p">:</span><span class="s2">&quot;Administrators&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_list&quot;</span><span class="p">:</span><span class="s2">&quot;owen;tt&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>分类数据记录ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除自定义api</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除主机</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>string</td>
<td>是</td>
<td>主机id，多个以逗号分隔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1,2,3&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新加主机锁，如果主机已经加过锁，同样提示加锁成功</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ip_list</td>
<td>string array</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;ip_list&quot;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">],</span>
   <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID，删除对象为云区域时为"plat"</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例ID，删除云区域时为云区域ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>DELETE</p>
<h3 id="_3">功能描述</h3>
<p>删除模型实例之间的关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>Yes</td>
<td>模型实例关联关系的唯一身份id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>被删除的数据记录的ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
      <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
          <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="mi">0</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除对象模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>被删除的数据记录的唯一标识ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>    
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_process_module_bind/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>解绑进程模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_process_id</td>
<td>int</td>
<td>是</td>
<td>进程ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>是</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_user_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除用户分组</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td>是</td>
<td>分组ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;group_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>    
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_by_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据模块ID查询主机</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>是</td>
<td>请求元数据</td>
</tr>
<tr>
<td>bk_module_ids</td>
<td>int array</td>
<td>是</td>
<td>模块ID数组</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页参数</td>
</tr>
</tbody>
</table>
<p>metadata参数</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>是</td>
<td>请求中需要携带的信息，例如业务ID</td>
</tr>
</tbody>
</table>
<p>label参数</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>是</td>
<td>业务ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;metadata&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="s2">&quot;3&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;bk_module_ids&quot;</span><span class="p">:[</span>
        <span class="mi">56</span>
    <span class="p">],</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="s2">&quot;biz&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;bk_biz_developer&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_maintainer&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span><span class="s2">&quot;蓝鲸&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;host&quot;</span><span class="p">:{</span>
                    <span class="s2">&quot;bk_asset_id&quot;</span><span class="p">:</span><span class="s2">&quot;DKUXHBUH189&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_bak_operator&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;plat&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span><span class="s2">&quot;default area&quot;</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;bk_comment&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cpu&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cpu_mhz&quot;</span><span class="p">:</span><span class="mi">2609</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cpu_module&quot;</span><span class="p">:</span><span class="s2">&quot;E5-2620&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_disk&quot;</span><span class="p">:</span><span class="mi">300000</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_name&quot;</span><span class="p">:</span><span class="s2">&quot;nginx-1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_outerip&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_isp_name&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span>
                    <span class="s2">&quot;bk_mac&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_mem&quot;</span><span class="p">:</span><span class="mi">32000</span><span class="p">,</span>
                    <span class="s2">&quot;bk_os_bit&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;module&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;TopModuleName&quot;</span><span class="p">:</span><span class="s2">&quot;蓝鲸##公共组件##consul&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_bak_operator&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span><span class="s2">&quot;consul&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_type&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-05-16T21:03:22.724+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-05-16T21:03:22.724+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;operator&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;set&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;TopSetName&quot;</span><span class="p">:</span><span class="s2">&quot;蓝鲸##公共组件&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;bk_capacity&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span>
                        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
                        <span class="s2">&quot;bk_service_status&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_desc&quot;</span><span class="p">:</span><span class="s2">&quot;111&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_env&quot;</span><span class="p">:</span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span><span class="s2">&quot;公共组件&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-05-16T21:03:22.692+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-05-18T11:50:53.947+08:00&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| result | bool | 请求成功与否。true:请求成功；false请求失败 |
| bk_error_code | int | 错误编码。 0表示success，&gt;0表示失败错误 |
| bk_error_msg | string | 请求失败返回的错误信息 |
| data | object| 请求返回的数据 |</p>
<p>data 字段说明：</p>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| count| int| 记录条数 |
| info| object array | 主机实际数据 |</p>
<p>info 字段说明:</p>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---| 
| biz | object array| 主机所属的业务信息 |
| set| object array | 主机所属的集群信息 |
| module| object array| 主机所属的模块信息 |
| host| object | 主机自身属性|</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型的实例关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>Yes</td>
<td>meta data</td>
</tr>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>metadata params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>Yes</td>
<td>标签信息</td>
</tr>
</tbody>
</table>
<p>label params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>Yes</td>
<td>业务ID</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型关联关系的唯一id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>NO</td>
<td>关联类型的唯一id</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>NO</td>
<td>源模型id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>NO</td>
<td>目标模型id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;bk_obj_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch_belong_bk_host&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_object_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="s2">&quot;3&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;bk_obj_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch_belong_bk_host&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;switch&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;host&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_inst_id&quot;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span>
        <span class="nt">&quot;bk_asst_inst_id&quot;</span><span class="p">:</span><span class="mi">13</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>the association's unique id</td>
</tr>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>自动生成的模型关联关系id.</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>关联关系源模型id</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>关联关系目标模型id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>源模型实例id</td>
</tr>
<tr>
<td>bk_asst_inst_id</td>
<td>int64</td>
<td>目标模型实例id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_object_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型的实例之间的关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>Yes</td>
<td>meta data</td>
</tr>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>metadata params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>Yes</td>
<td>标签信息</td>
</tr>
</tbody>
</table>
<p>label params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>Yes</td>
<td>业务id</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型的关联类型唯一id</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>Yes</td>
<td>源模型id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>目标模型id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;bk_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;belong&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;bk_obj_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch_belong_bk_host&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_obj_asst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_asst_id&quot;</span><span class="p">:</span> <span class="s2">&quot;belong&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_asst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;belong&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_switch&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;switch&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host&quot;</span><span class="p">,</span>
            <span class="nt">&quot;bk_asst_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
            <span class="nt">&quot;mapping&quot;</span><span class="p">:</span> <span class="s2">&quot;1:n&quot;</span><span class="p">,</span>
            <span class="nt">&quot;on_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>模型关联关系的身份id</td>
</tr>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>模型关联关系的唯一id.</td>
</tr>
<tr>
<td>bk_obj_asst_name</td>
<td>string</td>
<td>关联关系的别名.</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>关联类型id</td>
</tr>
<tr>
<td>bk_asst_name</td>
<td>string</td>
<td>关联类型名称</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>源模型id</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>源模型名称</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>目标模型id</td>
</tr>
<tr>
<td>bk_asst_obj_name</td>
<td>string</td>
<td>目标模型名称</td>
</tr>
<tr>
<td>mapping</td>
<td>string</td>
<td>源模型与目标模型关联关系实例的映身关系，可以是以下中的一种[1:1, 1:n, n:n]</td>
</tr>
<tr>
<td>on_delete</td>
<td>string</td>
<td>删除关联关系时的动作, 取值为以下其中的一种 [none, delete_src, delete_dest], "none" 什么也不做, "delete_src" 删除源模型的实例, "delete_dest" 删除目标模型的实例.</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_biz_internal_module/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取业务空闲机和故障机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
  <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;空闲机池&quot;</span><span class="p">,</span>
    <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;空闲机&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;故障机&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_set_id</td>
<td>int64</td>
<td>空闲机和故障机所属的set的实例ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>空闲机和故障机所属的set的实例名称</td>
</tr>
</tbody>
</table>
<h4 id="module">module说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_id</td>
<td>int64</td>
<td>空闲机或故障机的的实例ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>空闲机或故障机的实例名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_custom_query_data/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>根据自定义api获取数据</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键ID</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;biz&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_biz_maintainer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_biz_productor&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_name&quot;</span><span class="p">:</span> <span class="s2">&quot;nginx-1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">},</span>
                <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;module-test&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;set&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;set-test&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>biz</td>
<td>dict</td>
<td>主机所属的业务信息</td>
</tr>
<tr>
<td>set</td>
<td>dict</td>
<td>主机所属的集群信息</td>
</tr>
<tr>
<td>module</td>
<td>dict</td>
<td>主机所属的模块信息</td>
</tr>
<tr>
<td>host</td>
<td>dict</td>
<td>主机自身属性</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_custom_query_detail/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取自定义api详情</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;api1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;bacfet4kd42325venmcg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">biz</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$ne</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:1}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">set</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">module</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">host</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$eq</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">127.0.0.1</span><span class="se">\&quot;</span><span class="s2">}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_host_outerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_agent_status</span><span class="se">\&quot;</span><span class="s2">]}]}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;create_user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-27T16:22:43.271+08:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modify_user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-27T16:29:26.428+08:00&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务ID</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>自定义api主键ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>自定义api信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>自定义api命名</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| bk_obj_id |  string   | 对象名,可以为biz,set,module,host,object |
| fields    |  array    | 查询输出字段 |
| condition |  array    | 查询条件 |</p>
<h4 id="datainfocondition">data.info.condition</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| field     |  string    | 对象的字段 |
| operator  |  string    | 操作符, $eq为相等，$neq为不等，$in为属于，$nin为不属于 |
| value     |  string    | 字段对应的值 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_host_base_info/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取主机基础信息详情</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>是</td>
<td>主机ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="mi">10000</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;host name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_property_value&quot;</span><span class="p">:</span> <span class="s2">&quot;centos7&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;host ID&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_property_value&quot;</span><span class="p">:</span> <span class="s2">&quot;10000&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>属性id</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>属性名称</td>
</tr>
<tr>
<td>bk_property_value</td>
<td>string</td>
<td>属性值</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_mainline_object_topo/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取主线模型的业务拓扑</p>
<h3 id="_4">请求参数</h3>
<p>无</p>
<h4 id="_5">接口参数</h4>
<h3 id="_6">请求参数示例</h3>
<div class="codehilite"><pre><span></span>
</pre></div>


<h3 id="_7">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
  <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;biz&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;业务&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_obj&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_name&quot;</span><span class="p">:</span> <span class="s2">&quot;集群&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;集群&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_obj&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_name&quot;</span><span class="p">:</span> <span class="s2">&quot;模块&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;biz&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;业务&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;模块&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_obj&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_name&quot;</span><span class="p">:</span> <span class="s2">&quot;主机&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;集群&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;主机&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_obj&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_next_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bk_pre_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;模块&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型的唯一ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型名称</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商帐户名称</td>
</tr>
<tr>
<td>bk_next_obj</td>
<td>string</td>
<td>当前模型的下一个模型唯一ID</td>
</tr>
<tr>
<td>bk_next_name</td>
<td>string</td>
<td>当前模型的下一个模型名称</td>
</tr>
<tr>
<td>bk_pre_obj_id</td>
<td>string</td>
<td>当前模型的前一个模型的唯一ID</td>
</tr>
<tr>
<td>bk_pre_obj_name</td>
<td>string</td>
<td>当前模型的前一个模型的名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_operation_log/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取操作日志</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>查询起始记录</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>否</td>
<td>查询限制条数</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">99999</span><span class="p">,</span>
        <span class="s2">&quot;ext_key&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;$in&quot;</span><span class="p">:[</span>
                <span class="s2">&quot;127.0.0.23&quot;</span><span class="p">,</span>
                <span class="s2">&quot;127.0.0.22&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;op_target&quot;</span><span class="p">:</span><span class="s2">&quot;host&quot;</span><span class="p">,</span>
        <span class="s2">&quot;op_type&quot;</span><span class="p">:</span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
        <span class="s2">&quot;op_time&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;2017-12-25 10:10:10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;2017-12-25 10:10:11&quot;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;sort&quot;</span><span class="p">:</span><span class="s2">&quot;-create_time&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;op_desc&quot;</span><span class="p">:</span><span class="s2">&quot;修改主机&quot;</span><span class="p">,</span>
                <span class="s2">&quot;op_type&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                <span class="s2">&quot;op_target&quot;</span><span class="p">:</span><span class="s2">&quot;host&quot;</span><span class="p">,</span>
                <span class="s2">&quot;operator&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:{</span>
                    <span class="s2">&quot;pre_data&quot;</span><span class="p">:{</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-03-08T15:10:42.264+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;ref_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                                <span class="s2">&quot;ref_name&quot;</span><span class="p">:</span><span class="s2">&quot;Direct connecting area&quot;</span>
                            <span class="p">}</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-03-08T14:23:05.05+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.01&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_import_from&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;cur_data&quot;</span><span class="p">:{</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-03-08T15:10:42.264+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;ref_id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                                <span class="s2">&quot;ref_name&quot;</span><span class="p">:</span><span class="s2">&quot;test connecting area&quot;</span>
                            <span class="p">}</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-03-08T14:23:05.05+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_import_from&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;header&quot;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span><span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span><span class="s2">&quot;内网IP&quot;</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span><span class="s2">&quot;bk_host_outerip&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span><span class="s2">&quot;外网IP&quot;</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;map&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;ext_key&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;op_time&quot;</span><span class="p">:</span><span class="s2">&quot;2018-03-08T03:30:28.056Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;inst_id&quot;</span><span class="p">:</span><span class="mi">1</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false请求失败</td>
</tr>
<tr>
<td>bk_error_code</td>
<td>int</td>
<td>错误编码。 0表示success，&gt;0表示失败错误</td>
</tr>
<tr>
<td>bk_error_msg</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data_1">data 字段说明：</h4>
<p>| 名称  | 类型  | 描述 |
|---|---|---|---|
| count| int| 请求记录条数 |
| info| object array | record information |</p>
<h4 id="info">info 字段说明：</h4>
<p>| 名称  | 类型  | 描述 |
|---|---|---|---|
| bk_supplier_account| string| 开发商ID |
| bk_biz_id| int | 业务ID |
| op_type| string | 操作类型 |
| op_desc| string | 操作描述 |
| op_target| string| 操作对象 |
| operator| string | 操作者 |
| content| object 对象 | 操作内容 |
| ext_key| string  | 附加信息 |
| op_time| string |  操作时间 |
| inst_id| int | 实例ID |</p>
<h4 id="content-content">content  字段说明： content为实际的操作内容</h4><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_process_bind_module/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取进程绑定模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_process_id</td>
<td>int</td>
<td>是</td>
<td>进程ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span><span class="s2">&quot;db&quot;</span><span class="p">,</span>
            <span class="s2">&quot;set_num&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;is_bind&quot;</span><span class="p">:</span><span class="mi">0</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span><span class="s2">&quot;gs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;set_num&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;is_bind&quot;</span><span class="p">:</span><span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false请求失败</td>
</tr>
<tr>
<td>bk_error_code</td>
<td>int</td>
<td>错误编码。 0表示success，&gt;0表示失败错误</td>
</tr>
<tr>
<td>bk_error_msg</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data_1">data 字段说明：</h4>
<p>| 名称  | 类型  | 描述 |
|---|---|---|---|
| bk_module_name| string| 模块名 |
| set_num| int | 所属集群个数 |
| is_bind| int | 是否绑定 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_role_privilege/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取角色绑定权限</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>是</td>
<td>模型对应用户角色属性ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:[</span>
        <span class="s2">&quot;hostupdate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hosttrans&quot;</span><span class="p">,</span>
        <span class="s2">&quot;topoupdate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;customapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;proconfig&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>hostupdate</td>
<td>string</td>
<td>主机编辑</td>
</tr>
<tr>
<td>hosttrans</td>
<td>string</td>
<td>主机转移</td>
</tr>
<tr>
<td>topoupdate</td>
<td>string</td>
<td>主机拓扑编辑</td>
</tr>
<tr>
<td>customapi</td>
<td>string</td>
<td>自定义api</td>
</tr>
<tr>
<td>proconfig</td>
<td>string</td>
<td>进程管理</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_user_privilege/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询用户权限</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>user_name</td>
<td>string</td>
<td>是</td>
<td>用户名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_name&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_group_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;sys_config&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;global_busi&quot;</span><span class="p">:[</span>
                <span class="s2">&quot;resource&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;back_config&quot;</span><span class="p">:[</span>
                <span class="s2">&quot;event&quot;</span><span class="p">,</span>
                <span class="s2">&quot;model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;audit&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;model_config&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;network&quot;</span><span class="p">:{</span>
                <span class="s2">&quot;router&quot;</span><span class="p">:[</span>
                    <span class="s2">&quot;update&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;delete&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>group_id</td>
<td>string</td>
<td>分组ID</td>
</tr>
<tr>
<td>sys_config</td>
<td>object</td>
<td>系统配置</td>
</tr>
<tr>
<td>back_config</td>
<td>object</td>
<td>后台配置</td>
</tr>
<tr>
<td>model_config</td>
<td>object</td>
<td>模型配置</td>
</tr>
</tbody>
</table>
<h4 id="sys_config-global_busi">sys_config  目前仅有global_busi</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>resource</td>
<td>string</td>
<td>主机资源池</td>
</tr>
</tbody>
</table>
<h4 id="back_config">back_config</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td>string</td>
<td>事件推送配置</td>
</tr>
<tr>
<td>model</td>
<td>string</td>
<td>模型配置</td>
</tr>
<tr>
<td>audit</td>
<td>string</td>
<td>审计配置</td>
</tr>
</tbody>
</table>
<h4 id="model_config">model_config</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>create</td>
<td>string</td>
<td>新增</td>
</tr>
<tr>
<td>update</td>
<td>string</td>
<td>编辑</td>
</tr>
<tr>
<td>delete</td>
<td>string</td>
<td>删除</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>查询</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_biz_inst_topo/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>查询业务实例拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>level</td>
<td>int</td>
<td>否</td>
<td>拓扑的层级索引，索引取值从0开始，默认值为2，当设置为 -1 的时候会读取完整的业务实例拓扑</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;blueking&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;biz&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;business&quot;</span><span class="p">,</span>
            <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;job&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;job&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="p">[]</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>child</td>
<td>array</td>
<td>当前节点下的所有实例的集合</td>
</tr>
</tbody>
</table>
<h4 id="child">child</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>child</td>
<td>array</td>
<td>当前节点下的所有实例的集合</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>指定查询的字段，参数为业务的任意属性，如果不填写字段信息，系统会返回业务的所有字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件，参数为业务的任意属性，如果不写代表搜索全部数据</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段，通过在字段前面增加 -，如 sort:&#34;-field&#34; 可以表示按照字段 field降序</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_name&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;esb-test&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;esb-test&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>业务实际数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_classifications/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<p>| 字段                 |  类型      | 必选   |  描述                                                    |
|---|---|---|---|---|
| bk_supplier_account  | string     | 否     | 开发商账号                                               |</p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="s2">&quot;bk_classification_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_manage&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_classification_name&quot;</span><span class="p">:</span> <span class="s2">&quot;主机管理&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_classification_type&quot;</span><span class="p">:</span> <span class="s2">&quot;inner&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>分类ID，英文描述用于系统内部使用</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_type</td>
<td>string</td>
<td>用于对分类进行分类（如：inner代码为内置分类，空字符串为自定义分类）</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>数据记录ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询自定义api</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件，condition 字段为自定义api的属性字段, 可以是create_user,modify_user, name</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;api1&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;bacfet4kd42325venmcg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;api1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">biz</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$ne</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:1}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">set</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">module</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">host</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$eq</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">127.0.0.1</span><span class="se">\&quot;</span><span class="s2">}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_host_outerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_agent_status</span><span class="se">\&quot;</span><span class="s2">]}]}&quot;</span><span class="p">,</span>
                <span class="s2">&quot;create_user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-27T16:22:43.271+08:00&quot;</span><span class="p">,</span>
                <span class="s2">&quot;modify_user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-27T16:29:26.428+08:00&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>自定义api数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务ID</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>自定义api主键ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>自定义api信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>自定义api命名</td>
</tr>
</tbody>
</table>
<h4 id="datainfoinfo">data.info.info</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| bk_obj_id |  string   | 对象名,可以为biz,set,module,host,object |
| fields    |  array    | 查询输出字段 |
| condition |  array    | 查询条件 |</p>
<h4 id="datainfoinfocondition">data.info.info.condition</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| field     |  string    | 对象的字段 |
| operator  |  string    | 操作符, $eq为相等，$neq为不等，$in为属于，$nin为不属于 |
| value     |  string    | 字段对应的值 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_group_privilege/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询分组权限</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td>是</td>
<td>分组ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;group_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;group_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;sys_config&quot;</span><span class="p">:{</span>
             <span class="s2">&quot;global_busi&quot;</span><span class="p">:[</span>
                 <span class="s2">&quot;resource&quot;</span>
             <span class="p">],</span>
             <span class="s2">&quot;back_config&quot;</span><span class="p">:[</span>
                 <span class="s2">&quot;event&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;model&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;audit&quot;</span>
             <span class="p">]</span>
         <span class="p">},</span>
         <span class="s2">&quot;model_config&quot;</span><span class="p">:{</span>
             <span class="s2">&quot;network&quot;</span><span class="p">:{</span>
                 <span class="s2">&quot;router&quot;</span><span class="p">:[</span>
                     <span class="s2">&quot;update&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;delete&quot;</span>
                 <span class="p">]</span>
             <span class="p">}</span>
         <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>group_id</td>
<td>string</td>
<td>分组ID</td>
</tr>
<tr>
<td>sys_config</td>
<td>object</td>
<td>系统配置</td>
</tr>
<tr>
<td>back_config</td>
<td>object</td>
<td>后台配置</td>
</tr>
<tr>
<td>model_config</td>
<td>object</td>
<td>模型配置</td>
</tr>
</tbody>
</table>
<h4 id="sys_config-global_busi">sys_config  目前仅有global_busi</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>resource</td>
<td>string</td>
<td>主机资源池</td>
</tr>
</tbody>
</table>
<h4 id="back_config">back_config</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td>string</td>
<td>事件推送配置</td>
</tr>
<tr>
<td>model</td>
<td>string</td>
<td>模型配置</td>
</tr>
<tr>
<td>audit</td>
<td>string</td>
<td>审计配置</td>
</tr>
</tbody>
</table>
<h4 id="model_config">model_config</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>create</td>
<td>string</td>
<td>新增</td>
</tr>
<tr>
<td>update</td>
<td>string</td>
<td>编辑</td>
</tr>
<tr>
<td>delete</td>
<td>string</td>
<td>删除</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>查询</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据条件查询主机</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务ID</td>
</tr>
<tr>
<td>ip</td>
<td>dict</td>
<td>否</td>
<td>主机ip列表</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>组合条件</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>pattern</td>
<td>string</td>
<td>否</td>
<td>按表达式搜索</td>
</tr>
</tbody>
</table>
<h4 id="ip">ip</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>array</td>
<td>否</td>
<td>ip 数组</td>
</tr>
<tr>
<td>exact</td>
<td>int</td>
<td>否</td>
<td>是否根据ip精确搜索</td>
</tr>
<tr>
<td>flag</td>
<td>string</td>
<td>否</td>
<td>bk_host_innerip只匹配内网ip,bk_host_outerip只匹配外网ip, bk_host_innerip,bk_host_outerip同时匹配</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象名,可以为biz,set,module,host,object</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>查询输出字段</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="conditioncondition">condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>否</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>操作符, $eq为相等，$neq为不等，$in为属于，$nin为不属于</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>否</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;exact&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;flag&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_innerip|bk_host_outerip&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:[],</span>
            <span class="s2">&quot;condition&quot;</span><span class="p">:[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;set&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:[],</span>
            <span class="s2">&quot;condition&quot;</span><span class="p">:[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;biz&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:[],</span>
            <span class="s2">&quot;condition&quot;</span><span class="p">:[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;$eq&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">76</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_id&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;bk_cpu&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                    <span class="s2">&quot;bk_os_name&quot;</span><span class="p">:</span> <span class="s2">&quot;linux centos&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
                    <span class="s2">&quot;import_from&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_os_version&quot;</span><span class="p">:</span> <span class="s2">&quot;7.2&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_disk&quot;</span><span class="p">:</span> <span class="mi">1789</span><span class="p">,</span>
                    <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                    <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-22T16:52:53.239+08:00&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_mem&quot;</span><span class="p">:</span> <span class="mi">7843</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test-1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_innerip&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_os_bit&quot;</span><span class="p">:</span> <span class="s2">&quot;64-bit&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_outer_mac&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_childid&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                    <span class="s2">&quot;bk_input_from&quot;</span><span class="p">:</span> <span class="s2">&quot;agent&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_asset_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_service_term&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;plat&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default area&quot;</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;bk_sla&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cpu_mhz&quot;</span><span class="p">:</span> <span class="mi">2534</span><span class="p">,</span>
                    <span class="s2">&quot;bk_host_outerip&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_os_type&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_mac&quot;</span><span class="p">:</span> <span class="s2">&quot;00:00:00:00:00:00&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_bak_operator&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                    <span class="s2">&quot;bk_sn&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bk_cpu_module&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel(R)&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;set&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;bk_service_status&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_env&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
                        <span class="s2">&quot;bk_capacity&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-06-06T20:53:53.591+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_desc&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-06-13T14:20:20.149+08:00&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;biz&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;life_cycle&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_developer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_maintainer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_tester&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Asia/Shanghai&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-22T15:49:57.319+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_productor&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-06-05T15:03:55.699+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_id&quot;</span><span class="p">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span>
                        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                        <span class="s2">&quot;bk_bak_operator&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-26T16:56:59.486+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                        <span class="s2">&quot;bk_parent_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                        <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-26T16:56:59.486+08:00&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;bk_module_type&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>biz</td>
<td>array</td>
<td>主机所属的业务信息</td>
</tr>
<tr>
<td>set</td>
<td>array</td>
<td>主机所属的集群信息</td>
</tr>
<tr>
<td>module</td>
<td>array</td>
<td>主机所属的模块信息</td>
</tr>
<tr>
<td>host</td>
<td>dict</td>
<td>主机自身属性</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询主机锁</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ip_list</td>
<td>string array</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;ip_list&quot;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="s2">&quot;127.0.0.2&quot;</span><span class="p">],</span>
   <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_error_msg&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;127.0.0.2&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>map[string]bool</td>
<td>请求返回的数据, key 是 IP，value 是否上锁</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号,独立部署请填"0"</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页参数</td>
</tr>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>否</td>
<td>查询的字段</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_weblogic</td>
<td>string</td>
<td>是</td>
<td>此处仅为示例数据，需要被设置为模型的标识符，在页面上配置的英文名</td>
</tr>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>取值为模型的字段名</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>取值为：$regex $eq $ne</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>是</td>
<td>field配置的模型字段名所对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span><span class="s2">&quot;bk_inst_id&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;bk_weblogic&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="s2">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;bk_inst_name&quot;</span><span class="p">,</span>
                <span class="s2">&quot;operator&quot;</span><span class="p">:</span><span class="s2">&quot;$regex&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;qq&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-04-17T14:50:15.993+08:00&quot;</span><span class="p">,</span>
            <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-04-17T15:00:49.274+08:00&quot;</span><span class="p">,</span>
            <span class="s2">&quot;test_asst&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test_obj&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span>
            <span class="p">}]</span>
        <span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>实例实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>已存储的关联实例的id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>新增数据记录的ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>数据创建的时间</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>最后修改时间</td>
</tr>
<tr>
<td>test_asst</td>
<td>string</td>
<td>test_asst为此实例的关联字段，返回关联模型对应的实例。</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst_association_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询实例关联拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;curr&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span>
               <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-host&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;主机&quot;</span><span class="p">,</span>
               <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">0</span>
           <span class="p">},</span>
           <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="p">[</span>
               <span class="p">{</span>
                   <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-subnet&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;plat&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;云区域&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
                       <span class="p">{</span>
                           <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default area&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;plat&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
                       <span class="p">}</span>
                   <span class="p">],</span>
                   <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span>
               <span class="p">}</span>
           <span class="p">],</span>
           <span class="s2">&quot;prev&quot;</span><span class="p">:</span> <span class="p">[</span>
               <span class="p">{</span>
                   <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;rel&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;关联&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
                       <span class="p">{</span>
                           <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">162</span><span class="p">,</span>
                           <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test1&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;rel&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                       <span class="p">}</span>
                   <span class="p">],</span>
                   <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span>
               <span class="p">}</span>
           <span class="p">]</span>
       <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>curr</td>
<td>object</td>
<td>当前实例节点的信息</td>
</tr>
<tr>
<td>next</td>
<td>object array</td>
<td>当前节点的子节点集合</td>
</tr>
<tr>
<td>prev</td>
<td>object array</td>
<td>当前节点的父节点结合</td>
</tr>
</tbody>
</table>
<h4 id="curr">curr</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>children</td>
<td>object array</td>
<td>本模型下所有被关联的实例的集合</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>children     包含节点的数量</td>
</tr>
</tbody>
</table>
<h4 id="next">next</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>children</td>
<td>object array</td>
<td>本模型下所有被关联的实例的集合</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>children包含节点的数量</td>
</tr>
</tbody>
</table>
<h4 id="nextchildren">next/children</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
</tbody>
</table>
<h4 id="prev">prev</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>children</td>
<td>object array</td>
<td>本模型下所有被关联的实例的集合</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>children 包含节点的数量</td>
</tr>
</tbody>
</table>
<h4 id="prevchildren">prev/children 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst_by_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询给定模型的实例信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>自定义模型ID，查询区域时为plat</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>指定查询的字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="fields">fields参数说明</h4>
<p>参数为查询的目标实例对应的模型定义的所有字段</p>
<h4 id="condition">condition 参数说明</h4>
<p>condition 参数为查询的目标实例对应的模型定义的所有字段</p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;plat&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">],</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;bk_cloud_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default area&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>info 集合中元素的数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>查询的模型的实例集合</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域ID</td>
</tr>
<tr>
<td>bk_cloud_name</td>
<td>string</td>
<td>云区域名</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群ID</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>查询字段，字段来自于模块定义的属性字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>是</td>
<td>查询条件，字段来自于模块定义的属性字段</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>是</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;bk_module_name&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_service&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cmdb&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>数据数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>结果集，其中，所有字段均为模块定义的属性字段</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_objects/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>否</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>否</td>
<td>对象模型的分类ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象模型的ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>否</td>
<td>对象模型的名字，用于展示，可以使用人类可以阅读的任何语言</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="s2">&quot;modifier&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;biz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_organization&quot;</span><span class="p">,</span>
            <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-08T11:30:28.005+08:00&quot;</span><span class="p">,</span>
            <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_system&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;bk_ispaused&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;ispre&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;modifier&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-XXX&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;XX&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;XXX&quot;</span><span class="p">,</span>
            <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">test_obj</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">x</span><span class="se">\&quot;</span><span class="s2">:-253,</span><span class="se">\&quot;</span><span class="s2">y</span><span class="se">\&quot;</span><span class="s2">:137}}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>数据记录的ID</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>对象模型的分类ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象模型的ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>对象模型的名字，用于展示</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_ispaused</td>
<td>bool</td>
<td>是否停用, true or false</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>是否预定义, true or false</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>对象模型的ICON信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
<tr>
<td>position</td>
<td>json object string</td>
<td>用于前端展示的坐标</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询对象模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
   <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_asst_type&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-08T11:30:27.898+08:00&quot;</span><span class="p">,</span>
           <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_system&quot;</span><span class="p">,</span>
           <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;editable&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
           <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>
           <span class="s2">&quot;isapi&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
           <span class="s2">&quot;isonly&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
           <span class="s2">&quot;ispre&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
           <span class="s2">&quot;isreadonly&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
           <span class="s2">&quot;isrequired&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
           <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-03-08T11:30:27.898+08:00&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;process&quot;</span><span class="p">,</span>
           <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_group&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_group_name&quot;</span><span class="p">:</span> <span class="s2">&quot;基础信息&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_process_name&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_index&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;进程名称&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_property_type&quot;</span><span class="p">:</span> <span class="s2">&quot;singlechar&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
           <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
       <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>用户自定义内容，存储的内容及格式由调用方决定</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>模型的属性ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>定义的属性字段用于存储数据的数据类型 （singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_object_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询普通模型拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类ID，只能用英文字母序列命名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
           <span class="s2">&quot;arrows&quot;</span><span class="p">:</span> <span class="s2">&quot;to&quot;</span><span class="p">,</span>
           <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_manage&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;主机&quot;</span><span class="p">,</span>
               <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">bk_host_manage</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">x</span><span class="se">\&quot;</span><span class="s2">:-357,</span><span class="se">\&quot;</span><span class="s2">y</span><span class="se">\&quot;</span><span class="s2">:-344},</span><span class="se">\&quot;</span><span class="s2">lhmtest</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">x</span><span class="se">\&quot;</span><span class="s2">:163,</span><span class="se">\&quot;</span><span class="s2">y</span><span class="se">\&quot;</span><span class="s2">:75}}&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
           <span class="p">},</span>
           <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_cloud_id&quot;</span><span class="p">,</span>
           <span class="s2">&quot;label_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;label_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_host_manage&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;plat&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;云区域&quot;</span><span class="p">,</span>
               <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">bk_host_manage</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">x</span><span class="se">\&quot;</span><span class="s2">:-172,</span><span class="se">\&quot;</span><span class="s2">y</span><span class="se">\&quot;</span><span class="s2">:-160}}&quot;</span><span class="p">,</span>
               <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
           <span class="p">}</span>
        <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>arrows</td>
<td>string</td>
<td>取值 to（单向） 或 to,from（双向）</td>
</tr>
<tr>
<td>label_name</td>
<td>string</td>
<td>关联关系的名字</td>
</tr>
<tr>
<td>label</td>
<td>string</td>
<td>表明From通过哪个字段关联到To的</td>
</tr>
<tr>
<td>from</td>
<td>string</td>
<td>对象模型的英文id，拓扑关系的发起方</td>
</tr>
<tr>
<td>to</td>
<td>string</td>
<td>对象模型的英文ID，拓扑关系的终止方</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_object_topo_graphics/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询拓扑图</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>scope_type</td>
<td>string</td>
<td>是</td>
<td>图形范围类型,可选global,biz,cls(当前只有global)</td>
</tr>
<tr>
<td>scope_id</td>
<td>string</td>
<td>是</td>
<td>图形范围类型下的ID,如果为global,则填0</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;scope_type&quot;</span><span class="p">:</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span>
    <span class="s2">&quot;scope_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;node_type&quot;</span><span class="p">:</span> <span class="s2">&quot;obj&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;switch&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s2">&quot;node_name&quot;</span><span class="p">:</span> <span class="s2">&quot;switch&quot;</span><span class="p">,</span>
           <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
               <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">100</span>
           <span class="p">},</span>
           <span class="s2">&quot;ext&quot;</span><span class="p">:</span> <span class="p">{},</span>
           <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-switch2&quot;</span><span class="p">,</span>
           <span class="s2">&quot;scope_type&quot;</span><span class="p">:</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span>
           <span class="s2">&quot;scope_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
           <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
           <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
           <span class="s2">&quot;assts&quot;</span><span class="p">:</span> <span class="p">[</span>
               <span class="p">{</span>
                   <span class="s2">&quot;bk_asst_type&quot;</span><span class="p">:</span> <span class="s2">&quot;singleasst&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;node_type&quot;</span><span class="p">:</span> <span class="s2">&quot;obj&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;bk_object_att_id&quot;</span><span class="p">:</span> <span class="s2">&quot;host_id&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;lable&quot;</span><span class="p">:</span> <span class="p">{}</span>
               <span class="p">}</span>
           <span class="p">]</span>
       <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>node_type</td>
<td>string</td>
<td>节点类型,可选obj,inst</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象模型的ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>node_name</td>
<td>string</td>
<td>节点名,当node_type为obj时是模型名称,当node_type为inst时是实例名称</td>
</tr>
<tr>
<td>position</td>
<td>string</td>
<td>节点在图中的位置</td>
</tr>
<tr>
<td>ext</td>
<td>object</td>
<td>前端扩展字段</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>对象模型的图标</td>
</tr>
<tr>
<td>scope_type</td>
<td>string</td>
<td>图形范围类型,可选global,biz,cls(当前只有global)</td>
</tr>
<tr>
<td>scope_id</td>
<td>string</td>
<td>图形范围类型下的ID,如果为global,则填0</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>assts</td>
<td>array</td>
<td>关联节点</td>
</tr>
</tbody>
</table>
<h4 id="assts">assts</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_asst_type</td>
<td>string</td>
<td>关联类型</td>
</tr>
<tr>
<td>node_type</td>
<td>string</td>
<td>节点类型,可选obj,inst</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象模型的ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例ID</td>
</tr>
<tr>
<td>bk_object_att_id</td>
<td>string</td>
<td>关联的属性</td>
</tr>
<tr>
<td>lable</td>
<td>obj ect</td>
<td>标签,扩展字段,未启用</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>查询字段，所有字段均为set定义的字段，这些字段包括预置字段，也包括用户自定义字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>是</td>
<td>查询条件，所有字段均为Set定义的字段，这些字段包括预置字段，也包括用户自定义字段</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>是</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;bk_set_name&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="s2">&quot;bk_set_name&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>数据数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>结果集，其中，所有字段均为集群定义的属性字段</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_subscription/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询订阅</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<div class="codehilite"><pre><span></span><span class="err">无</span>
</pre></div>


<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;subscription_name&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;page&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;sort&quot;</span><span class="p">:</span><span class="s2">&quot;HostName&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="s2">&quot;subscription_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;subscription_name&quot;</span><span class="p">:</span><span class="s2">&quot;mysubscribe&quot;</span><span class="p">,</span>
            <span class="s2">&quot;system_name&quot;</span><span class="p">:</span><span class="s2">&quot;SystemName&quot;</span><span class="p">,</span>
            <span class="s2">&quot;callback_url&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1:8080/callback&quot;</span><span class="p">,</span>
            <span class="s2">&quot;confirm_mode&quot;</span><span class="p">:</span><span class="s2">&quot;httpstatus&quot;</span><span class="p">,</span>
            <span class="s2">&quot;confirm_pattern&quot;</span><span class="p">:</span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
            <span class="s2">&quot;subscription_form&quot;</span><span class="p">:</span><span class="s2">&quot;hostcreate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeout&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;last_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-09-19 16:57:07&quot;</span><span class="p">,</span>
            <span class="s2">&quot;operator&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="s2">&quot;statistics&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                <span class="s2">&quot;failure&quot;</span><span class="p">:</span> <span class="mi">2</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>订阅ID</td>
</tr>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>订阅名</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>系统名称</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>回调地址</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>回调成功确认模式，可选:httpstatus，regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>回调成功标志</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>订阅单，用","分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>超时时间，单位：秒</td>
</tr>
<tr>
<td>operator</td>
<td>int</td>
<td>本条数据的最后更新人员</td>
</tr>
<tr>
<td>last_time</td>
<td>int</td>
<td>更新时间</td>
</tr>
<tr>
<td>statistics.total</td>
<td>int</td>
<td>推送总数</td>
</tr>
<tr>
<td>statistics.failure</td>
<td>int</td>
<td>推送失败数</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_user_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询用户分组</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>group_name</td>
<td>string</td>
<td>否</td>
<td>分组名</td>
</tr>
<tr>
<td>user_list</td>
<td>string</td>
<td>否</td>
<td>分组用户列表，多个用;分割</td>
</tr>
</tbody>
</table>
<p>body 为空对象时返回所有的分组</p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;group_name&quot;</span><span class="p">:</span><span class="s2">&quot;管理员&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_list&quot;</span><span class="p">:</span><span class="s2">&quot;owen;tt&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="s2">&quot;group_name&quot;</span><span class="p">:</span><span class="s2">&quot;管理员&quot;</span><span class="p">,</span>
            <span class="s2">&quot;user_list&quot;</span><span class="p">:</span><span class="s2">&quot;owen;tt&quot;</span><span class="p">,</span>
            <span class="s2">&quot;group_id&quot;</span><span class="p">:</span><span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>group_name</td>
<td>string</td>
<td>分组名</td>
</tr>
<tr>
<td>user_list</td>
<td>string</td>
<td>用户列表</td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td>分组ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/subscribe_event/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>订阅事件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>是</td>
<td>订阅的名字</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>是</td>
<td>订阅事件的系统的名字</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>是</td>
<td>回调函数</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>是</td>
<td>事件发送成功校验模式,可选 1-httpstatus,2-regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>是</td>
<td>callback的httpstatus或正则</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>是</td>
<td>订阅的事件,以逗号分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>是</td>
<td>发送事件超时时间</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;subscription_name&quot;</span><span class="p">:</span><span class="s2">&quot;mysubscribe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;system_name&quot;</span><span class="p">:</span><span class="s2">&quot;SystemName&quot;</span><span class="p">,</span>
  <span class="s2">&quot;callback_url&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1:8080/callback&quot;</span><span class="p">,</span>
  <span class="s2">&quot;confirm_mode&quot;</span><span class="p">:</span><span class="s2">&quot;httpstatus&quot;</span><span class="p">,</span>
  <span class="s2">&quot;confirm_pattern&quot;</span><span class="p">:</span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
  <span class="s2">&quot;subscription_form&quot;</span><span class="p">:</span><span class="s2">&quot;hostcreate&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timeout&quot;</span><span class="p">:</span><span class="mi">10</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;subscription_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>新增订阅的订阅ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/testing_connection/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>测试推送（只测试连通性）</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>callback_url</td>
<td>string</td>
<td>回调方法</td>
<td>The callback URL</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;callback_url&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1:8080/callback&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:{</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span>  <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>业务内主机转移模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机ID</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>array</td>
<td>是</td>
<td>模块ID</td>
</tr>
<tr>
<td>is_increment</td>
<td>bool</td>
<td>是</td>
<td>覆盖或者追加,会删除原有关系. true是更新，false是覆盖</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">9</span><span class="p">,</span>
        <span class="mi">10</span>
    <span class="p">],</span>
    <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">10</span>
    <span class="p">],</span>
    <span class="s2">&quot;is_increment&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_faultmodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机到业务的故障机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">9</span><span class="p">,</span>
        <span class="mi">10</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_idlemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机到业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">9</span><span class="p">,</span>
        <span class="mi">10</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_resourcemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机至资源池</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">9</span><span class="p">,</span>
        <span class="mi">10</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_resourcehost_to_idlemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>资源池主机分配至业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">9</span><span class="p">,</span>
        <span class="mi">10</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_sethost_to_idle_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机到业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span><span class="mi">58</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span><span class="mi">1</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;sucess&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/unsubcribe_event/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>退订事件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>是</td>
<td>订阅ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subscription_id&quot;</span><span class="p">:</span><span class="mi">1</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新业务信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>否</td>
<td>业务名</td>
</tr>
<tr>
<td>bk_biz_developer</td>
<td>string</td>
<td>否</td>
<td>开发人员</td>
</tr>
<tr>
<td>bk_biz_maintainer</td>
<td>string</td>
<td>否</td>
<td>运维人员</td>
</tr>
<tr>
<td>bk_biz_productor</td>
<td>string</td>
<td>否</td>
<td>产品人员</td>
</tr>
<tr>
<td>bk_biz_tester</td>
<td>string</td>
<td>否</td>
<td>测试人员</td>
</tr>
</tbody>
</table>
<p><strong>注意：此处的输入参数仅对必填以及系统内置的参数做了说明，其余需要填写的参数取决于用户自己定义的属性字段</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_biz_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_app_test&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_maintainer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_productor&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_developer&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bk_biz_tester&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_business_enable_status/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>修改业务启用状态</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商id</td>
</tr>
<tr>
<td>flag</td>
<td>string</td>
<td>是</td>
<td>启用状态，为disabled 或者enable</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;flag&quot;</span><span class="p">:</span> <span class="s2">&quot;enable&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>目标数据的记录ID，作为更新操作的条件</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>否</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>否</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_test_new&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span>
<span class="p">}</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="o">###</span> <span class="err">返回结果示例</span>

<span class="o">```</span><span class="n">python</span>

<span class="err">{</span>
    <span class="ss">&quot;result&quot;</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
    <span class="ss">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="ss">&quot;message&quot;</span><span class="p">:</span> <span class="ss">&quot;&quot;</span><span class="p">,</span>
    <span class="ss">&quot;data&quot;</span><span class="p">:</span> <span class="ss">&quot;success&quot;</span>
<span class="err">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新自定义api</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>否</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>否</td>
<td>收藏的名称</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象名,可以为biz,set,module,host,object</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>查询输出字段</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>否</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>操作符, $eq为相等，$neq为不等，$in为属于，$nin为不属于</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>否</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">biz</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$ne</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:1}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">set</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">module</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[]},{</span><span class="se">\&quot;</span><span class="s2">bk_obj_id</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">host</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">condition</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">field</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">operator</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">$eq</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">value</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">127.0.0.1</span><span class="se">\&quot;</span><span class="s2">}],</span><span class="se">\&quot;</span><span class="s2">fields</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">bk_host_innerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_host_outerip</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">bk_agent_status</span><span class="se">\&quot;</span><span class="s2">]}]}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;api1&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_event_subscribe/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>修改订阅</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>是</td>
<td>订阅ID</td>
</tr>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>是</td>
<td>订阅的名字</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>是</td>
<td>订阅事件的系统的名字</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>是</td>
<td>回调函数</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>是</td>
<td>事件发送成功校验模式,可选 1-httpstatus,2-regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>是</td>
<td>callback的httpstatus或正则</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>是</td>
<td>订阅的事件,以逗号分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>是</td>
<td>发送事件超时时间</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;subscription_name&quot;</span><span class="p">:</span><span class="s2">&quot;mysubscribe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;subscription_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;system_name&quot;</span><span class="p">:</span><span class="s2">&quot;SystemName&quot;</span><span class="p">,</span>
  <span class="s2">&quot;callback_url&quot;</span><span class="p">:</span><span class="s2">&quot;http://127.0.0.1:8080/callback&quot;</span><span class="p">,</span>
  <span class="s2">&quot;confirm_mode&quot;</span><span class="p">:</span><span class="s2">&quot;httpstatus&quot;</span><span class="p">,</span>
  <span class="s2">&quot;confirm_pattern&quot;</span><span class="p">:</span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
  <span class="s2">&quot;subscription_form&quot;</span><span class="p">:</span><span class="s2">&quot;hostcreate&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timeout&quot;</span><span class="p">:</span><span class="mi">10</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新主机属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>string</td>
<td>是</td>
<td>主机ID，多个以逗号分隔</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>否</td>
<td>主机数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>否</td>
<td>主机名</td>
</tr>
</tbody>
</table>
<p><strong>注意：输入的字段为主机定义的属性</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_host_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1,2,3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_host_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">none</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型ID，更新云区域时为"plat"</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例ID,更新云区域时为"bk_cloud_id"</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>否</td>
<td>实例名，也可以为其它自定义字段</td>
</tr>
<tr>
<td>bk_cloud_name</td>
<td>string</td>
<td>否</td>
<td>云区域名，更新云区域名时需要</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例(通用实例示例)</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;bk_inst_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_cloud_name&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span>
 <span class="p">}</span>
</pre></div>


<h3 id="_8">请求参数示例(云区域示例)</h3>
<div class="codehilite"><pre><span></span>  <span class="p">{</span>
    <span class="s2">&quot;bk_cloud_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cloud1&quot;</span>
  <span class="p">}</span>
</pre></div>


<h3 id="_9">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>模块数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>否</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<p><strong>注意：输入的字段为模块定义的属性</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_module_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_module_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模型定义</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>目标数据的记录ID，作为更新操作的条件</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>否</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>否</td>
<td>对象模型的名字</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的ICON信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
<tr>
<td>position</td>
<td>json object string</td>
<td>否</td>
<td>用于前端展示的坐标</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;modifier&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_classification_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cc_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cc2_test_inst&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-business&quot;</span><span class="p">,</span>
    <span class="s2">&quot;position&quot;</span><span class="p">:</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ff</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">x</span><span class="se">\&quot;</span><span class="s2">:-863,</span><span class="se">\&quot;</span><span class="s2">y</span><span class="se">\&quot;</span><span class="s2">:1}}&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新对象模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>目标数据的记录ID</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>表明是否只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>表明是否必填</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>否</td>
<td _min_:_1_max_:_2_="&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;">用户自定义内容，存储的内容及格式由调用方决定, 以数字内容为例（</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>否</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>否</td>
<td>定义的属性字段用于存储数据的数据类型（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unit&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isonly&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isreadonly&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isrequired&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_group&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">min</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">max</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">4</span><span class="se">\&quot;</span><span class="s2">}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_name&quot;</span><span class="p">:</span><span class="s2">&quot;aaa&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_property_type&quot;</span><span class="p">:</span><span class="s2">&quot;int&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_asst_obj_id&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object_topo_graphics/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新拓扑图</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>scope_type</td>
<td>string</td>
<td>是</td>
<td>图形范围类型,可选global,biz,cls(当前只有global)</td>
</tr>
<tr>
<td>scope_id</td>
<td>string</td>
<td>是</td>
<td>图形范围类型下的ID,如果为global,则填0</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>是</td>
<td>更新方法,可选update,override</td>
</tr>
<tr>
<td>data</td>
<td>list</td>
<td>否</td>
<td>更新数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>node_type</td>
<td>string</td>
<td>是</td>
<td>节点类型,可选obj,inst</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例ID</td>
</tr>
<tr>
<td>position</td>
<td>dict</td>
<td>否</td>
<td>节点在图中的位置</td>
</tr>
<tr>
<td>ext</td>
<td>dict</td>
<td>否</td>
<td>前端扩展字段</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的图标</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong>：</p>
<ul>
<li>
<p>scope_type,scope_id 唯一确定一张图</p>
</li>
<li>
<p>node_type,bk_obj_id,bk_inst_id 三者唯一确定每张图的一个节点，故必填</p>
</li>
</ul>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;scope_type&quot;</span><span class="p">:</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span>
    <span class="s2">&quot;scope_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;node_type&quot;</span><span class="p">:</span> <span class="s2">&quot;obj&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_obj_id&quot;</span><span class="p">:</span> <span class="s2">&quot;switch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bk_inst_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">100</span>
            <span class="p">},</span>
            <span class="s2">&quot;ext&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;bk_obj_icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon-cc-switch2&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>否</td>
<td>集群数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>否</td>
<td>父节点的ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>否</td>
<td>集群名字</td>
</tr>
</tbody>
</table>
<p><strong>注意：用户自定义的字段也可以作为参数传入</strong></p>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_app_code&quot;</span><span class="p">:</span> <span class="s2">&quot;esb_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_app_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_token&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span> <span class="s2">&quot;123456789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bk_biz_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;bk_set_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;bk_set_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_user_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新用户分组</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td>是</td>
<td>分组ID</td>
</tr>
<tr>
<td>group_name</td>
<td>string</td>
<td>否</td>
<td>分组名</td>
</tr>
<tr>
<td>user_list</td>
<td>string</td>
<td>否</td>
<td>分组用户列表，多个用;分割</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bk_supplier_account&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;group_id&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;group_name&quot;</span><span class="p">:</span><span class="s2">&quot;administrators&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_list&quot;</span><span class="p">:</span><span class="s2">&quot;owen;tt&quot;</span>
<span class="p">}</span>
</pre></div>


<h3 id="_8">返回结果示例</h3>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div><h1 id="_1">配置平台常见问题</h1>
<h2 id="cmdb">CMDB 无快照数据</h2>
<blockquote>
<p>此文档描述 4.0 及以上的社区版的问题排查</p>
<p>Windows 主机暂不支持快照数据</p>
</blockquote>
<p><strong>表象</strong>：配置管理系统的实时状态显示<code>当前主机没有安装 Agent 或者 Agent 已经离线</code></p>
<p><strong>原因</strong></p>
<ol>
<li>gse 及 gse_agent 状态不正常</li>
<li>bkdata 的快照数据任务不存在</li>
<li>kafka 内节点或 topic 数据异常</li>
</ol>
<p><strong>思路方法</strong></p>
<ul>
<li>
<p>检查模块状态</p>
</li>
<li>
<p>确定 cmdb，gse，gse_agent，zk，kafka 模块的状态是否正常，可以使用 <code>./bkcec status XXX模块</code> 来确认</p>
</li>
<li>
<p><strong>检查 cmdb 日志</strong></p>
</li>
</ul>
<div class="codehilite"><pre><span></span>检查<span class="o">/</span><span class="nv">data</span><span class="o">/</span><span class="nv">bkce</span><span class="o">/</span><span class="nv">log</span><span class="o">/</span><span class="nv">cmdb</span><span class="o">/</span><span class="nv">cmdb_datacollection</span>.<span class="nv">INFO</span>文件
出现<span class="nv">ccapi</span>.<span class="nv">go93</span>] <span class="nv">fail</span> <span class="nv">to</span> <span class="nv">get</span> <span class="nv">configure</span>, <span class="nv">will</span> <span class="nv">get</span> <span class="nv">again</span>，表示不正常
返回<span class="nv">hostsnap</span>.<span class="nv">go</span>:<span class="nv">xxx</span>] <span class="nv">master</span> <span class="nv">check</span> : <span class="nv">iam</span> <span class="nv">still</span> <span class="nv">master</span>，表示正常
检查<span class="nv">cmdb_datacollection</span>.<span class="nv">ERROR</span>文件，确认是否出现<span class="nv">err</span>:<span class="nv">fail</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">zookeeper</span>. <span class="nv">err</span>：<span class="nv">lookup</span> <span class="nv">zk</span>.<span class="nv">service</span>.<span class="nv">consul</span>等
如果日志出现“<span class="nv">subcribing</span> <span class="nv">channel</span> <span class="mi">2</span><span class="nv">_snapshot</span>”后没有<span class="nv">subChan</span> <span class="nv">Close</span>，那么表明收数据协程正常工作
如果上述条都正常，但没有”<span class="nv">handle</span> <span class="nv">xx</span> <span class="nv">num</span> <span class="nv">mesg</span>, <span class="nv">routines</span> <span class="nv">xx</span>“，说明通道里没数据，请到<span class="nv">redis</span>里 <span class="nv">subscribe</span> ${<span class="nv">biz</span>}<span class="nv">_snapshot</span> 确认通道是否没数据，参考如下检查<span class="nv">redis</span>数据方法
<span class="nv">Copy</span>
</pre></div>


<ul>
<li><strong>gse agent 采集端排查</strong></li>
</ul>
<div class="codehilite"><pre><span></span><span class="c1"># 检查进程是否存在，basereport 进程存在且唯一</span>
Linux： ps -ef <span class="p">|</span> grep basereport
Windows: tasklist <span class="p">|</span> findstr basereport

<span class="c1"># 若进程不存在，手动启动，检查启动失败的原因</span>
Linux: <span class="nb">cd</span> /usr/local/gse/plugins/bin <span class="o">&amp;&amp;</span> ./basereport -c ../etc/basereport.conf
Windows<span class="o">(</span>cygwin<span class="o">)</span>: <span class="nb">cd</span> /cygdrive/c/gse/plugins/bin/ <span class="o">&amp;&amp;</span> ./basereport -c ../etc/basereport.conf
Windows<span class="o">(</span>无cygwin<span class="o">)</span> : <span class="nb">cd</span> C:/gse/plugins/bin/ <span class="o">&amp;&amp;</span> start.bat basereport

<span class="c1"># 检查数据上报连接，有正常 ESTABLISHED 的链接则 ok</span>
<span class="c1"># 若存在 proxy，登陆 proxy 机器：检测 58625 端口同上</span>
Linux netstat -antp <span class="p">|</span> grep <span class="m">58625</span> <span class="p">|</span> grep ESTABLISHED
Windows netstat -ano <span class="p">|</span> grep <span class="m">58625</span>
Copy
</pre></div>


<ul>
<li><strong>GSE 服务端排查</strong></li>
</ul>
<div class="codehilite"><pre><span></span><span class="c1"># 登陆 GSE 后台服务器，检测 gse_data 是否连上 9092 端口:</span>
Linux: lsof -nP -c dataWorker <span class="p">|</span> grep :9092
Windows: netstat -ano <span class="p">|</span> grep <span class="m">9092</span>

<span class="c1"># 看有没有 gse_data 的 pid 开头命名的日志。 若有，tail 查看日志内容</span>
<span class="nv">datapid</span><span class="o">=</span><span class="k">$(</span>pgrep -x dataWorker<span class="k">)</span>
ls -l /data/bkce/public/gse/data/<span class="si">${</span><span class="nv">datapid</span><span class="si">}</span>*
Copy
</pre></div>


<ul>
<li>检查 kafka</li>
<li>登陆任意 KAFKA 机器：查看 KAFKA 最新数据，等待 1 分钟查看是否有数据。 如果有数据，在最后一行命令后加上<code>| grep $ip</code> $ip 用无快照数据的 ip 替换， 再次查看是否有数据</li>
</ul>
<div class="codehilite"><pre><span></span><span class="c1"># 登录到 kafka 所在的机器上</span>
$ <span class="nb">source</span> /data/install/utils.fc
/data/bkce/service/zk/bin/zkCli.sh -server zk.service.consul:2181 get /gse/config/etc/dataserver/data/1001
<span class="c1"># 确认存在 topic</span>
<span class="nv">zkaddr</span><span class="o">=</span><span class="sb">`</span>cat /data/bkce/service/kafka/config/server.properties <span class="p">|</span> grep common_kafka <span class="p">|</span> cut -d <span class="s1">&#39;=&#39;</span> -f <span class="m">2</span><span class="sb">`</span>
<span class="nv">topic</span><span class="o">=</span><span class="sb">`</span>bash /data/bkce/service/kafka/bin/kafka-topics.sh --list --zookeeper <span class="nv">$zkaddr</span><span class="p">|</span>grep ^snap<span class="sb">`</span>

<span class="c1"># 查看 topic 中的最新数据</span>
bash /data/bkce/service/kafka/bin/kafka-console-consumer.sh --zookeeper <span class="nv">$zkaddr</span> --topic <span class="nv">$topic</span>
<span class="c1"># 每隔一分钟会上报数据，有数据上报侧表示正常</span>
Copy
</pre></div>


<ul>
<li><strong>检查 bkdata</strong></li>
</ul>
<div class="codehilite"><pre><span></span><span class="c1"># 快照数据对 应bkdata，databu s的 redis 任务，需确认 databus 状态下的 redis 任务是否存在</span>
$ bash /data/bkce/bkdata/dataapi/bin/check_databus_status.sh
<span class="c1"># 检查是否存在如下redis任务</span>
<span class="o">===========</span><span class="nv">REDIS</span><span class="o">===============</span>
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
<span class="m">100</span>    <span class="m">25</span>  <span class="m">100</span>    <span class="m">25</span>    <span class="m">0</span>     <span class="m">0</span>    <span class="m">142</span>      <span class="m">0</span> --:--:-- --:--:-- --:--:--   <span class="m">142</span>
redis_1001_2_snapshot
<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;redis_1001_2_snapshot&quot;</span>,<span class="s2">&quot;connector&quot;</span>:<span class="o">{</span><span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;RUNNING&quot;</span>,<span class="s2">&quot;worker_id&quot;</span>:<span class="s2">&quot;x.x.x.x:10053&quot;</span><span class="o">}</span>,<span class="s2">&quot;tasks&quot;</span>:<span class="o">[{</span><span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;RUNNING&quot;</span>,<span class="s2">&quot;id&quot;</span>:0,<span class="s2">&quot;worker_id&quot;</span>:<span class="s2">&quot;x.x.x.x:10053&quot;</span><span class="o">}]}</span>
<span class="o">==========================</span>

<span class="c1"># 若上述任务不存在，可能在初始化bkdata数据时异常，可以采用如下方法重新创建，先确认init_bkdata_snapshot是否存在</span>
$ ll /data/bkce/.init_bkdata_snapshot
$ rm -f /data/bkce/.init_bkdata_snapshot
$ deactivate
$ <span class="nb">source</span> /data/install/utils.fc
$ init_bkdata_snapshot
<span class="c1"># 再根据上面的重新确认是否有redis任务</span>
Copy
</pre></div>


<ul>
<li><strong>检查 redis 通道</strong></li>
</ul>
<div class="codehilite"><pre><span></span><span class="c1"># 此步主要检查redis内是否有快照数据，在redis服务器上</span>
<span class="nb">source</span> /data/install/utils.fc
$ redis-cli -h <span class="nv">$REDIS_IP</span> -p <span class="nv">$REDIS_PORT</span> -a <span class="nv">$REDIS_PASS</span>
<span class="m">10</span>.X.X.X:6379&gt; AUTH <span class="s2">&quot;REDIS密码&quot;</span>
OK
<span class="m">10</span>.X.X.X:6379&gt; SUBSCRIBE 2_snapshot
Reading messages... <span class="o">(</span>press Ctrl-C to quit<span class="o">)</span>
<span class="m">1</span><span class="o">)</span> <span class="s2">&quot;subscribe&quot;</span>
<span class="m">2</span><span class="o">)</span> <span class="s2">&quot;2_snapshot&quot;</span>
<span class="m">3</span><span class="o">)</span> <span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
<span class="m">1</span><span class="o">)</span> <span class="s2">&quot;message&quot;</span>
<span class="m">2</span><span class="o">)</span> <span class="s2">&quot;2_snapshot&quot;</span>
<span class="m">3</span><span class="o">)</span> <span class="s2">&quot;{\&quot;localTime\&quot;: \&quot;2018-08-15 11:18:00\&quot;, \&quot;data\&quot;: \&quot;{\\\&quot;beat\\\&quot;:{\\\&quot;address\\\&quot;:</span>
<span class="s2">Copy</span>
</pre></div>


<h2 id="cmdb_1">CMDB 无主机信息</h2>
<p><strong>表象</strong>：CMDB 内主机信息为空</p>
<p><strong>原因</strong></p>
<ol>
<li>gse 安装异常或 gse 数据初始化不对</li>
<li>gse_agent 安装异常</li>
</ol>
<p><strong>思路办法</strong></p>
<p>原因 1：参考 GSE 数据初始化失败解决方法，需要更新 GSE 版本中的初始化程序文件 on_migrate 和 parse_bizid，路径<code>/data/bkce/gse/server/bin</code></p>
<p>原因 2：重装 gse_agent</p>
    </body>
    </html>
    